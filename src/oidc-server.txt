2025-03-16 03:34:07.479 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-16 03:34:07.617 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-16 03:34:07.624 -04:00 [INF] Quartz Scheduler created
2025-03-16 03:34:07.625 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-16 03:34:07.625 -04:00 [INF] RAMJobStore initialized.
2025-03-16 03:34:07.626 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-16 03:34:07.626 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-16 03:34:07.626 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-16 03:34:07.634 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-16 03:34:07.635 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-16 03:34:08.446 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-16 03:34:08.536 -04:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-16 03:34:08.792 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:34:08.869 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:34:08.871 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:34:08.873 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:34:08.886 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-16 03:34:09.453 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-16 03:34:09.454 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-16 03:34:09.454 -04:00 [INF] Hosting environment: Development
2025-03-16 03:34:09.454 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-16 03:34:09.456 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-16 03:34:09.769 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-16 03:34:10.073 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:34:10.080 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-16 03:34:10.137 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:34:10.142 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.9599ms.
2025-03-16 03:34:10.153 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-16 03:34:10.234 -04:00 [INF] Executed ViewResult - view Index executed in 86.8195ms.
2025-03-16 03:34:10.236 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 154.8166ms
2025-03-16 03:34:10.236 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:34:10.244 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 481.7939ms
2025-03-16 03:34:10.253 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:34:10.255 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:34:10.281 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 28.1493ms
2025-03-16 03:34:10.308 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.5357ms
2025-03-16 03:34:11.615 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login - null null
2025-03-16 03:34:11.670 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-16 03:34:11.691 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-16 03:34:11.703 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-16 03:34:11.710 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-16 03:34:11.711 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-16 03:34:11.713 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-16 03:34:11.713 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-16 03:34:11.762 -04:00 [INF] Executed page /Account/Login in 69.8747ms
2025-03-16 03:34:11.762 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-16 03:34:11.763 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login - 200 null text/html; charset=utf-8 147.919ms
2025-03-16 03:34:11.768 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:34:11.769 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:34:11.769 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 1.0127ms
2025-03-16 03:34:11.804 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.4376ms
2025-03-16 03:34:17.680 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login - application/x-www-form-urlencoded 268
2025-03-16 03:34:17.717 -04:00 [INF] CORS policy execution failed.
2025-03-16 03:34:17.718 -04:00 [INF] Request origin https://localhost:44395 does not have permission to access the resource.
2025-03-16 03:34:17.724 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-16 03:34:17.725 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-16 03:34:17.766 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-16 03:34:17.790 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-16 03:34:18.017 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-16 03:34:18.062 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-16 03:34:18.074 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-16 03:34:18.076 -04:00 [INF] User logged in.
2025-03-16 03:34:18.077 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-16 03:34:18.081 -04:00 [INF] Executing LocalRedirectResult, redirecting to /.
2025-03-16 03:34:18.082 -04:00 [INF] Executed page /Account/Login in 357.1038ms
2025-03-16 03:34:18.083 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-16 03:34:18.089 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-16 03:34:18.090 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login - 302 0 null 409.7117ms
2025-03-16 03:34:18.124 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:34:18.125 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-16 03:34:18.145 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:34:18.146 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0459ms.
2025-03-16 03:34:18.147 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-16 03:34:18.155 -04:00 [INF] Executed ViewResult - view Index executed in 8.1541ms.
2025-03-16 03:34:18.155 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 29.7249ms
2025-03-16 03:34:18.156 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:34:18.156 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 67.0222ms
2025-03-16 03:34:18.168 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:34:18.168 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:34:18.169 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 0.8386ms
2025-03-16 03:34:18.184 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.1608ms
2025-03-16 03:34:19.816 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Manage - null null
2025-03-16 03:34:19.854 -04:00 [INF] Executing endpoint '/Account/Manage/Index'
2025-03-16 03:34:19.862 -04:00 [INF] Route matched with {page = "/Account/Manage/Index", area = "Identity", action = "", controller = ""}. Executing page /Account/Manage/Index
2025-03-16 03:34:19.864 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Manage.Internal.IndexModel.OnGetAsync - ModelState is "Valid"
2025-03-16 03:34:19.992 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-16 03:34:19.996 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-16 03:34:20.060 -04:00 [INF] Executed page /Account/Manage/Index in 197.7269ms
2025-03-16 03:34:20.060 -04:00 [INF] Executed endpoint '/Account/Manage/Index'
2025-03-16 03:34:20.061 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Manage - 200 null text/html; charset=utf-8 245.4084ms
2025-03-16 03:34:20.073 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:34:20.073 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:34:20.074 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 1.3446ms
2025-03-16 03:34:20.081 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1417ms
2025-03-16 03:39:18.212 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-16 03:39:18.874 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-16 03:39:18.881 -04:00 [INF] Quartz Scheduler created
2025-03-16 03:39:18.977 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-16 03:39:18.981 -04:00 [INF] RAMJobStore initialized.
2025-03-16 03:39:18.984 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-16 03:39:18.986 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-16 03:39:18.987 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-16 03:39:19.008 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-16 03:39:19.012 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-16 03:39:21.232 -04:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-16 03:39:21.320 -04:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-16 03:39:21.921 -04:00 [INF] Executed DbCommand (76ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:39:22.034 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:39:22.037 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:39:22.038 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:39:22.060 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-16 03:39:23.359 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-16 03:39:23.362 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-16 03:39:23.362 -04:00 [INF] Hosting environment: Development
2025-03-16 03:39:23.363 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-16 03:39:23.374 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-16 03:39:23.919 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-16 03:39:24.686 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:39:24.705 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-16 03:39:24.847 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:39:24.855 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.0673ms.
2025-03-16 03:39:24.892 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-16 03:39:25.149 -04:00 [INF] Executed ViewResult - view Index executed in 276.4923ms.
2025-03-16 03:39:25.152 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 443.9621ms
2025-03-16 03:39:25.153 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:39:25.162 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 1259.125ms
2025-03-16 03:39:25.183 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:39:25.183 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:39:25.199 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 16.4724ms
2025-03-16 03:39:26.789 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:39:26.814 -04:00 [INF] CORS policy execution failed.
2025-03-16 03:39:26.815 -04:00 [INF] Request origin http://localhost:4200 does not have permission to access the resource.
2025-03-16 03:39:26.842 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:39:26.858 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:39:26.862 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:39:26.907 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:39:26.910 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 121.2996ms
2025-03-16 03:39:26.915 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:39:26.919 -04:00 [INF] CORS policy execution failed.
2025-03-16 03:39:26.919 -04:00 [INF] Request origin http://localhost:4200 does not have permission to access the resource.
2025-03-16 03:39:26.924 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:39:26.925 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:39:26.925 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:39:26.926 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:39:26.928 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 12.9394ms
2025-03-16 03:39:26.931 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:39:26.932 -04:00 [INF] CORS policy execution failed.
2025-03-16 03:39:26.932 -04:00 [INF] Request origin http://localhost:4200 does not have permission to access the resource.
2025-03-16 03:39:26.933 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:39:26.934 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:39:26.936 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:39:26.938 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:39:26.939 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 7.563ms
2025-03-16 03:39:27.624 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 2441.1997ms
2025-03-16 03:39:27.866 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:39:27.867 -04:00 [INF] CORS policy execution failed.
2025-03-16 03:39:27.867 -04:00 [INF] Request origin http://localhost:4200 does not have permission to access the resource.
2025-03-16 03:39:27.868 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:39:27.868 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:39:27.869 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:39:27.870 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:39:27.871 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 5.0639ms
2025-03-16 03:39:27.875 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:39:27.875 -04:00 [INF] CORS policy execution failed.
2025-03-16 03:39:27.875 -04:00 [INF] Request origin http://localhost:4200 does not have permission to access the resource.
2025-03-16 03:39:27.876 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:39:27.876 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:39:27.876 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:39:27.877 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:39:27.879 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 4.3423ms
2025-03-16 03:39:27.882 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:39:27.883 -04:00 [INF] CORS policy execution failed.
2025-03-16 03:39:27.883 -04:00 [INF] Request origin http://localhost:4200 does not have permission to access the resource.
2025-03-16 03:39:27.884 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:39:27.884 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:39:27.884 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:39:27.885 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:39:27.887 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 4.9707ms
2025-03-16 03:39:28.386 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:39:28.387 -04:00 [INF] CORS policy execution failed.
2025-03-16 03:39:28.387 -04:00 [INF] Request origin http://localhost:4200 does not have permission to access the resource.
2025-03-16 03:39:28.388 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:39:28.388 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:39:28.389 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:39:28.390 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:39:28.393 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 6.2982ms
2025-03-16 03:39:28.396 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:39:28.397 -04:00 [INF] CORS policy execution failed.
2025-03-16 03:39:28.397 -04:00 [INF] Request origin http://localhost:4200 does not have permission to access the resource.
2025-03-16 03:39:28.398 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:39:28.398 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:39:28.398 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:39:28.399 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:39:28.400 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 3.598ms
2025-03-16 03:39:28.403 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:39:28.403 -04:00 [INF] CORS policy execution failed.
2025-03-16 03:39:28.404 -04:00 [INF] Request origin http://localhost:4200 does not have permission to access the resource.
2025-03-16 03:39:28.404 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:39:28.404 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:39:28.405 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:39:28.405 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:39:28.408 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 5.1125ms
2025-03-16 03:40:32.366 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-16 03:40:32.500 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-16 03:40:32.501 -04:00 [INF] Quartz Scheduler created
2025-03-16 03:40:32.502 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-16 03:40:32.502 -04:00 [INF] RAMJobStore initialized.
2025-03-16 03:40:32.503 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-16 03:40:32.503 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-16 03:40:32.504 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-16 03:40:32.516 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-16 03:40:32.517 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-16 03:40:33.530 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-16 03:40:33.597 -04:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-16 03:40:33.931 -04:00 [INF] Executed DbCommand (56ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:40:34.010 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:40:34.012 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:40:34.014 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:40:34.034 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-16 03:40:34.594 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-16 03:40:34.596 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-16 03:40:34.596 -04:00 [INF] Hosting environment: Development
2025-03-16 03:40:34.597 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-16 03:40:34.601 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-16 03:40:35.357 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-16 03:40:35.771 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:40:35.782 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-16 03:40:35.874 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:40:35.880 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0726ms.
2025-03-16 03:40:35.909 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-16 03:40:36.023 -04:00 [INF] Executed ViewResult - view Index executed in 135.5441ms.
2025-03-16 03:40:36.025 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 242.0926ms
2025-03-16 03:40:36.026 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:40:36.033 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 686.138ms
2025-03-16 03:40:36.044 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:40:36.047 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:40:36.104 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 59.7166ms
2025-03-16 03:40:36.125 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.9206ms
2025-03-16 03:40:37.901 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login - null null
2025-03-16 03:40:37.965 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-16 03:40:38.017 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-16 03:40:38.049 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-16 03:40:38.062 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-16 03:40:38.064 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-16 03:40:38.068 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-16 03:40:38.068 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-16 03:40:38.156 -04:00 [INF] Executed page /Account/Login in 138.7638ms
2025-03-16 03:40:38.157 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-16 03:40:38.158 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login - 200 null text/html; charset=utf-8 257.6109ms
2025-03-16 03:40:38.164 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:40:38.164 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:40:38.165 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 0.8971ms
2025-03-16 03:40:38.188 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.8289ms
2025-03-16 03:40:43.807 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:40:43.814 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:40:43.819 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:40:43.828 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:40:43.831 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:40:43.858 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:40:43.862 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 55.3958ms
2025-03-16 03:40:43.899 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj&state=f397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o&code_challenge=mReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4&code_challenge_method=S256 - null null
2025-03-16 03:40:43.927 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-16 03:40:43.935 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj",
  "state": "f397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o",
  "code_challenge": "mReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4",
  "code_challenge_method": "S256"
}.
2025-03-16 03:40:43.961 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:40:44.003 -04:00 [INF] The authorization request was successfully validated.
2025-03-16 03:40:44.012 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-16 03:40:44.019 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-16 03:40:44.089 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:40:44.100 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 10.8195ms.
2025-03-16 03:40:44.103 -04:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2025-03-16 03:40:44.107 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-03-16 03:40:44.108 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 87.4392ms
2025-03-16 03:40:44.109 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-16 03:40:44.114 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj&state=f397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o&code_challenge=mReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4&code_challenge_method=S256 - 302 0 null 214.6391ms
2025-03-16 03:40:44.114 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj%26state%3Df397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o%26code_challenge%3DmReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4%26code_challenge_method%3DS256 - null null
2025-03-16 03:40:44.140 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-16 03:40:44.141 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-16 03:40:44.144 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-16 03:40:44.145 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-16 03:40:44.145 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-16 03:40:44.146 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-16 03:40:44.146 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-16 03:40:44.158 -04:00 [INF] Executed page /Account/Login in 16.4216ms
2025-03-16 03:40:44.159 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-16 03:40:44.161 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj%26state%3Df397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o%26code_challenge%3DmReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 47.1789ms
2025-03-16 03:40:44.181 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:40:44.182 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 1.139ms
2025-03-16 03:40:44.188 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:40:44.195 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7496ms
2025-03-16 03:40:49.093 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj%26state%3Df397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o%26code_challenge%3DmReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4%26code_challenge_method%3DS256 - application/x-www-form-urlencoded 268
2025-03-16 03:40:49.117 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:40:49.118 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-16 03:40:49.119 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-16 03:40:49.144 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-16 03:40:49.220 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-16 03:40:49.395 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-16 03:40:49.422 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-16 03:40:49.427 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-16 03:40:49.430 -04:00 [INF] User logged in.
2025-03-16 03:40:49.431 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-16 03:40:49.433 -04:00 [INF] Executing LocalRedirectResult, redirecting to /connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj&state=f397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o&code_challenge=mReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4&code_challenge_method=S256.
2025-03-16 03:40:49.434 -04:00 [INF] Executed page /Account/Login in 314.6204ms
2025-03-16 03:40:49.434 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-16 03:40:49.435 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj%26state%3Df397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o%26code_challenge%3DmReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4%26code_challenge_method%3DS256 - 302 0 null 341.1635ms
2025-03-16 03:40:49.438 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj&state=f397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o&code_challenge=mReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4&code_challenge_method=S256 - null null
2025-03-16 03:40:49.461 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-16 03:40:49.462 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj",
  "state": "f397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o",
  "code_challenge": "mReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4",
  "code_challenge_method": "S256"
}.
2025-03-16 03:40:49.466 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:40:49.470 -04:00 [INF] The authorization request was successfully validated.
2025-03-16 03:40:49.477 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-16 03:40:49.477 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-16 03:40:49.500 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:40:49.535 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-16 03:40:49.592 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-16 03:40:49.640 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-16 03:40:49.643 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-16 03:40:49.763 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-16 03:40:49.774 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 273.0779ms.
2025-03-16 03:40:49.778 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-16 03:40:50.080 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-16 03:40:50.222 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-16 03:40:50.239 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "f397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o",
  "iss": "https://localhost:44395/"
}.
2025-03-16 03:40:50.244 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 766.7466ms
2025-03-16 03:40:50.245 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-16 03:40:50.247 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=0502a20f92ca18563d79f5ceff9ab28ac0tWb0RRj&state=f397e63777cca60cf22b7a2ad23f3c2dcdt8VSj0o&code_challenge=mReLq9VaBUgv2nUMnN711fHebr2-PyUd-uXj0PwWqr4&code_challenge_method=S256 - 302 0 null 808.9461ms
2025-03-16 03:40:50.392 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-16 03:40:50.393 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:40:50.394 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-16 03:40:50.401 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "1af6248efbbbfb6b1667775904ef82cf0e380706aa82d44aac71117335abpvL2lHv",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-16 03:40:50.415 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:40:50.466 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-16 03:40:50.627 -04:00 [INF] The token request was successfully validated.
2025-03-16 03:40:50.632 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-16 03:40:50.638 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-16 03:40:50.679 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:40:50.687 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-16 03:40:50.689 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 9.0285ms.
2025-03-16 03:40:50.690 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-16 03:40:50.698 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-16 03:40:50.701 -04:00 [INF] The token '23ee62c7-f64d-4c78-8f84-8565c58c07a1' was successfully marked as redeemed.
2025-03-16 03:40:50.719 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-16 03:40:50.730 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-16 03:40:50.746 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-16 03:40:50.760 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-16 03:40:50.765 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 125.7807ms
2025-03-16 03:40:50.765 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-16 03:40:50.766 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 6413 application/json;charset=UTF-8 373.2883ms
2025-03-16 03:40:50.772 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-16 03:40:50.773 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:40:50.774 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-16 03:40:50.776 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-16 03:40:50.779 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-16 03:40:50.798 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "FA255A93B45563FC9792B6843981A4815340CA63",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "yqnUNTdRkX4ctLiWl82BuJiyrfONcPZa9d_hgYXcTCIM8687may5zdOYzf5QPdAvtATwajHTyKEfe8_OOxIEY5uN_IW58N5wAwZdO782xuxAEvbZytQZSYh5WBp1WJwnCEHYNiHQyTLGrSp57olh9MWg87_Q-bD0to26oUCiXMDaoiC5fOl_Vt83ScWp0P29lzAhsBqFsSLDcIBEWWic_ZqTYmFKHvwcH-TcPby3JJCzyWGxFNweYbXmcna6CkIpc6oW9wSMoZxm-vGFETo0IboXUj-YOSN7Qy6bmbcW-5ol4w1RFWGKnXsLZ5wIlUB5_nOWKTTMVoZzL1hA5C8dzQ",
      "x5t": "-iVak7RVY_yXkraEOYGkgVNAymM",
      "x5c": [
        "MIIC9DCCAdygAwIBAgIIMUairA8a2s4wDQYJKoZIhvcNAQELBQAwMDEuMCwGA1UEAxMlT3BlbklkZGljdCBTZXJ2ZXIgU2lnbmluZyBDZXJ0aWZpY2F0ZTAeFw0yNTAzMTExNDA0MzJaFw0yNzAzMTExNDA0MzJaMDAxLjAsBgNVBAMTJU9wZW5JZGRpY3QgU2VydmVyIFNpZ25pbmcgQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKqdQ1N1GRfhy0uJaXzYG4mLKt841w9lr13+GBhdxMIgzzrzuZrLnN05jN/lA90C+0BPBqMdPIoR97z847EgRjm438hbnw3nADBl07vzbG7EAS9tnK1BlJiHlYGnVYnCcIQdg2IdDJMsatKnnuiWH0xaDzv9D5sPS2jbqhQKJcwNqiILl86X9W3zdJxanQ/b2XMCGwGoWxIsNwgERZaJz9mpNiYUoe/Bwf5Nw9vLckkLPJYbEU3B5hteZydroKQilzqhb3BIyhnGb68YUROjQhuhdSP5g5I3tDLpuZtxb7miXjDVEVYYqdewtnnAiVQHn+c5YpNMxWhnMvWEDkLx3NAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQsFAAOCAQEAsec8Q+RX4movGB1ftIPvRJDhZ1n6ixyjeYVXIWZvx245rlXa2EHPHPBWcNEkm42Crzh35pkh7jJd/EHN2tbMRBt6vTZGVr7fnmwVSU5mwXUaKZYfmnR+D1GzGdl8JAQ3GnqBqPb9nC7sEfc2NPIbPMhM1anD1utDBE2jrf6cYyIqtB2MbrLGSfngp7e+bLihky9XUzig5nxZDgeHSbm30SplVQLMJ2bwuSlF9+z4m0bucWeFS0qUjUt60CBWg/8axMJ+Nd2LrAs3H9EwuQABaeFFTkW/Czs5nzAe2RNSS77WSGVc1kOpLzj5qIqzFuSRUhLEXpZYyQAiAxT8agCTlg=="
      ]
    }
  ]
}.
2025-03-16 03:40:50.799 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1635 application/json;charset=UTF-8 26.8706ms
2025-03-16 03:40:50.829 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-16 03:40:50.830 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:40:50.831 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 1.8136ms
2025-03-16 03:40:50.832 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-16 03:40:50.833 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:40:50.833 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-16 03:40:50.836 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-16 03:40:50.870 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-16 03:40:50.880 -04:00 [INF] The userinfo request was successfully validated.
2025-03-16 03:40:50.897 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-16 03:40:50.901 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-16 03:40:50.932 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:40:50.935 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-16 03:40:50.937 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.3517ms.
2025-03-16 03:40:50.944 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-16 03:40:50.977 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 75.3009ms
2025-03-16 03:40:50.978 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-16 03:40:50.978 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 145.8781ms
2025-03-16 03:42:31.974 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-16 03:42:32.090 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-16 03:42:32.090 -04:00 [INF] Quartz Scheduler created
2025-03-16 03:42:32.113 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-16 03:42:32.113 -04:00 [INF] RAMJobStore initialized.
2025-03-16 03:42:32.114 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-16 03:42:32.114 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-16 03:42:32.115 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-16 03:42:32.121 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-16 03:42:32.122 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-16 03:42:33.055 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-16 03:42:33.118 -04:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-16 03:42:33.448 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:42:33.521 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:42:33.523 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:42:33.525 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:42:33.544 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-16 03:42:34.084 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-16 03:42:34.085 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-16 03:42:34.085 -04:00 [INF] Hosting environment: Development
2025-03-16 03:42:34.085 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-16 03:42:34.087 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-16 03:42:34.509 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-16 03:42:34.817 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:42:34.824 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-16 03:42:34.879 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:42:34.883 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0825ms.
2025-03-16 03:42:34.899 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-16 03:42:34.990 -04:00 [INF] Executed ViewResult - view Index executed in 99.4397ms.
2025-03-16 03:42:34.998 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 167.3137ms
2025-03-16 03:42:34.998 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:42:35.007 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:42:35.008 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 503.0318ms
2025-03-16 03:42:35.016 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:42:35.021 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 14.7593ms
2025-03-16 03:42:35.055 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.0424ms
2025-03-16 03:47:59.345 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-16 03:47:59.509 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-16 03:47:59.509 -04:00 [INF] Quartz Scheduler created
2025-03-16 03:47:59.510 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-16 03:47:59.511 -04:00 [INF] RAMJobStore initialized.
2025-03-16 03:47:59.511 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-16 03:47:59.512 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-16 03:47:59.512 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-16 03:47:59.531 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-16 03:47:59.532 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-16 03:48:00.903 -04:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-16 03:48:01.005 -04:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-16 03:48:01.516 -04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:48:01.652 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:48:01.654 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:48:01.656 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:48:01.682 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-16 03:48:02.475 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-16 03:48:02.476 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-16 03:48:02.477 -04:00 [INF] Hosting environment: Development
2025-03-16 03:48:02.477 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-16 03:48:02.480 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-16 03:48:03.331 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-16 03:48:04.090 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:48:04.108 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-16 03:48:04.249 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:48:04.258 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.2008ms.
2025-03-16 03:48:04.329 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-16 03:48:04.557 -04:00 [INF] Executed ViewResult - view Index executed in 280.539ms.
2025-03-16 03:48:04.561 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 450.3708ms
2025-03-16 03:48:04.563 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:48:04.583 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 1277.2759ms
2025-03-16 03:48:04.588 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:48:04.588 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:48:04.631 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 43.032ms
2025-03-16 03:48:04.676 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 88.424ms
2025-03-16 03:55:24.151 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-16 03:55:24.270 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-16 03:55:24.271 -04:00 [INF] Quartz Scheduler created
2025-03-16 03:55:24.311 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-16 03:55:24.312 -04:00 [INF] RAMJobStore initialized.
2025-03-16 03:55:24.313 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-16 03:55:24.313 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-16 03:55:24.314 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-16 03:55:24.319 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-16 03:55:24.321 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-16 03:55:25.170 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-16 03:55:25.226 -04:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-16 03:55:25.510 -04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:25.548 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:25.652 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 50), @p2='?' (Size = 100), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictApplications] ([Id], [ApplicationType], [ClientId], [ClientSecret], [ClientType], [ConcurrencyToken], [ConsentType], [DisplayName], [DisplayNames], [JsonWebKeySet], [Permissions], [PostLogoutRedirectUris], [Properties], [RedirectUris], [Requirements], [Settings])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-03-16 03:55:25.686 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:25.701 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:25.708 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 50), @p2='?' (Size = 100), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictApplications] ([Id], [ApplicationType], [ClientId], [ClientSecret], [ClientType], [ConcurrencyToken], [ConsentType], [DisplayName], [DisplayNames], [JsonWebKeySet], [Permissions], [PostLogoutRedirectUris], [Properties], [RedirectUris], [Requirements], [Settings])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-03-16 03:55:25.710 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:25.715 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:25.718 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 50), @p2='?' (Size = 100), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictApplications] ([Id], [ApplicationType], [ClientId], [ClientSecret], [ClientType], [ConcurrencyToken], [ConsentType], [DisplayName], [DisplayNames], [JsonWebKeySet], [Permissions], [PostLogoutRedirectUris], [Properties], [RedirectUris], [Requirements], [Settings])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-03-16 03:55:25.720 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:25.726 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:25.729 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 50), @p2='?' (Size = 100), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictApplications] ([Id], [ApplicationType], [ClientId], [ClientSecret], [ClientType], [ConcurrencyToken], [ConsentType], [DisplayName], [DisplayNames], [JsonWebKeySet], [Permissions], [PostLogoutRedirectUris], [Properties], [RedirectUris], [Requirements], [Settings])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-03-16 03:55:25.749 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-16 03:55:26.237 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-16 03:55:26.239 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-16 03:55:26.239 -04:00 [INF] Hosting environment: Development
2025-03-16 03:55:26.240 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-16 03:55:26.241 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-16 03:55:26.865 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-16 03:55:27.217 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:55:27.226 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-16 03:55:27.292 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:55:27.296 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.7894ms.
2025-03-16 03:55:27.310 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-16 03:55:27.394 -04:00 [INF] Executed ViewResult - view Index executed in 92.572ms.
2025-03-16 03:55:27.396 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 168.7754ms
2025-03-16 03:55:27.396 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-16 03:55:27.402 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 544.2111ms
2025-03-16 03:55:27.412 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:55:27.419 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:55:27.420 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 8.7885ms
2025-03-16 03:55:27.449 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.1729ms
2025-03-16 03:55:56.141 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-16 03:55:56.163 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:55:56.177 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-16 03:55:56.182 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-16 03:55:56.184 -04:00 [INF] The configuration request was successfully validated.
2025-03-16 03:55:56.210 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-16 03:55:56.217 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 75.4538ms
2025-03-16 03:55:56.239 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=cfb6fbbf93b1551aca65995944e48a3f665wx10LD&state=5ecbfad1451ed114687e291da0da84366dpT9nUCW&code_challenge=zvHDPQI2BjToJ3g9itzptXi6Tmquld1GqxlNSX5izRg&code_challenge_method=S256 - null null
2025-03-16 03:55:56.281 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-16 03:55:56.293 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "cfb6fbbf93b1551aca65995944e48a3f665wx10LD",
  "state": "5ecbfad1451ed114687e291da0da84366dpT9nUCW",
  "code_challenge": "zvHDPQI2BjToJ3g9itzptXi6Tmquld1GqxlNSX5izRg",
  "code_challenge_method": "S256"
}.
2025-03-16 03:55:56.425 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:56.482 -04:00 [INF] The authorization request was successfully validated.
2025-03-16 03:55:56.491 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-16 03:55:56.503 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-16 03:55:56.563 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:55:56.629 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-16 03:55:56.737 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=093209892b6515a99a4b059788ed7795c4eHzoFAt&state=5ecbfad1451ed114687e291da0da84366dpT9nUCW&code_challenge=LkkE-pwkwqbn24xjZgWI4V9WQ5SAptRIKLCcYXEl21k&code_challenge_method=S256 - null null
2025-03-16 03:55:56.785 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-16 03:55:56.786 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "093209892b6515a99a4b059788ed7795c4eHzoFAt",
  "state": "5ecbfad1451ed114687e291da0da84366dpT9nUCW",
  "code_challenge": "LkkE-pwkwqbn24xjZgWI4V9WQ5SAptRIKLCcYXEl21k",
  "code_challenge_method": "S256"
}.
2025-03-16 03:55:56.874 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-16 03:55:56.895 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 331.3041ms.
2025-03-16 03:55:56.895 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:56.901 -04:00 [INF] The authorization request was successfully validated.
2025-03-16 03:55:56.903 -04:00 [INF] Executing ViewResult, running view Authorize.
2025-03-16 03:55:56.922 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-16 03:55:56.923 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-16 03:55:56.982 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:55:56.982 -04:00 [INF] Executed ViewResult - view Authorize executed in 83.7495ms.
2025-03-16 03:55:56.985 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 480.4999ms
2025-03-16 03:55:56.986 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-16 03:55:56.988 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-16 03:55:56.991 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=cfb6fbbf93b1551aca65995944e48a3f665wx10LD&state=5ecbfad1451ed114687e291da0da84366dpT9nUCW&code_challenge=zvHDPQI2BjToJ3g9itzptXi6Tmquld1GqxlNSX5izRg&code_challenge_method=S256 - 200 null text/html; charset=utf-8 752.2261ms
2025-03-16 03:55:56.996 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-16 03:55:56.998 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 15.6726ms.
2025-03-16 03:55:56.999 -04:00 [INF] Executing ViewResult, running view Authorize.
2025-03-16 03:55:57.010 -04:00 [INF] Executed ViewResult - view Authorize executed in 11.9084ms.
2025-03-16 03:55:57.015 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 91.4376ms
2025-03-16 03:55:57.016 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-16 03:55:57.016 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=093209892b6515a99a4b059788ed7795c4eHzoFAt&state=5ecbfad1451ed114687e291da0da84366dpT9nUCW&code_challenge=LkkE-pwkwqbn24xjZgWI4V9WQ5SAptRIKLCcYXEl21k&code_challenge_method=S256 - 200 null text/html; charset=utf-8 280.0656ms
2025-03-16 03:55:57.031 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/css/site.css - null null
2025-03-16 03:55:57.031 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - null null
2025-03-16 03:55:57.031 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - null null
2025-03-16 03:55:57.031 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - null null
2025-03-16 03:55:57.077 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - null null
2025-03-16 03:55:57.079 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
2025-03-16 03:55:57.135 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-16 03:55:57.136 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16516 application/javascript; charset=utf-8 1.1798ms
2025-03-16 03:55:57.143 -04:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\js\site.js'
2025-03-16 03:55:57.143 -04:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\css\site.css'
2025-03-16 03:55:57.143 -04:00 [INF] Sending file. Request path: '/OpeniddictServer.styles.css'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\obj\Debug\net9.0\scopedcss\bundle\OpeniddictServer.styles.css'
2025-03-16 03:55:57.145 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - 200 231 text/javascript 67.5984ms
2025-03-16 03:55:57.145 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/css/site.css - 200 667 text/css 114.1797ms
2025-03-16 03:55:57.145 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - 200 1134 text/css 114.481ms
2025-03-16 03:55:57.149 -04:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js'
2025-03-16 03:55:57.149 -04:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\jquery\dist\jquery.min.js'
2025-03-16 03:55:57.151 -04:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\bootstrap\dist\css\bootstrap.min.css'
2025-03-16 03:55:57.152 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 200 80721 text/javascript 72.7523ms
2025-03-16 03:55:57.152 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - 200 87533 text/javascript 121.1238ms
2025-03-16 03:55:57.152 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - 200 232803 text/css 121.6229ms
2025-03-16 03:55:57.337 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-16 03:55:57.352 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.4545ms
2025-03-16 03:55:57.425 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - null null
2025-03-16 03:55:57.430 -04:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js.map'
2025-03-16 03:55:57.430 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - 200 332090 text/plain 5.2607ms
2025-03-16 03:55:57.471 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css.map - null null
2025-03-16 03:55:57.478 -04:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\bootstrap\dist\css\bootstrap.min.css.map'
2025-03-16 03:55:57.479 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css.map - 200 589892 text/plain 7.1394ms
2025-03-16 03:55:59.763 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/authorize - application/x-www-form-urlencoded 570
2025-03-16 03:55:59.813 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:55:59.814 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-16 03:55:59.815 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "093209892b6515a99a4b059788ed7795c4eHzoFAt",
  "state": "5ecbfad1451ed114687e291da0da84366dpT9nUCW",
  "code_challenge": "LkkE-pwkwqbn24xjZgWI4V9WQ5SAptRIKLCcYXEl21k",
  "code_challenge_method": "S256",
  "submit.Accept": "Yes",
  "__RequestVerificationToken": "CfDJ8JaWFYA-jUJKpFtekQbaWlpnwiAXuWFLAUbdsA8epl09UMWUkIR9fmu1a6-KH5eNw_Zhv-bw7_yLw2ZRM3pyaNYiBRvylV-RgqJIXaLU0CJ_6E8YpOq6Jt-eBb0LFhokBem1BdujMaisrgFvAD_inmJH_7c4_FcggOSgkgFjMgfhEhcaFl4rQASPf7ik9JYtjQ"
}.
2025-03-16 03:55:59.823 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:55:59.835 -04:00 [INF] The authorization request was successfully validated.
2025-03-16 03:55:59.843 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Accept (OpeniddictServer)'
2025-03-16 03:55:59.847 -04:00 [INF] Route matched with {action = "Accept", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Accept() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-16 03:55:59.883 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Accept (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:55:59.888 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-16 03:55:59.896 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-16 03:55:59.927 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-16 03:55:59.952 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-16 03:56:00.057 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-16 03:56:00.174 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 50), @p7='?' (Size = 400), @p8='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictAuthorizations] ([Id], [ApplicationId], [ConcurrencyToken], [CreationDate], [Properties], [Scopes], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-03-16 03:56:00.193 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Accept (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 310.2182ms.
2025-03-16 03:56:00.195 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-16 03:56:00.367 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-16 03:56:00.617 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-16 03:56:00.641 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "5ecbfad1451ed114687e291da0da84366dpT9nUCW",
  "iss": "https://localhost:44395/"
}.
2025-03-16 03:56:00.650 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Accept (OpeniddictServer) in 801.8105ms
2025-03-16 03:56:00.651 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Accept (OpeniddictServer)'
2025-03-16 03:56:00.652 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/authorize - 302 0 null 888.3147ms
2025-03-16 03:56:00.950 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-16 03:56:00.957 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:56:00.960 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-16 03:56:00.969 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "077b2289c78c12cd5f41bc9293d98655f0b8910aaa89eef43da0c73bae86nVZSoX6",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-16 03:56:01.004 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-16 03:56:01.054 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-16 03:56:01.190 -04:00 [INF] The token request was successfully validated.
2025-03-16 03:56:01.195 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-16 03:56:01.198 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-16 03:56:01.233 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:56:01.242 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-16 03:56:01.244 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 10.8688ms.
2025-03-16 03:56:01.245 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-16 03:56:01.256 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-16 03:56:01.258 -04:00 [INF] The token '3471f0ff-d62a-4843-abcc-86ba728781fb' was successfully marked as redeemed.
2025-03-16 03:56:01.278 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-16 03:56:01.292 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-16 03:56:01.311 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-16 03:56:01.324 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3600,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-16 03:56:01.328 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 129.2756ms
2025-03-16 03:56:01.329 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-16 03:56:01.329 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 6413 application/json;charset=UTF-8 378.8597ms
2025-03-16 03:56:01.338 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-16 03:56:01.338 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:56:01.339 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-16 03:56:01.341 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-16 03:56:01.343 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-16 03:56:01.356 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "FA255A93B45563FC9792B6843981A4815340CA63",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "yqnUNTdRkX4ctLiWl82BuJiyrfONcPZa9d_hgYXcTCIM8687may5zdOYzf5QPdAvtATwajHTyKEfe8_OOxIEY5uN_IW58N5wAwZdO782xuxAEvbZytQZSYh5WBp1WJwnCEHYNiHQyTLGrSp57olh9MWg87_Q-bD0to26oUCiXMDaoiC5fOl_Vt83ScWp0P29lzAhsBqFsSLDcIBEWWic_ZqTYmFKHvwcH-TcPby3JJCzyWGxFNweYbXmcna6CkIpc6oW9wSMoZxm-vGFETo0IboXUj-YOSN7Qy6bmbcW-5ol4w1RFWGKnXsLZ5wIlUB5_nOWKTTMVoZzL1hA5C8dzQ",
      "x5t": "-iVak7RVY_yXkraEOYGkgVNAymM",
      "x5c": [
        "MIIC9DCCAdygAwIBAgIIMUairA8a2s4wDQYJKoZIhvcNAQELBQAwMDEuMCwGA1UEAxMlT3BlbklkZGljdCBTZXJ2ZXIgU2lnbmluZyBDZXJ0aWZpY2F0ZTAeFw0yNTAzMTExNDA0MzJaFw0yNzAzMTExNDA0MzJaMDAxLjAsBgNVBAMTJU9wZW5JZGRpY3QgU2VydmVyIFNpZ25pbmcgQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKqdQ1N1GRfhy0uJaXzYG4mLKt841w9lr13+GBhdxMIgzzrzuZrLnN05jN/lA90C+0BPBqMdPIoR97z847EgRjm438hbnw3nADBl07vzbG7EAS9tnK1BlJiHlYGnVYnCcIQdg2IdDJMsatKnnuiWH0xaDzv9D5sPS2jbqhQKJcwNqiILl86X9W3zdJxanQ/b2XMCGwGoWxIsNwgERZaJz9mpNiYUoe/Bwf5Nw9vLckkLPJYbEU3B5hteZydroKQilzqhb3BIyhnGb68YUROjQhuhdSP5g5I3tDLpuZtxb7miXjDVEVYYqdewtnnAiVQHn+c5YpNMxWhnMvWEDkLx3NAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQsFAAOCAQEAsec8Q+RX4movGB1ftIPvRJDhZ1n6ixyjeYVXIWZvx245rlXa2EHPHPBWcNEkm42Crzh35pkh7jJd/EHN2tbMRBt6vTZGVr7fnmwVSU5mwXUaKZYfmnR+D1GzGdl8JAQ3GnqBqPb9nC7sEfc2NPIbPMhM1anD1utDBE2jrf6cYyIqtB2MbrLGSfngp7e+bLihky9XUzig5nxZDgeHSbm30SplVQLMJ2bwuSlF9+z4m0bucWeFS0qUjUt60CBWg/8axMJ+Nd2LrAs3H9EwuQABaeFFTkW/Czs5nzAe2RNSS77WSGVc1kOpLzj5qIqzFuSRUhLEXpZYyQAiAxT8agCTlg=="
      ]
    }
  ]
}.
2025-03-16 03:56:01.358 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1635 application/json;charset=UTF-8 20.2986ms
2025-03-16 03:56:01.381 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-16 03:56:01.382 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:56:01.384 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 2.8433ms
2025-03-16 03:56:01.386 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-16 03:56:01.386 -04:00 [INF] CORS policy execution successful.
2025-03-16 03:56:01.387 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-16 03:56:01.391 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-16 03:56:01.427 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-16 03:56:01.435 -04:00 [INF] The userinfo request was successfully validated.
2025-03-16 03:56:01.446 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-16 03:56:01.449 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-16 03:56:01.487 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-16 03:56:01.492 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-16 03:56:01.494 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7.2744ms.
2025-03-16 03:56:01.501 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-16 03:56:01.554 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 103.9385ms
2025-03-16 03:56:01.554 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-16 03:56:01.555 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 169.0874ms
2025-03-16 04:03:24.442 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-16 04:03:24.473 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 01:38:12.328 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 01:38:12.668 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 01:38:12.668 -04:00 [INF] Quartz Scheduler created
2025-03-17 01:38:12.669 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 01:38:12.670 -04:00 [INF] RAMJobStore initialized.
2025-03-17 01:38:12.670 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 01:38:12.671 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 01:38:12.671 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 01:38:12.694 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 01:38:12.699 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:05:58.575 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:05:58.714 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:05:58.714 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:05:58.715 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:05:58.715 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:05:58.716 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:05:58.716 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:05:58.716 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:05:58.731 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:05:58.732 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:05:59.694 -04:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:05:59.812 -04:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:06:00.192 -04:00 [INF] Executed DbCommand (82ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:06:00.271 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:06:00.273 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:06:00.275 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:06:00.296 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:06:00.858 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:06:00.859 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:06:00.860 -04:00 [INF] Hosting environment: Development
2025-03-17 02:06:00.860 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:06:00.863 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:06:01.441 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:06:01.779 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:06:01.788 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:06:01.850 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:06:01.854 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.9007ms.
2025-03-17 02:06:01.872 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:06:01.975 -04:00 [INF] Executed ViewResult - view Index executed in 114.7518ms.
2025-03-17 02:06:01.977 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 187.2443ms
2025-03-17 02:06:01.977 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:06:01.984 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 549.0628ms
2025-03-17 02:06:01.992 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:06:01.992 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
2025-03-17 02:06:01.992 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/css/site.css - null null
2025-03-17 02:06:01.992 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - null null
2025-03-17 02:06:01.992 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - null null
2025-03-17 02:06:02.002 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - null null
2025-03-17 02:06:02.032 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - null null
2025-03-17 02:06:02.038 -04:00 [INF] The file /js/site.js was not modified
2025-03-17 02:06:02.038 -04:00 [INF] The file /OpeniddictServer.styles.css was not modified
2025-03-17 02:06:02.038 -04:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2025-03-17 02:06:02.038 -04:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2025-03-17 02:06:02.038 -04:00 [INF] The file /css/site.css was not modified
2025-03-17 02:06:02.038 -04:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2025-03-17 02:06:02.039 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - 304 null text/javascript 7.7342ms
2025-03-17 02:06:02.039 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 304 null text/javascript 47.7818ms
2025-03-17 02:06:02.039 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/css/site.css - 304 null text/css 47.8156ms
2025-03-17 02:06:02.039 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - 304 null text/javascript 47.8184ms
2025-03-17 02:06:02.039 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - 304 null text/css 47.8156ms
2025-03-17 02:06:02.039 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - 304 null text/css 43.5482ms
2025-03-17 02:06:02.040 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:06:02.043 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 51.122ms
2025-03-17 02:06:02.110 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.7333ms
2025-03-17 02:06:05.629 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 02:06:05.648 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:06:05.669 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 02:06:05.678 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 02:06:05.681 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 02:06:05.707 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 02:06:05.711 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 81.4915ms
2025-03-17 02:06:05.724 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=eea5ccdcfe1304b8de15327b7efaea860cXLjVgLG&state=57c8d4277b19fa1adb5498face40d25cffSy0q2EU&code_challenge=D9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10&code_challenge_method=S256 - null null
2025-03-17 02:06:05.764 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 02:06:05.773 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "eea5ccdcfe1304b8de15327b7efaea860cXLjVgLG",
  "state": "57c8d4277b19fa1adb5498face40d25cffSy0q2EU",
  "code_challenge": "D9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10",
  "code_challenge_method": "S256"
}.
2025-03-17 02:06:05.800 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:06:05.830 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 02:06:05.836 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:06:05.840 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:06:05.941 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:06:05.955 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 13.2004ms.
2025-03-17 02:06:05.957 -04:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2025-03-17 02:06:05.961 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-03-17 02:06:05.961 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 120.5689ms
2025-03-17 02:06:05.962 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:06:05.965 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=eea5ccdcfe1304b8de15327b7efaea860cXLjVgLG&state=57c8d4277b19fa1adb5498face40d25cffSy0q2EU&code_challenge=D9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10&code_challenge_method=S256 - 302 0 null 241.4849ms
2025-03-17 02:06:05.965 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Deea5ccdcfe1304b8de15327b7efaea860cXLjVgLG%26state%3D57c8d4277b19fa1adb5498face40d25cffSy0q2EU%26code_challenge%3DD9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10%26code_challenge_method%3DS256 - null null
2025-03-17 02:06:06.005 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:06:06.032 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:06:06.058 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 02:06:06.063 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 02:06:06.065 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 02:06:06.068 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 02:06:06.068 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 02:06:06.130 -04:00 [INF] Executed page /Account/Login in 96.6231ms
2025-03-17 02:06:06.131 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:06:06.131 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Deea5ccdcfe1304b8de15327b7efaea860cXLjVgLG%26state%3D57c8d4277b19fa1adb5498face40d25cffSy0q2EU%26code_challenge%3DD9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 165.6844ms
2025-03-17 02:06:06.156 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:06:06.158 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery-validation/dist/jquery.validate.min.js - null null
2025-03-17 02:06:06.158 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 2.0898ms
2025-03-17 02:06:06.158 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js - null null
2025-03-17 02:06:06.163 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:06:06.170 -04:00 [INF] Sending file. Request path: '/lib/jquery-validation/dist/jquery.validate.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\jquery-validation\dist\jquery.validate.min.js'
2025-03-17 02:06:06.171 -04:00 [INF] Sending file. Request path: '/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\jquery-validation-unobtrusive\dist\jquery.validate.unobtrusive.min.js'
2025-03-17 02:06:06.171 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery-validation/dist/jquery.validate.min.js - 200 25308 text/javascript 12.8874ms
2025-03-17 02:06:06.172 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.8778ms
2025-03-17 02:06:06.172 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js - 200 5824 text/javascript 14.0614ms
2025-03-17 02:06:10.685 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Deea5ccdcfe1304b8de15327b7efaea860cXLjVgLG%26state%3D57c8d4277b19fa1adb5498face40d25cffSy0q2EU%26code_challenge%3DD9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10%26code_challenge_method%3DS256 - application/x-www-form-urlencoded 268
2025-03-17 02:06:10.716 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:06:10.717 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:06:10.717 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:06:10.744 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-17 02:06:10.820 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-17 02:06:11.029 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 02:06:11.070 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 02:06:11.079 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-17 02:06:11.081 -04:00 [INF] User logged in.
2025-03-17 02:06:11.082 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 02:06:11.085 -04:00 [INF] Executing LocalRedirectResult, redirecting to /connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=eea5ccdcfe1304b8de15327b7efaea860cXLjVgLG&state=57c8d4277b19fa1adb5498face40d25cffSy0q2EU&code_challenge=D9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10&code_challenge_method=S256.
2025-03-17 02:06:11.087 -04:00 [INF] Executed page /Account/Login in 369.0842ms
2025-03-17 02:06:11.087 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:06:11.088 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Deea5ccdcfe1304b8de15327b7efaea860cXLjVgLG%26state%3D57c8d4277b19fa1adb5498face40d25cffSy0q2EU%26code_challenge%3DD9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10%26code_challenge_method%3DS256 - 302 0 null 403.0247ms
2025-03-17 02:06:11.091 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=eea5ccdcfe1304b8de15327b7efaea860cXLjVgLG&state=57c8d4277b19fa1adb5498face40d25cffSy0q2EU&code_challenge=D9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10&code_challenge_method=S256 - null null
2025-03-17 02:06:11.115 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 02:06:11.115 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "eea5ccdcfe1304b8de15327b7efaea860cXLjVgLG",
  "state": "57c8d4277b19fa1adb5498face40d25cffSy0q2EU",
  "code_challenge": "D9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10",
  "code_challenge_method": "S256"
}.
2025-03-17 02:06:11.121 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:06:11.125 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 02:06:11.133 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:06:11.133 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:06:11.163 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:06:11.194 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:06:11.253 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-17 02:06:11.292 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 02:06:11.294 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 02:06:11.381 -04:00 [INF] Executed DbCommand (31ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 02:06:11.390 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 226.9932ms.
2025-03-17 02:06:11.392 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 02:06:11.644 -04:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:06:11.839 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 02:06:11.861 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "57c8d4277b19fa1adb5498face40d25cffSy0q2EU",
  "iss": "https://localhost:44395/"
}.
2025-03-17 02:06:11.866 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 732.4176ms
2025-03-17 02:06:11.866 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:06:11.867 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=eea5ccdcfe1304b8de15327b7efaea860cXLjVgLG&state=57c8d4277b19fa1adb5498face40d25cffSy0q2EU&code_challenge=D9sT9LFxvUHVGjrFUkxjI-OaWrEC8Oii9T1wBkq6n10&code_challenge_method=S256 - 302 0 null 775.744ms
2025-03-17 02:06:12.023 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-17 02:06:12.025 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:06:12.026 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 02:06:12.032 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "777463c35bd5a8d06484920f57578e5f51fa8c07b8d9ea4a36600fe16f1eEFHPoBu",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-17 02:06:12.050 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:06:12.093 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-17 02:06:12.259 -04:00 [INF] The token request was successfully validated.
2025-03-17 02:06:12.265 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 02:06:12.271 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:06:12.302 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:06:12.310 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:06:12.311 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 9.3761ms.
2025-03-17 02:06:12.312 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 02:06:12.319 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 02:06:12.322 -04:00 [INF] The token '56413282-6a27-42a7-81b1-3aeda88c4789' was successfully marked as redeemed.
2025-03-17 02:06:12.338 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:06:12.348 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:06:12.363 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:06:12.372 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3600,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-17 02:06:12.375 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 103.2775ms
2025-03-17 02:06:12.375 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 02:06:12.376 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 6413 application/json;charset=UTF-8 352.6596ms
2025-03-17 02:06:12.382 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 02:06:12.383 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:06:12.383 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 02:06:12.387 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 02:06:12.389 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 02:06:12.404 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "FA255A93B45563FC9792B6843981A4815340CA63",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "yqnUNTdRkX4ctLiWl82BuJiyrfONcPZa9d_hgYXcTCIM8687may5zdOYzf5QPdAvtATwajHTyKEfe8_OOxIEY5uN_IW58N5wAwZdO782xuxAEvbZytQZSYh5WBp1WJwnCEHYNiHQyTLGrSp57olh9MWg87_Q-bD0to26oUCiXMDaoiC5fOl_Vt83ScWp0P29lzAhsBqFsSLDcIBEWWic_ZqTYmFKHvwcH-TcPby3JJCzyWGxFNweYbXmcna6CkIpc6oW9wSMoZxm-vGFETo0IboXUj-YOSN7Qy6bmbcW-5ol4w1RFWGKnXsLZ5wIlUB5_nOWKTTMVoZzL1hA5C8dzQ",
      "x5t": "-iVak7RVY_yXkraEOYGkgVNAymM",
      "x5c": [
        "MIIC9DCCAdygAwIBAgIIMUairA8a2s4wDQYJKoZIhvcNAQELBQAwMDEuMCwGA1UEAxMlT3BlbklkZGljdCBTZXJ2ZXIgU2lnbmluZyBDZXJ0aWZpY2F0ZTAeFw0yNTAzMTExNDA0MzJaFw0yNzAzMTExNDA0MzJaMDAxLjAsBgNVBAMTJU9wZW5JZGRpY3QgU2VydmVyIFNpZ25pbmcgQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKqdQ1N1GRfhy0uJaXzYG4mLKt841w9lr13+GBhdxMIgzzrzuZrLnN05jN/lA90C+0BPBqMdPIoR97z847EgRjm438hbnw3nADBl07vzbG7EAS9tnK1BlJiHlYGnVYnCcIQdg2IdDJMsatKnnuiWH0xaDzv9D5sPS2jbqhQKJcwNqiILl86X9W3zdJxanQ/b2XMCGwGoWxIsNwgERZaJz9mpNiYUoe/Bwf5Nw9vLckkLPJYbEU3B5hteZydroKQilzqhb3BIyhnGb68YUROjQhuhdSP5g5I3tDLpuZtxb7miXjDVEVYYqdewtnnAiVQHn+c5YpNMxWhnMvWEDkLx3NAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQsFAAOCAQEAsec8Q+RX4movGB1ftIPvRJDhZ1n6ixyjeYVXIWZvx245rlXa2EHPHPBWcNEkm42Crzh35pkh7jJd/EHN2tbMRBt6vTZGVr7fnmwVSU5mwXUaKZYfmnR+D1GzGdl8JAQ3GnqBqPb9nC7sEfc2NPIbPMhM1anD1utDBE2jrf6cYyIqtB2MbrLGSfngp7e+bLihky9XUzig5nxZDgeHSbm30SplVQLMJ2bwuSlF9+z4m0bucWeFS0qUjUt60CBWg/8axMJ+Nd2LrAs3H9EwuQABaeFFTkW/Czs5nzAe2RNSS77WSGVc1kOpLzj5qIqzFuSRUhLEXpZYyQAiAxT8agCTlg=="
      ]
    }
  ]
}.
2025-03-17 02:06:12.405 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1635 application/json;charset=UTF-8 22.9352ms
2025-03-17 02:06:12.441 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-17 02:06:12.442 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:06:12.443 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 1.8679ms
2025-03-17 02:06:12.450 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-17 02:06:12.451 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:06:12.451 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-17 02:06:12.455 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-17 02:06:12.484 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 02:06:12.489 -04:00 [INF] The userinfo request was successfully validated.
2025-03-17 02:06:12.503 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 02:06:12.508 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-17 02:06:12.537 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:06:12.541 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:06:12.544 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.3388ms.
2025-03-17 02:06:12.550 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-17 02:06:12.585 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 77.2732ms
2025-03-17 02:06:12.586 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 02:06:12.586 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 136.5893ms
2025-03-17 02:07:58.810 -04:00 [INF] Executed DbCommand (35ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 02:07:58.839 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 02:19:30.584 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:19:30.698 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:19:30.698 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:19:30.703 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:19:30.703 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:19:30.704 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:19:30.704 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:19:30.704 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:19:30.710 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:19:30.712 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:19:31.590 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:19:31.663 -04:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:19:31.972 -04:00 [INF] Executed DbCommand (33ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:19:32.056 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:19:32.058 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:19:32.059 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:19:32.075 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:19:32.545 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:19:32.547 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:19:32.547 -04:00 [INF] Hosting environment: Development
2025-03-17 02:19:32.547 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:19:32.549 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:19:33.064 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:19:33.324 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one encryption key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddEncryptionCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentEncryptionCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralEncryptionKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 02:19:33.369 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 312.2314ms
2025-03-17 02:19:33.378 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:19:33.378 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:19:33.383 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 4.4154ms
2025-03-17 02:19:33.419 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.6419ms
2025-03-17 02:20:30.947 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 02:20:30.971 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 02:21:13.920 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:21:14.034 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:21:14.061 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:21:14.062 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:21:14.062 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:21:14.063 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:21:14.063 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:21:14.064 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:21:14.074 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:21:14.076 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:21:14.856 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:21:14.906 -04:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:21:15.155 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:21:15.222 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:21:15.224 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:21:15.226 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:21:15.245 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:21:15.796 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:21:15.797 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:21:15.797 -04:00 [INF] Hosting environment: Development
2025-03-17 02:21:15.797 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:21:15.800 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:21:16.559 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:21:16.824 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one asymmetric signing key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddSigningCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentSigningCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralSigningKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 02:21:16.872 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 318.951ms
2025-03-17 02:21:16.881 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:21:16.881 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:21:16.899 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 17.6824ms
2025-03-17 02:21:16.913 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.3878ms
2025-03-17 02:27:14.358 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 02:27:14.394 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 02:27:21.949 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:27:22.078 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:27:22.079 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:27:22.083 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:27:22.084 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:27:22.084 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:27:22.085 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:27:22.085 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:27:22.091 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:27:22.093 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:27:22.967 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:27:23.027 -04:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:27:23.269 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:27:23.334 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:27:23.336 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:27:23.337 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:27:23.365 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:27:23.828 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:27:23.829 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:27:23.830 -04:00 [INF] Hosting environment: Development
2025-03-17 02:27:23.830 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:27:23.832 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:27:24.171 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:27:24.421 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one encryption key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddEncryptionCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentEncryptionCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralEncryptionKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 02:27:24.470 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 304.6142ms
2025-03-17 02:27:24.482 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:27:24.482 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:27:24.558 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 6.6641ms
2025-03-17 02:27:24.580 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 97.2451ms
2025-03-17 02:31:17.987 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:31:18.109 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:31:18.109 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:31:18.116 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:31:18.116 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:31:18.117 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:31:18.117 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:31:18.118 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:31:18.124 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:31:18.125 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:31:18.999 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:31:19.070 -04:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:31:19.397 -04:00 [INF] Executed DbCommand (32ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:31:19.496 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:31:19.498 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:31:19.500 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:31:19.518 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:31:20.143 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:31:20.144 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:31:20.144 -04:00 [INF] Hosting environment: Development
2025-03-17 02:31:20.145 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:31:20.148 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:31:20.989 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:31:21.343 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one asymmetric signing key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddSigningCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentSigningCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralSigningKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 02:31:21.414 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 433.5476ms
2025-03-17 02:31:21.424 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:31:21.424 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:31:21.432 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 8.6306ms
2025-03-17 02:31:21.476 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.6095ms
2025-03-17 02:32:45.317 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:32:45.422 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:32:45.460 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:32:45.461 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:32:45.461 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:32:45.462 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:32:45.462 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:32:45.462 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:32:45.469 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:32:45.471 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:32:46.276 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:32:46.328 -04:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:32:46.648 -04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:32:46.731 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:32:46.733 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:32:46.735 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:32:46.750 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:32:47.274 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:32:47.275 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:32:47.276 -04:00 [INF] Hosting environment: Development
2025-03-17 02:32:47.276 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:32:47.278 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:32:47.830 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:32:48.145 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:32:48.153 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:32:48.223 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:32:48.227 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.9987ms.
2025-03-17 02:32:48.244 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:32:48.354 -04:00 [INF] Executed ViewResult - view Index executed in 119.1499ms.
2025-03-17 02:32:48.357 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 202.5004ms
2025-03-17 02:32:48.357 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:32:48.364 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 537.6579ms
2025-03-17 02:32:48.372 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:32:48.378 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:32:48.382 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 10.1314ms
2025-03-17 02:32:48.412 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.1829ms
2025-03-17 02:32:50.581 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Manage - null null
2025-03-17 02:32:50.653 -04:00 [INF] Executing endpoint '/Account/Manage/Index'
2025-03-17 02:32:50.693 -04:00 [INF] Route matched with {page = "/Account/Manage/Index", area = "Identity", action = "", controller = ""}. Executing page /Account/Manage/Index
2025-03-17 02:32:50.717 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Manage.Internal.IndexModel.OnGetAsync - ModelState is "Valid"
2025-03-17 02:32:50.827 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:32:50.884 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 02:32:51.035 -04:00 [INF] Executed page /Account/Manage/Index in 341.0428ms
2025-03-17 02:32:51.036 -04:00 [INF] Executed endpoint '/Account/Manage/Index'
2025-03-17 02:32:51.042 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Manage - 200 null text/html; charset=utf-8 461.9601ms
2025-03-17 02:32:51.046 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:32:51.047 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:32:51.049 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 3.1486ms
2025-03-17 02:32:51.093 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.6927ms
2025-03-17 02:32:52.757 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Logout?returnUrl=%2F - application/x-www-form-urlencoded 225
2025-03-17 02:32:52.830 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:32:52.853 -04:00 [INF] Executing endpoint '/Account/Logout'
2025-03-17 02:32:52.858 -04:00 [INF] Route matched with {page = "/Account/Logout", area = "Identity", action = "", controller = ""}. Executing page /Account/Logout
2025-03-17 02:32:52.880 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V5.Pages.Account.Internal.LogoutModel.OnPost - ModelState is "Valid"
2025-03-17 02:32:52.887 -04:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-03-17 02:32:52.888 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 02:32:52.889 -04:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-03-17 02:32:52.890 -04:00 [INF] User logged out.
2025-03-17 02:32:52.890 -04:00 [INF] Executed handler method OnPost, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 02:32:52.892 -04:00 [INF] Executing LocalRedirectResult, redirecting to /.
2025-03-17 02:32:52.893 -04:00 [INF] Executed page /Account/Logout in 34.1135ms
2025-03-17 02:32:52.893 -04:00 [INF] Executed endpoint '/Account/Logout'
2025-03-17 02:32:52.894 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Logout?returnUrl=%2F - 302 0 null 136.6526ms
2025-03-17 02:32:52.897 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:32:52.925 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:32:52.925 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:32:52.945 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:32:52.945 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.054ms.
2025-03-17 02:32:52.946 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:32:52.950 -04:00 [INF] Executed ViewResult - view Index executed in 4.2154ms.
2025-03-17 02:32:52.950 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 24.7831ms
2025-03-17 02:32:52.951 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:32:52.951 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 54.5462ms
2025-03-17 02:32:52.966 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:32:52.966 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:32:52.967 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 1.2006ms
2025-03-17 02:32:52.974 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.3471ms
2025-03-17 02:32:54.530 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Register - null null
2025-03-17 02:32:54.557 -04:00 [INF] Executing endpoint '/Account/Register'
2025-03-17 02:32:54.566 -04:00 [INF] Route matched with {page = "/Account/Register", area = "Identity", action = "", controller = ""}. Executing page /Account/Register
2025-03-17 02:32:54.568 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V5.Pages.Account.Internal.RegisterModel.OnGetAsync - ModelState is "Valid"
2025-03-17 02:32:54.571 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 02:32:54.574 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 02:32:54.574 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 02:32:54.609 -04:00 [INF] Executed page /Account/Register in 42.017ms
2025-03-17 02:32:54.609 -04:00 [INF] Executed endpoint '/Account/Register'
2025-03-17 02:32:54.610 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Register - 200 null text/html; charset=utf-8 79.7327ms
2025-03-17 02:32:54.619 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:32:54.620 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:32:54.620 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 0.5601ms
2025-03-17 02:32:54.632 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.9568ms
2025-03-17 02:32:55.131 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login - null null
2025-03-17 02:32:55.160 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:32:55.167 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:32:55.170 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 02:32:55.171 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 02:32:55.172 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 02:32:55.172 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 02:32:55.172 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 02:32:55.204 -04:00 [INF] Executed page /Account/Login in 36.7528ms
2025-03-17 02:32:55.204 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:32:55.205 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login - 200 null text/html; charset=utf-8 73.7235ms
2025-03-17 02:32:55.218 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:32:55.218 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 0.8522ms
2025-03-17 02:32:55.220 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:32:55.234 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.4716ms
2025-03-17 02:33:01.896 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login - application/x-www-form-urlencoded 268
2025-03-17 02:33:01.916 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:33:01.917 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:33:01.918 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:33:01.931 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-17 02:33:02.022 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-17 02:33:02.187 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 02:33:02.224 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 02:33:02.233 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-17 02:33:02.234 -04:00 [INF] User logged in.
2025-03-17 02:33:02.234 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 02:33:02.235 -04:00 [INF] Executing LocalRedirectResult, redirecting to /.
2025-03-17 02:33:02.235 -04:00 [INF] Executed page /Account/Login in 316.5722ms
2025-03-17 02:33:02.235 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:33:02.236 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login - 302 0 null 340.2964ms
2025-03-17 02:33:02.239 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:33:02.265 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:33:02.265 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:33:02.278 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:33:02.279 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0176ms.
2025-03-17 02:33:02.279 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:33:02.280 -04:00 [INF] Executed ViewResult - view Index executed in 1.3545ms.
2025-03-17 02:33:02.280 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 15.2936ms
2025-03-17 02:33:02.281 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:33:02.281 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 42.5324ms
2025-03-17 02:33:02.295 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:33:02.295 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:33:02.296 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 0.7492ms
2025-03-17 02:33:02.302 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.803ms
2025-03-17 02:33:03.854 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Manage - null null
2025-03-17 02:33:03.890 -04:00 [INF] Executing endpoint '/Account/Manage/Index'
2025-03-17 02:33:03.891 -04:00 [INF] Route matched with {page = "/Account/Manage/Index", area = "Identity", action = "", controller = ""}. Executing page /Account/Manage/Index
2025-03-17 02:33:03.891 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Manage.Internal.IndexModel.OnGetAsync - ModelState is "Valid"
2025-03-17 02:33:03.896 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:33:03.897 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 02:33:03.900 -04:00 [INF] Executed page /Account/Manage/Index in 9.2774ms
2025-03-17 02:33:03.901 -04:00 [INF] Executed endpoint '/Account/Manage/Index'
2025-03-17 02:33:03.901 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Manage - 200 null text/html; charset=utf-8 47.2931ms
2025-03-17 02:33:03.913 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:33:03.913 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:33:03.913 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 0.688ms
2025-03-17 02:33:03.920 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.8453ms
2025-03-17 02:33:33.495 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:33:33.614 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:33:33.620 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:33:33.621 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:33:33.621 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:33:33.622 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:33:33.622 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:33:33.623 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:33:33.632 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:33:33.634 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:33:34.510 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:33:34.566 -04:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:33:34.835 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:33:34.901 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:33:34.903 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:33:34.905 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:33:34.920 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:33:35.412 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:33:35.413 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:33:35.414 -04:00 [INF] Hosting environment: Development
2025-03-17 02:33:35.414 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:33:35.417 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:33:35.810 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:33:36.107 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:33:36.115 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:33:36.172 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:33:36.176 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0111ms.
2025-03-17 02:33:36.190 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:33:36.268 -04:00 [INF] Executed ViewResult - view Index executed in 85.8782ms.
2025-03-17 02:33:36.271 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 155.2222ms
2025-03-17 02:33:36.273 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:33:36.281 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 478.4487ms
2025-03-17 02:33:36.285 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:33:36.292 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:33:36.295 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 10.6673ms
2025-03-17 02:33:36.324 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.3917ms
2025-03-17 02:36:23.975 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:36:24.096 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:36:24.097 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:36:24.097 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:36:24.097 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:36:24.098 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:36:24.098 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:36:24.098 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:36:24.113 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:36:24.114 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:36:25.022 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:36:25.072 -04:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:36:25.413 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:36:25.499 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:36:25.501 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:36:25.503 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:36:25.519 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:36:26.097 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:36:26.099 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:36:26.099 -04:00 [INF] Hosting environment: Development
2025-03-17 02:36:26.100 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:36:26.105 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:36:26.709 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:36:27.124 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:36:27.133 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:36:27.208 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:36:27.215 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.362ms.
2025-03-17 02:36:27.244 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:36:27.376 -04:00 [INF] Executed ViewResult - view Index executed in 151.0867ms.
2025-03-17 02:36:27.380 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 244.9677ms
2025-03-17 02:36:27.380 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:36:27.387 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 683.8313ms
2025-03-17 02:36:27.396 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:36:27.406 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:36:27.410 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 13.8055ms
2025-03-17 02:36:27.462 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.3505ms
2025-03-17 02:36:41.546 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 02:36:41.555 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:41.563 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 02:36:41.569 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 02:36:41.570 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 02:36:41.583 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 02:36:41.586 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 40.0193ms
2025-03-17 02:36:41.599 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=def8592800712ae4e9e4f7fcc85cae23bdbSanZtd&state=b46db1467a52609076b81ba23cce2e1d77FZ0yatg&code_challenge=qTOs9FrRsrEr5qEEclJHBXf0NplF_VECGxWpt_uiI9Q&code_challenge_method=S256 - null null
2025-03-17 02:36:41.634 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 02:36:41.642 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "def8592800712ae4e9e4f7fcc85cae23bdbSanZtd",
  "state": "b46db1467a52609076b81ba23cce2e1d77FZ0yatg",
  "code_challenge": "qTOs9FrRsrEr5qEEclJHBXf0NplF_VECGxWpt_uiI9Q",
  "code_challenge_method": "S256"
}.
2025-03-17 02:36:41.664 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:36:41.688 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 02:36:41.693 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:36:41.718 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:36:41.769 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:36:41.803 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:36:41.914 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-17 02:36:41.964 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 02:36:41.975 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 02:36:42.064 -04:00 [INF] Executed DbCommand (40ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 02:36:42.069 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 299.3431ms.
2025-03-17 02:36:42.071 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 02:36:42.231 -04:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:36:42.327 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 02:36:42.339 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "b46db1467a52609076b81ba23cce2e1d77FZ0yatg",
  "iss": "https://localhost:44395/"
}.
2025-03-17 02:36:42.345 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 627.2709ms
2025-03-17 02:36:42.347 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:36:42.351 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=def8592800712ae4e9e4f7fcc85cae23bdbSanZtd&state=b46db1467a52609076b81ba23cce2e1d77FZ0yatg&code_challenge=qTOs9FrRsrEr5qEEclJHBXf0NplF_VECGxWpt_uiI9Q&code_challenge_method=S256 - 302 0 null 752.0762ms
2025-03-17 02:36:42.439 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-17 02:36:42.441 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:42.442 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 02:36:42.451 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "f36afb393f1f15efe2f45594cd990834d6eb8106163946fcb1930bc847afi41hPWJ",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-17 02:36:42.514 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:36:42.546 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-17 02:36:42.622 -04:00 [INF] The token request was successfully validated.
2025-03-17 02:36:42.627 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 02:36:42.629 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:36:42.660 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:36:42.667 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:36:42.669 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 8.0793ms.
2025-03-17 02:36:42.670 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 02:36:42.676 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 02:36:42.678 -04:00 [INF] The token '06661e27-f812-496e-b6ba-da6a0c4dc33c' was successfully marked as redeemed.
2025-03-17 02:36:42.690 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:36:42.694 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:36:42.703 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:36:42.717 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-17 02:36:42.720 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 90.7989ms
2025-03-17 02:36:42.721 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 02:36:42.721 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 4675 application/json;charset=UTF-8 281.826ms
2025-03-17 02:36:42.728 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 02:36:42.729 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:42.729 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 02:36:42.732 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 02:36:42.734 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 02:36:42.737 -04:00 [INF] An unsupported signing key of type 'SymmetricSecurityKey' was ignored and excluded from the key set. Only RSA and ECDSA asymmetric security keys can be exposed via the JSON Web Key Set endpoint.
2025-03-17 02:36:42.741 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "8C36FD8DE3BC58CF1E9D22DA2FC9F4C25AEE1821",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "tFn4iOeWHGMvB4K1KfKsZGN4pBZA_F6bkxpyJ12sNk6nYKZsvGAWqwsVAWalrDKQ7JyQcGLdwXzzSuEWCwf0_yOazVQ9yAavRyflsUn87zB0fMSNCc1l569dZCA0oar5YcKKgIVvVkRZ-CHcLbccfCraqIu1ZHfPMnSu3eylbO2zjz0zccXo0k02VJVcNQUjryjNCaW90JQK87OAZVebYTjh7j8BxLgAE7qCWnFM7FrC_ePfGy4ufpBvzGFXmyqcoABSC5iZI8kUEz5izXnP89uMCruVVAMBLugUTIsVG5r4UihbIvlSFKwIpcq3wwfTLl_eZcJ2C2MoFh46hv3UmQ",
      "x5t": "jDb9jeO8WM8enSLaL8n0wlruGCE",
      "x5c": [
        "MIIDYDCCAkigAwIBAgIQVih4YPq5b6hIBxz8Di9bjDANBgkqhkiG9w0BAQsFADBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwHhcNMjUwMzA3MDMxMDQ5WhcNMjYwMzA3MDMzMDQ5WjBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC0WfiI55YcYy8HgrUp8qxkY3ikFkD8XpuTGnInXaw2Tqdgpmy8YBarCxUBZqWsMpDsnJBwYt3BfPNK4RYLB/T/I5rNVD3IBq9HJ+WxSfzvMHR8xI0JzWXnr11kIDShqvlhwoqAhW9WRFn4Idwttxx8Ktqoi7Vkd88ydK7d7KVs7bOPPTNxxejSTTZUlVw1BSOvKM0Jpb3QlArzs4BlV5thOOHuPwHEuAATuoJacUzsWsL9498bLi5+kG/MYVebKpygAFILmJkjyRQTPmLNec/z24wKu5VUAwEu6BRMixUbmvhSKFsi+VIUrAilyrfDB9MuX95lwnYLYygWHjqG/dSZAgMBAAGjVDBSMA4GA1UdDwEB/wQEAwIHgDATBgNVHSUEDDAKBggrBgEFBQcDAzAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBQZ8EMesWoZuCgc1sTDpjags19OrjANBgkqhkiG9w0BAQsFAAOCAQEAp/J4bvvGLwWuY5Ii0eC+N6kisVpee/H3xyL1sW7D4d1GLfz2S+3yfsaMF3jWvyZsF07Qk0eon7FSWpkG6X0R1CNduG6zkz6q4uMlwNVzEGGZCIm74LA7F0pERB8tvPn7sWzmyvCxN1wPWTnpfYMbqTjVUv5rx5kP48eYfierthTEvfO52noHl8Q1jbc+ZZrvcA0vGLoHAtmkTGSYFR3DIodB6w391m2QN2FknAISLYwqJxbPdp/boSQnvUSd4HFMXl1UOGTc/cIjvkDebNPq1ry1vYLTYPZ40UhvR17f8OM6PyhPSi8VYZJvfrc1X23D1oT2yJYZVKliNMxPDTrp5w=="
      ]
    }
  ]
}.
2025-03-17 02:36:42.743 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1779 application/json;charset=UTF-8 14.4199ms
2025-03-17 02:36:42.768 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-17 02:36:42.769 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:42.769 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 1.4325ms
2025-03-17 02:36:42.771 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-17 02:36:42.771 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:42.772 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-17 02:36:42.774 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-17 02:36:42.796 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 02:36:42.802 -04:00 [INF] The userinfo request was successfully validated.
2025-03-17 02:36:42.811 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 02:36:42.813 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-17 02:36:42.843 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:36:42.846 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:36:42.848 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.983ms.
2025-03-17 02:36:42.852 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-17 02:36:42.868 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 53.8263ms
2025-03-17 02:36:42.868 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 02:36:42.869 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 97.6158ms
2025-03-17 02:36:44.884 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjhDMzZGRDhERTNCQzU4Q0YxRTlEMjJEQTJGQzlGNEMyNUFFRTE4MjEiLCJ4NXQiOiJqRGI5amVPOFdNOGVuU0xhTDhuMHdscnVHQ0UiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2xvY2FsaG9zdDo0NDM5NS8iLCJleHAiOjE3NDIxOTQ2MDIsImlhdCI6MTc0MjE5MzQwMiwiYXVkIjoiYW5ndWxhcmNsaWVudCIsInN1YiI6ImMwMDFkMGJjLTcyNTAtNDdlOC1hMTA1LTg1MWY3NmE4YjNjZiIsIm5hbWUiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwiZW1haWwiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwib2lfYXVfaWQiOiJlNjFiMzJkMS02OTU3LTRjZjItOWVkNS1lZDU5OGE5YWU1ZmIiLCJhenAiOiJhbmd1bGFyY2xpZW50Iiwibm9uY2UiOiJkZWY4NTkyODAwNzEyYWU0ZTllNGY3ZmNjODVjYWUyM2JkYlNhblp0ZCIsImF0X2hhc2giOiJ0TmZjeE1Ic2lZQ18wNzh0MWlkOGtnIiwib2lfdGtuX2lkIjoiNTkyOGY3ZTEtMmU3Yy00ZjFiLWJkNmItMzkxNTk5NGFmMzMwIn0.Wteh1PUIz4N-u086tUxViaKSPiD4pWC8icBxjP0U2nDbt0iFpjklQVvb9nvybCs-CWj8oBOgq6haqsNxHPHsV71UgPKj4w7P6QZvc7wBbb_H0orsO2UZoMtcmlmfU6B_t5DD1CmKeEBabtKfmeMvQa9QUHQoWgWm7rk4VG124szIIB2ODhxmmlnsufdN49U-ZW5AXORRnMsr8hmoxabPhmDNSjCglGJkbCSlze_2RG8eyid5HIroaUFPIlRkMGE0E_xJvVl2yrKu1hz8gyw1a03JlGdntFlZtmuQo1dvMQfH5CzxQXGH2WZXWzKsEoLNBbmbuaV_aVmafJ1UrvMOzA&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A4200 - null null
2025-03-17 02:36:44.917 -04:00 [INF] The request URI matched a server endpoint: "EndSession".
2025-03-17 02:36:44.919 -04:00 [INF] The end session request was successfully extracted: {
  "id_token_hint": "[redacted]",
  "post_logout_redirect_uri": "http://localhost:4200"
}.
2025-03-17 02:36:44.929 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 02:36:44.964 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__uri_0_contains='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[PostLogoutRedirectUris] LIKE @__uri_0_contains ESCAPE N'\'
2025-03-17 02:36:44.972 -04:00 [INF] The end session request was successfully validated.
2025-03-17 02:36:44.976 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer)'
2025-03-17 02:36:44.977 -04:00 [INF] Route matched with {action = "Logout", controller = "Authorization", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:36:45.007 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:36:45.008 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.2069ms.
2025-03-17 02:36:45.010 -04:00 [INF] Executing ViewResult, running view Logout.
2025-03-17 02:36:45.025 -04:00 [INF] Executed ViewResult - view Logout executed in 16.6219ms.
2025-03-17 02:36:45.026 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer) in 48.4352ms
2025-03-17 02:36:45.026 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer)'
2025-03-17 02:36:45.027 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjhDMzZGRDhERTNCQzU4Q0YxRTlEMjJEQTJGQzlGNEMyNUFFRTE4MjEiLCJ4NXQiOiJqRGI5amVPOFdNOGVuU0xhTDhuMHdscnVHQ0UiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2xvY2FsaG9zdDo0NDM5NS8iLCJleHAiOjE3NDIxOTQ2MDIsImlhdCI6MTc0MjE5MzQwMiwiYXVkIjoiYW5ndWxhcmNsaWVudCIsInN1YiI6ImMwMDFkMGJjLTcyNTAtNDdlOC1hMTA1LTg1MWY3NmE4YjNjZiIsIm5hbWUiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwiZW1haWwiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwib2lfYXVfaWQiOiJlNjFiMzJkMS02OTU3LTRjZjItOWVkNS1lZDU5OGE5YWU1ZmIiLCJhenAiOiJhbmd1bGFyY2xpZW50Iiwibm9uY2UiOiJkZWY4NTkyODAwNzEyYWU0ZTllNGY3ZmNjODVjYWUyM2JkYlNhblp0ZCIsImF0X2hhc2giOiJ0TmZjeE1Ic2lZQ18wNzh0MWlkOGtnIiwib2lfdGtuX2lkIjoiNTkyOGY3ZTEtMmU3Yy00ZjFiLWJkNmItMzkxNTk5NGFmMzMwIn0.Wteh1PUIz4N-u086tUxViaKSPiD4pWC8icBxjP0U2nDbt0iFpjklQVvb9nvybCs-CWj8oBOgq6haqsNxHPHsV71UgPKj4w7P6QZvc7wBbb_H0orsO2UZoMtcmlmfU6B_t5DD1CmKeEBabtKfmeMvQa9QUHQoWgWm7rk4VG124szIIB2ODhxmmlnsufdN49U-ZW5AXORRnMsr8hmoxabPhmDNSjCglGJkbCSlze_2RG8eyid5HIroaUFPIlRkMGE0E_xJvVl2yrKu1hz8gyw1a03JlGdntFlZtmuQo1dvMQfH5CzxQXGH2WZXWzKsEoLNBbmbuaV_aVmafJ1UrvMOzA&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A4200 - 200 null text/html; charset=utf-8 142.5988ms
2025-03-17 02:36:45.056 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:36:45.058 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 1.616ms
2025-03-17 02:36:45.064 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:36:45.078 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.2759ms
2025-03-17 02:36:46.404 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/logout - application/x-www-form-urlencoded 1340
2025-03-17 02:36:46.424 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:46.424 -04:00 [INF] The request URI matched a server endpoint: "EndSession".
2025-03-17 02:36:46.425 -04:00 [INF] The end session request was successfully extracted: {
  "id_token_hint": "[redacted]",
  "post_logout_redirect_uri": "http://localhost:4200",
  "Confirm": "Yes",
  "__RequestVerificationToken": "CfDJ8JaWFYA-jUJKpFtekQbaWloYvA7O8kRp88CsenFhE7TjomN01na1wDhVNkBiyoNtQa0r0cDYKKaUJdIXF1S8z1Qx3SpT3wbogiD65JY2zn6cYO422OLGnK3R96UGhJwJIfPoIYZNOu59toC0hFbZt9wgzADCgZqrWRxizsMxpNFxPjSEb8HQfCNYym0f_MfDjA"
}.
2025-03-17 02:36:46.428 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 02:36:46.431 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uri_0_contains='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[PostLogoutRedirectUris] LIKE @__uri_0_contains ESCAPE N'\'
2025-03-17 02:36:46.433 -04:00 [INF] The end session request was successfully validated.
2025-03-17 02:36:46.433 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer)'
2025-03-17 02:36:46.436 -04:00 [INF] Route matched with {action = "Logout", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogoutPost() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:36:46.457 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:36:46.460 -04:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-03-17 02:36:46.461 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 02:36:46.461 -04:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-03-17 02:36:46.461 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignOutResult in 3.9424ms.
2025-03-17 02:36:46.463 -04:00 [INF] Executing SignOutResult with authentication schemes (["OpenIddict.Server.AspNetCore"]).
2025-03-17 02:36:46.471 -04:00 [INF] The end session response was successfully returned to 'http://localhost:4200': {}.
2025-03-17 02:36:46.472 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer) in 35.1674ms
2025-03-17 02:36:46.472 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer)'
2025-03-17 02:36:46.473 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/logout - 302 0 null 68.374ms
2025-03-17 02:36:47.475 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=e0c49c33de3613146ff70a027540ec94070gd3F11&state=86e2cfd240f04886033d30890cb303dbfemEjHkus&code_challenge=dBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI&code_challenge_method=S256 - null null
2025-03-17 02:36:47.497 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 02:36:47.498 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "e0c49c33de3613146ff70a027540ec94070gd3F11",
  "state": "86e2cfd240f04886033d30890cb303dbfemEjHkus",
  "code_challenge": "dBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI",
  "code_challenge_method": "S256"
}.
2025-03-17 02:36:47.501 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:36:47.503 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 02:36:47.504 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:36:47.504 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:36:47.528 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:36:47.531 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 2.1563ms.
2025-03-17 02:36:47.532 -04:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2025-03-17 02:36:47.534 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-03-17 02:36:47.534 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 29.3459ms
2025-03-17 02:36:47.534 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:36:47.535 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=e0c49c33de3613146ff70a027540ec94070gd3F11&state=86e2cfd240f04886033d30890cb303dbfemEjHkus&code_challenge=dBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI&code_challenge_method=S256 - 302 0 null 59.3518ms
2025-03-17 02:36:47.537 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3De0c49c33de3613146ff70a027540ec94070gd3F11%26state%3D86e2cfd240f04886033d30890cb303dbfemEjHkus%26code_challenge%3DdBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI%26code_challenge_method%3DS256 - null null
2025-03-17 02:36:47.567 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:36:47.581 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:36:47.592 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 02:36:47.593 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 02:36:47.594 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 02:36:47.596 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 02:36:47.596 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 02:36:47.630 -04:00 [INF] Executed page /Account/Login in 48.3388ms
2025-03-17 02:36:47.630 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:36:47.631 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3De0c49c33de3613146ff70a027540ec94070gd3F11%26state%3D86e2cfd240f04886033d30890cb303dbfemEjHkus%26code_challenge%3DdBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 93.8951ms
2025-03-17 02:36:47.655 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:36:47.656 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 1.0803ms
2025-03-17 02:36:47.667 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:36:47.679 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.3775ms
2025-03-17 02:36:54.397 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3De0c49c33de3613146ff70a027540ec94070gd3F11%26state%3D86e2cfd240f04886033d30890cb303dbfemEjHkus%26code_challenge%3DdBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI%26code_challenge_method%3DS256 - application/x-www-form-urlencoded 268
2025-03-17 02:36:54.422 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:54.423 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:36:54.423 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:36:54.435 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-17 02:36:54.444 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-17 02:36:54.519 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 02:36:54.522 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 02:36:54.524 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-17 02:36:54.525 -04:00 [INF] User logged in.
2025-03-17 02:36:54.526 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 02:36:54.528 -04:00 [INF] Executing LocalRedirectResult, redirecting to /connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=e0c49c33de3613146ff70a027540ec94070gd3F11&state=86e2cfd240f04886033d30890cb303dbfemEjHkus&code_challenge=dBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI&code_challenge_method=S256.
2025-03-17 02:36:54.529 -04:00 [INF] Executed page /Account/Login in 105.5853ms
2025-03-17 02:36:54.529 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:36:54.530 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3De0c49c33de3613146ff70a027540ec94070gd3F11%26state%3D86e2cfd240f04886033d30890cb303dbfemEjHkus%26code_challenge%3DdBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI%26code_challenge_method%3DS256 - 302 0 null 132.7458ms
2025-03-17 02:36:54.533 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=e0c49c33de3613146ff70a027540ec94070gd3F11&state=86e2cfd240f04886033d30890cb303dbfemEjHkus&code_challenge=dBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI&code_challenge_method=S256 - null null
2025-03-17 02:36:54.551 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 02:36:54.552 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "e0c49c33de3613146ff70a027540ec94070gd3F11",
  "state": "86e2cfd240f04886033d30890cb303dbfemEjHkus",
  "code_challenge": "dBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI",
  "code_challenge_method": "S256"
}.
2025-03-17 02:36:54.555 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:36:54.559 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 02:36:54.560 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:36:54.560 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:36:54.582 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:36:54.584 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:36:54.586 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-17 02:36:54.588 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 02:36:54.590 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 02:36:54.597 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 02:36:54.599 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 16.155ms.
2025-03-17 02:36:54.599 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 02:36:54.604 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:36:54.607 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 02:36:54.608 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "86e2cfd240f04886033d30890cb303dbfemEjHkus",
  "iss": "https://localhost:44395/"
}.
2025-03-17 02:36:54.609 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 48.8944ms
2025-03-17 02:36:54.610 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:36:54.610 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=e0c49c33de3613146ff70a027540ec94070gd3F11&state=86e2cfd240f04886033d30890cb303dbfemEjHkus&code_challenge=dBMSIUqDuPBYRp6qy2CSrEYgOAXVxBH9r7RrsqZNqhI&code_challenge_method=S256 - 302 0 null 77.1507ms
2025-03-17 02:36:54.750 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-17 02:36:54.751 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:54.751 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 02:36:54.752 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "b586dd16f247dbcca5f377ba98a39930437dbfbcccbbd0cdbaedf22d6b4c9JqgnXL",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-17 02:36:54.754 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:36:54.756 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-17 02:36:54.763 -04:00 [INF] The token request was successfully validated.
2025-03-17 02:36:54.764 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 02:36:54.764 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:36:54.789 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:36:54.790 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:36:54.791 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 1.5285ms.
2025-03-17 02:36:54.791 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 02:36:54.792 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 02:36:54.793 -04:00 [INF] The token 'e2c52f36-40f7-467a-acb1-ae8291c0f31e' was successfully marked as redeemed.
2025-03-17 02:36:54.794 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:36:54.796 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:36:54.799 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:36:54.801 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-17 02:36:54.802 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 37.1413ms
2025-03-17 02:36:54.802 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 02:36:54.802 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 4675 application/json;charset=UTF-8 52.0202ms
2025-03-17 02:36:54.807 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 02:36:54.808 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:54.808 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 02:36:54.808 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 02:36:54.808 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 02:36:54.808 -04:00 [INF] An unsupported signing key of type 'SymmetricSecurityKey' was ignored and excluded from the key set. Only RSA and ECDSA asymmetric security keys can be exposed via the JSON Web Key Set endpoint.
2025-03-17 02:36:54.809 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "8C36FD8DE3BC58CF1E9D22DA2FC9F4C25AEE1821",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "tFn4iOeWHGMvB4K1KfKsZGN4pBZA_F6bkxpyJ12sNk6nYKZsvGAWqwsVAWalrDKQ7JyQcGLdwXzzSuEWCwf0_yOazVQ9yAavRyflsUn87zB0fMSNCc1l569dZCA0oar5YcKKgIVvVkRZ-CHcLbccfCraqIu1ZHfPMnSu3eylbO2zjz0zccXo0k02VJVcNQUjryjNCaW90JQK87OAZVebYTjh7j8BxLgAE7qCWnFM7FrC_ePfGy4ufpBvzGFXmyqcoABSC5iZI8kUEz5izXnP89uMCruVVAMBLugUTIsVG5r4UihbIvlSFKwIpcq3wwfTLl_eZcJ2C2MoFh46hv3UmQ",
      "x5t": "jDb9jeO8WM8enSLaL8n0wlruGCE",
      "x5c": [
        "MIIDYDCCAkigAwIBAgIQVih4YPq5b6hIBxz8Di9bjDANBgkqhkiG9w0BAQsFADBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwHhcNMjUwMzA3MDMxMDQ5WhcNMjYwMzA3MDMzMDQ5WjBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC0WfiI55YcYy8HgrUp8qxkY3ikFkD8XpuTGnInXaw2Tqdgpmy8YBarCxUBZqWsMpDsnJBwYt3BfPNK4RYLB/T/I5rNVD3IBq9HJ+WxSfzvMHR8xI0JzWXnr11kIDShqvlhwoqAhW9WRFn4Idwttxx8Ktqoi7Vkd88ydK7d7KVs7bOPPTNxxejSTTZUlVw1BSOvKM0Jpb3QlArzs4BlV5thOOHuPwHEuAATuoJacUzsWsL9498bLi5+kG/MYVebKpygAFILmJkjyRQTPmLNec/z24wKu5VUAwEu6BRMixUbmvhSKFsi+VIUrAilyrfDB9MuX95lwnYLYygWHjqG/dSZAgMBAAGjVDBSMA4GA1UdDwEB/wQEAwIHgDATBgNVHSUEDDAKBggrBgEFBQcDAzAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBQZ8EMesWoZuCgc1sTDpjags19OrjANBgkqhkiG9w0BAQsFAAOCAQEAp/J4bvvGLwWuY5Ii0eC+N6kisVpee/H3xyL1sW7D4d1GLfz2S+3yfsaMF3jWvyZsF07Qk0eon7FSWpkG6X0R1CNduG6zkz6q4uMlwNVzEGGZCIm74LA7F0pERB8tvPn7sWzmyvCxN1wPWTnpfYMbqTjVUv5rx5kP48eYfierthTEvfO52noHl8Q1jbc+ZZrvcA0vGLoHAtmkTGSYFR3DIodB6w391m2QN2FknAISLYwqJxbPdp/boSQnvUSd4HFMXl1UOGTc/cIjvkDebNPq1ry1vYLTYPZ40UhvR17f8OM6PyhPSi8VYZJvfrc1X23D1oT2yJYZVKliNMxPDTrp5w=="
      ]
    }
  ]
}.
2025-03-17 02:36:54.809 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1779 application/json;charset=UTF-8 1.8952ms
2025-03-17 02:36:54.829 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-17 02:36:54.829 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:54.829 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 0.508ms
2025-03-17 02:36:54.831 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-17 02:36:54.831 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:36:54.831 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-17 02:36:54.831 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-17 02:36:54.835 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 02:36:54.836 -04:00 [INF] The userinfo request was successfully validated.
2025-03-17 02:36:54.836 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 02:36:54.837 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-17 02:36:54.859 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:36:54.860 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:36:54.861 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.7008ms.
2025-03-17 02:36:54.862 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-17 02:36:54.862 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 25.5443ms
2025-03-17 02:36:54.863 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 02:36:54.863 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 32.4624ms
2025-03-17 02:43:24.238 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 02:43:24.260 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 02:45:48.591 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:45:48.697 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:45:48.698 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:45:48.703 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:45:48.703 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:45:48.704 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:45:48.704 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:45:48.705 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:45:48.711 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:45:48.712 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:45:49.576 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:45:49.642 -04:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:45:50.043 -04:00 [INF] Executed DbCommand (36ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:45:50.170 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:45:50.173 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:45:50.175 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:45:50.197 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:45:50.756 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:45:50.757 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:45:50.758 -04:00 [INF] Hosting environment: Development
2025-03-17 02:45:50.758 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:45:50.760 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:45:51.168 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:45:51.593 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:45:51.601 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:45:51.676 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:45:51.681 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.1717ms.
2025-03-17 02:45:51.700 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:45:51.812 -04:00 [INF] Executed ViewResult - view Index executed in 121.684ms.
2025-03-17 02:45:51.817 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 214.6251ms
2025-03-17 02:45:51.820 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:45:51.832 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 670.9321ms
2025-03-17 02:45:51.836 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:45:51.851 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:45:51.861 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 25.8336ms
2025-03-17 02:45:51.898 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.1121ms
2025-03-17 02:45:54.743 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Logout?returnUrl=%2F - application/x-www-form-urlencoded 225
2025-03-17 02:45:54.827 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:45:54.837 -04:00 [INF] Executing endpoint '/Account/Logout'
2025-03-17 02:45:54.876 -04:00 [INF] Route matched with {page = "/Account/Logout", area = "Identity", action = "", controller = ""}. Executing page /Account/Logout
2025-03-17 02:45:54.911 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V5.Pages.Account.Internal.LogoutModel.OnPost - ModelState is "Valid"
2025-03-17 02:45:54.923 -04:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-03-17 02:45:54.925 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 02:45:54.925 -04:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-03-17 02:45:54.926 -04:00 [INF] User logged out.
2025-03-17 02:45:54.927 -04:00 [INF] Executed handler method OnPost, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 02:45:54.928 -04:00 [INF] Executing LocalRedirectResult, redirecting to /.
2025-03-17 02:45:54.929 -04:00 [INF] Executed page /Account/Logout in 52.254ms
2025-03-17 02:45:54.929 -04:00 [INF] Executed endpoint '/Account/Logout'
2025-03-17 02:45:54.930 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Logout?returnUrl=%2F - 302 0 null 187.4517ms
2025-03-17 02:45:54.934 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:45:54.968 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:45:54.968 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:45:54.993 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:45:54.994 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.1143ms.
2025-03-17 02:45:54.996 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:45:55.019 -04:00 [INF] Executed ViewResult - view Index executed in 24.0563ms.
2025-03-17 02:45:55.019 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 50.4311ms
2025-03-17 02:45:55.020 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:45:55.021 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 87.13ms
2025-03-17 02:45:55.037 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:45:55.047 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:45:55.048 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 1.0843ms
2025-03-17 02:45:55.064 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.887ms
2025-03-17 02:46:04.114 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 02:46:04.117 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:46:04.118 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 02:46:04.123 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 02:46:04.124 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 02:46:04.150 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 02:46:04.153 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 39.094ms
2025-03-17 02:46:04.191 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=53fad97b55b9a5f8ddea4f264b361be594zWHgFVk&state=a5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l&code_challenge=xhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ&code_challenge_method=S256 - null null
2025-03-17 02:46:04.220 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 02:46:04.225 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "53fad97b55b9a5f8ddea4f264b361be594zWHgFVk",
  "state": "a5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l",
  "code_challenge": "xhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ",
  "code_challenge_method": "S256"
}.
2025-03-17 02:46:04.251 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:46:04.287 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 02:46:04.291 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:46:04.297 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:46:04.343 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:46:04.352 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 8.5041ms.
2025-03-17 02:46:04.354 -04:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2025-03-17 02:46:04.358 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-03-17 02:46:04.358 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 60.9731ms
2025-03-17 02:46:04.358 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:46:04.362 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D53fad97b55b9a5f8ddea4f264b361be594zWHgFVk%26state%3Da5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l%26code_challenge%3DxhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ%26code_challenge_method%3DS256 - null null
2025-03-17 02:46:04.363 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=53fad97b55b9a5f8ddea4f264b361be594zWHgFVk&state=a5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l&code_challenge=xhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ&code_challenge_method=S256 - 302 0 null 172.0173ms
2025-03-17 02:46:04.388 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:46:04.400 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:46:04.404 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 02:46:04.405 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 02:46:04.407 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 02:46:04.409 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 02:46:04.409 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 02:46:04.464 -04:00 [INF] Executed page /Account/Login in 63.9627ms
2025-03-17 02:46:04.465 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:46:04.466 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D53fad97b55b9a5f8ddea4f264b361be594zWHgFVk%26state%3Da5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l%26code_challenge%3DxhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 103.1414ms
2025-03-17 02:46:04.484 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/css/site.css - null null
2025-03-17 02:46:04.484 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
2025-03-17 02:46:04.484 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - null null
2025-03-17 02:46:04.484 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - null null
2025-03-17 02:46:04.484 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - null null
2025-03-17 02:46:04.487 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - null null
2025-03-17 02:46:04.518 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery-validation/dist/jquery.validate.min.js - null null
2025-03-17 02:46:04.536 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:46:04.535 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js - null null
2025-03-17 02:46:04.537 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 1.7289ms
2025-03-17 02:46:04.540 -04:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\js\site.js'
2025-03-17 02:46:04.540 -04:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\css\site.css'
2025-03-17 02:46:04.540 -04:00 [INF] Sending file. Request path: '/OpeniddictServer.styles.css'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\obj\Debug\net9.0\scopedcss\bundle\OpeniddictServer.styles.css'
2025-03-17 02:46:04.541 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - 200 231 text/javascript 56.2866ms
2025-03-17 02:46:04.541 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/css/site.css - 200 667 text/css 56.7117ms
2025-03-17 02:46:04.541 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - 200 1134 text/css 57.0366ms
2025-03-17 02:46:04.541 -04:00 [INF] Sending file. Request path: '/lib/jquery-validation/dist/jquery.validate.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\jquery-validation\dist\jquery.validate.min.js'
2025-03-17 02:46:04.541 -04:00 [INF] Sending file. Request path: '/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\jquery-validation-unobtrusive\dist\jquery.validate.unobtrusive.min.js'
2025-03-17 02:46:04.542 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery-validation/dist/jquery.validate.min.js - 200 25308 text/javascript 24.1176ms
2025-03-17 02:46:04.542 -04:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js'
2025-03-17 02:46:04.542 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js - 200 5824 text/javascript 6.4118ms
2025-03-17 02:46:04.542 -04:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\jquery\dist\jquery.min.js'
2025-03-17 02:46:04.542 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 200 80721 text/javascript 58.2438ms
2025-03-17 02:46:04.543 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - 200 87533 text/javascript 55.9699ms
2025-03-17 02:46:04.544 -04:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\bootstrap\dist\css\bootstrap.min.css'
2025-03-17 02:46:04.544 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - 200 232803 text/css 60.595ms
2025-03-17 02:46:04.620 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:46:04.633 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.2415ms
2025-03-17 02:46:05.257 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/favicon.ico - null null
2025-03-17 02:46:05.259 -04:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\favicon.ico'
2025-03-17 02:46:05.259 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/favicon.ico - 200 5430 image/x-icon 1.6179ms
2025-03-17 02:46:11.477 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D53fad97b55b9a5f8ddea4f264b361be594zWHgFVk%26state%3Da5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l%26code_challenge%3DxhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ%26code_challenge_method%3DS256 - application/x-www-form-urlencoded 268
2025-03-17 02:46:11.505 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:46:11.506 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:46:11.506 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:46:11.518 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-17 02:46:11.586 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-17 02:46:11.799 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 02:46:11.835 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 02:46:11.842 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-17 02:46:11.843 -04:00 [INF] User logged in.
2025-03-17 02:46:11.844 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 02:46:11.848 -04:00 [INF] Executing LocalRedirectResult, redirecting to /connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=53fad97b55b9a5f8ddea4f264b361be594zWHgFVk&state=a5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l&code_challenge=xhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ&code_challenge_method=S256.
2025-03-17 02:46:11.849 -04:00 [INF] Executed page /Account/Login in 342.5479ms
2025-03-17 02:46:11.850 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:46:11.851 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D53fad97b55b9a5f8ddea4f264b361be594zWHgFVk%26state%3Da5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l%26code_challenge%3DxhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ%26code_challenge_method%3DS256 - 302 0 null 373.5228ms
2025-03-17 02:46:11.853 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=53fad97b55b9a5f8ddea4f264b361be594zWHgFVk&state=a5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l&code_challenge=xhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ&code_challenge_method=S256 - null null
2025-03-17 02:46:11.871 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 02:46:11.871 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "53fad97b55b9a5f8ddea4f264b361be594zWHgFVk",
  "state": "a5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l",
  "code_challenge": "xhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ",
  "code_challenge_method": "S256"
}.
2025-03-17 02:46:11.876 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:46:11.880 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 02:46:11.883 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:46:11.883 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:46:11.907 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:46:11.938 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:46:12.006 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-17 02:46:12.053 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 02:46:12.055 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 02:46:12.131 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 02:46:12.139 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 231.7124ms.
2025-03-17 02:46:12.141 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 02:46:12.394 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:46:12.511 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 02:46:12.527 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "a5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l",
  "iss": "https://localhost:44395/"
}.
2025-03-17 02:46:12.535 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 651.0891ms
2025-03-17 02:46:12.535 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:46:12.536 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=53fad97b55b9a5f8ddea4f264b361be594zWHgFVk&state=a5a4fe8e8b7fd4f65b0d54494ede61c23fdmIM71l&code_challenge=xhM0OmKuC2Xzp-p-R5JGXby-UsweDqqlsox8WCBKGiQ&code_challenge_method=S256 - 302 0 null 682.9162ms
2025-03-17 02:46:12.661 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-17 02:46:12.661 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:46:12.662 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 02:46:12.671 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "d3cf4cb59e590cbceb9b282558edda8e1936163dedb4afc06e0582b34362M0wGkSD",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-17 02:46:12.689 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:46:12.740 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-17 02:46:12.904 -04:00 [INF] The token request was successfully validated.
2025-03-17 02:46:12.907 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 02:46:12.910 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:46:12.944 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:46:12.951 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:46:12.952 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 8.1944ms.
2025-03-17 02:46:12.953 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 02:46:12.959 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 02:46:12.961 -04:00 [INF] The token '994ec469-9106-48d9-ab0d-031434197338' was successfully marked as redeemed.
2025-03-17 02:46:12.980 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:46:12.988 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:46:13.000 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:46:13.025 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-17 02:46:13.032 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 121.2676ms
2025-03-17 02:46:13.032 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 02:46:13.032 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 4675 application/json;charset=UTF-8 371.7575ms
2025-03-17 02:46:13.039 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 02:46:13.039 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:46:13.039 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 02:46:13.042 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 02:46:13.044 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 02:46:13.049 -04:00 [INF] An unsupported signing key of type 'SymmetricSecurityKey' was ignored and excluded from the key set. Only RSA and ECDSA asymmetric security keys can be exposed via the JSON Web Key Set endpoint.
2025-03-17 02:46:13.056 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "8C36FD8DE3BC58CF1E9D22DA2FC9F4C25AEE1821",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "tFn4iOeWHGMvB4K1KfKsZGN4pBZA_F6bkxpyJ12sNk6nYKZsvGAWqwsVAWalrDKQ7JyQcGLdwXzzSuEWCwf0_yOazVQ9yAavRyflsUn87zB0fMSNCc1l569dZCA0oar5YcKKgIVvVkRZ-CHcLbccfCraqIu1ZHfPMnSu3eylbO2zjz0zccXo0k02VJVcNQUjryjNCaW90JQK87OAZVebYTjh7j8BxLgAE7qCWnFM7FrC_ePfGy4ufpBvzGFXmyqcoABSC5iZI8kUEz5izXnP89uMCruVVAMBLugUTIsVG5r4UihbIvlSFKwIpcq3wwfTLl_eZcJ2C2MoFh46hv3UmQ",
      "x5t": "jDb9jeO8WM8enSLaL8n0wlruGCE",
      "x5c": [
        "MIIDYDCCAkigAwIBAgIQVih4YPq5b6hIBxz8Di9bjDANBgkqhkiG9w0BAQsFADBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwHhcNMjUwMzA3MDMxMDQ5WhcNMjYwMzA3MDMzMDQ5WjBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC0WfiI55YcYy8HgrUp8qxkY3ikFkD8XpuTGnInXaw2Tqdgpmy8YBarCxUBZqWsMpDsnJBwYt3BfPNK4RYLB/T/I5rNVD3IBq9HJ+WxSfzvMHR8xI0JzWXnr11kIDShqvlhwoqAhW9WRFn4Idwttxx8Ktqoi7Vkd88ydK7d7KVs7bOPPTNxxejSTTZUlVw1BSOvKM0Jpb3QlArzs4BlV5thOOHuPwHEuAATuoJacUzsWsL9498bLi5+kG/MYVebKpygAFILmJkjyRQTPmLNec/z24wKu5VUAwEu6BRMixUbmvhSKFsi+VIUrAilyrfDB9MuX95lwnYLYygWHjqG/dSZAgMBAAGjVDBSMA4GA1UdDwEB/wQEAwIHgDATBgNVHSUEDDAKBggrBgEFBQcDAzAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBQZ8EMesWoZuCgc1sTDpjags19OrjANBgkqhkiG9w0BAQsFAAOCAQEAp/J4bvvGLwWuY5Ii0eC+N6kisVpee/H3xyL1sW7D4d1GLfz2S+3yfsaMF3jWvyZsF07Qk0eon7FSWpkG6X0R1CNduG6zkz6q4uMlwNVzEGGZCIm74LA7F0pERB8tvPn7sWzmyvCxN1wPWTnpfYMbqTjVUv5rx5kP48eYfierthTEvfO52noHl8Q1jbc+ZZrvcA0vGLoHAtmkTGSYFR3DIodB6w391m2QN2FknAISLYwqJxbPdp/boSQnvUSd4HFMXl1UOGTc/cIjvkDebNPq1ry1vYLTYPZ40UhvR17f8OM6PyhPSi8VYZJvfrc1X23D1oT2yJYZVKliNMxPDTrp5w=="
      ]
    }
  ]
}.
2025-03-17 02:46:13.058 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1779 application/json;charset=UTF-8 18.9246ms
2025-03-17 02:46:13.077 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-17 02:46:13.077 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:46:13.078 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 1.2035ms
2025-03-17 02:46:13.079 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-17 02:46:13.079 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:46:13.080 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-17 02:46:13.083 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-17 02:46:13.119 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 02:46:13.130 -04:00 [INF] The userinfo request was successfully validated.
2025-03-17 02:46:13.141 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 02:46:13.144 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-17 02:46:13.172 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:46:13.178 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:46:13.179 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.7876ms.
2025-03-17 02:46:13.185 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-17 02:46:13.219 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 75.0158ms
2025-03-17 02:46:13.219 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 02:46:13.219 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 140.2605ms
2025-03-17 02:51:46.197 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:51:46.299 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:51:46.303 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:51:46.304 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:51:46.304 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:51:46.305 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:51:46.305 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:51:46.305 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:51:46.311 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:51:46.314 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:51:47.120 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:51:47.173 -04:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:51:47.417 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:51:47.481 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:51:47.483 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:51:47.485 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:51:47.500 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:51:47.943 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:51:47.944 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:51:47.944 -04:00 [INF] Hosting environment: Development
2025-03-17 02:51:47.945 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:51:47.947 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:51:48.354 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:51:48.584 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one encryption key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddEncryptionCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentEncryptionCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralEncryptionKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 02:51:48.628 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 278.4984ms
2025-03-17 02:51:48.637 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:51:48.637 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:51:48.642 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 4.6083ms
2025-03-17 02:51:48.696 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.703ms
2025-03-17 02:52:27.557 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:52:27.677 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:52:27.678 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:52:27.678 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:52:27.679 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:52:27.679 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:52:27.679 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:52:27.680 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:52:27.686 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:52:27.687 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:52:28.487 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:52:28.536 -04:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:52:28.802 -04:00 [INF] Executed DbCommand (47ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:52:28.880 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:52:28.882 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:52:28.884 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:52:28.899 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:52:29.318 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:52:29.319 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:52:29.319 -04:00 [INF] Hosting environment: Development
2025-03-17 02:52:29.320 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:52:29.322 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:52:29.607 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:52:29.837 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one asymmetric signing key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddSigningCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentSigningCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralSigningKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 02:52:29.880 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 278.3343ms
2025-03-17 02:52:29.892 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:52:29.892 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:52:29.935 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 4.6941ms
2025-03-17 02:52:29.959 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.4383ms
2025-03-17 02:52:50.495 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:52:50.648 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:52:50.684 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:52:50.686 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:52:50.686 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:52:50.687 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:52:50.688 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:52:50.688 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:52:50.700 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:52:50.702 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:52:51.494 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:52:51.541 -04:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:52:51.782 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:52:51.868 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:52:51.869 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:52:51.870 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:52:51.886 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:52:52.309 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:52:52.310 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:52:52.311 -04:00 [INF] Hosting environment: Development
2025-03-17 02:52:52.311 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:52:52.313 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:52:52.578 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:52:52.849 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one asymmetric signing key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddSigningCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentSigningCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralSigningKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 02:52:52.895 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 324.8491ms
2025-03-17 02:52:52.903 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:52:52.903 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:52:52.910 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 6.4754ms
2025-03-17 02:52:52.997 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 93.3492ms
2025-03-17 02:56:21.680 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:56:21.798 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:56:21.798 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:56:21.799 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:56:21.800 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:56:21.800 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:56:21.801 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:56:21.801 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:56:21.808 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:56:21.810 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:56:22.625 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:56:22.679 -04:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:56:22.948 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:56:23.039 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:56:23.041 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:56:23.043 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:56:23.060 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:56:23.747 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:56:23.748 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:56:23.749 -04:00 [INF] Hosting environment: Development
2025-03-17 02:56:23.749 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:56:23.755 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:56:24.350 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:56:24.699 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one asymmetric signing key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddSigningCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentSigningCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralSigningKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 02:56:24.788 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 449.356ms
2025-03-17 02:56:24.796 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:56:24.796 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:56:24.802 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 5.9042ms
2025-03-17 02:56:24.842 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.9138ms
2025-03-17 02:57:15.551 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:57:15.658 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:57:15.664 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:57:15.664 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:57:15.665 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:57:15.665 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:57:15.666 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:57:15.666 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:57:15.674 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:57:15.676 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:57:16.418 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:57:16.469 -04:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:57:16.755 -04:00 [INF] Executed DbCommand (57ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:57:16.826 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:57:16.829 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:57:16.831 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:57:16.846 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:57:17.291 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:57:17.292 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:57:17.292 -04:00 [INF] Hosting environment: Development
2025-03-17 02:57:17.292 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:57:17.294 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:57:17.740 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:57:18.205 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:57:18.215 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:57:18.269 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:57:18.276 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.8725ms.
2025-03-17 02:57:18.299 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:57:18.470 -04:00 [INF] Executed ViewResult - view Index executed in 184.8544ms.
2025-03-17 02:57:18.471 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 254.2999ms
2025-03-17 02:57:18.471 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:57:18.478 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 744.8053ms
2025-03-17 02:57:18.484 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:57:18.492 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:57:18.494 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 10.4688ms
2025-03-17 02:57:18.520 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.6065ms
2025-03-17 02:57:43.300 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 02:57:43.447 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 02:57:43.448 -04:00 [INF] Quartz Scheduler created
2025-03-17 02:57:43.449 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 02:57:43.449 -04:00 [INF] RAMJobStore initialized.
2025-03-17 02:57:43.450 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 02:57:43.450 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 02:57:43.451 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 02:57:43.457 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 02:57:43.459 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 02:57:44.203 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 02:57:44.258 -04:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 02:57:44.505 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:57:44.570 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:57:44.571 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:57:44.573 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:57:44.588 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 02:57:45.048 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 02:57:45.050 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 02:57:45.051 -04:00 [INF] Hosting environment: Development
2025-03-17 02:57:45.051 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 02:57:45.054 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 02:57:45.440 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:57:45.705 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:57:45.712 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:57:45.764 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:57:45.768 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.8399ms.
2025-03-17 02:57:45.783 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:57:45.862 -04:00 [INF] Executed ViewResult - view Index executed in 87.702ms.
2025-03-17 02:57:45.864 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 150.3344ms
2025-03-17 02:57:45.865 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:57:45.872 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 439.5032ms
2025-03-17 02:57:45.878 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:57:45.887 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 9.4657ms
2025-03-17 02:57:45.887 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:57:45.915 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.2293ms
2025-03-17 02:58:14.604 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 02:58:14.622 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:58:14.673 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 02:58:14.680 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 02:58:14.682 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 02:58:14.712 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 02:58:14.716 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 112.2227ms
2025-03-17 02:58:14.736 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=34fbd1ff4aea714d4030cf17e9c155b2b6IhHM54J&state=f35ff75dc06705578e6c539f9e44e08591NEuotWq&code_challenge=EVZ8Q0L7LIq7njbn1Tbb_zkVupKh6Elljfp4UgMt_ko&code_challenge_method=S256 - null null
2025-03-17 02:58:14.779 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 02:58:14.789 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "34fbd1ff4aea714d4030cf17e9c155b2b6IhHM54J",
  "state": "f35ff75dc06705578e6c539f9e44e08591NEuotWq",
  "code_challenge": "EVZ8Q0L7LIq7njbn1Tbb_zkVupKh6Elljfp4UgMt_ko",
  "code_challenge_method": "S256"
}.
2025-03-17 02:58:14.933 -04:00 [INF] Executed DbCommand (40ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:58:14.989 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 02:58:14.999 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:58:15.009 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:58:15.089 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:58:15.113 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 23.1829ms.
2025-03-17 02:58:15.117 -04:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2025-03-17 02:58:15.124 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-03-17 02:58:15.125 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 115.5446ms
2025-03-17 02:58:15.126 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:58:15.130 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D34fbd1ff4aea714d4030cf17e9c155b2b6IhHM54J%26state%3Df35ff75dc06705578e6c539f9e44e08591NEuotWq%26code_challenge%3DEVZ8Q0L7LIq7njbn1Tbb_zkVupKh6Elljfp4UgMt_ko%26code_challenge_method%3DS256 - null null
2025-03-17 02:58:15.130 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=34fbd1ff4aea714d4030cf17e9c155b2b6IhHM54J&state=f35ff75dc06705578e6c539f9e44e08591NEuotWq&code_challenge=EVZ8Q0L7LIq7njbn1Tbb_zkVupKh6Elljfp4UgMt_ko&code_challenge_method=S256 - 302 0 null 394.7739ms
2025-03-17 02:58:15.168 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:58:15.190 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:58:15.237 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 02:58:15.247 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 02:58:15.248 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 02:58:15.252 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 02:58:15.253 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 02:58:15.330 -04:00 [INF] Executed page /Account/Login in 138.4247ms
2025-03-17 02:58:15.330 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:58:15.331 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D34fbd1ff4aea714d4030cf17e9c155b2b6IhHM54J%26state%3Df35ff75dc06705578e6c539f9e44e08591NEuotWq%26code_challenge%3DEVZ8Q0L7LIq7njbn1Tbb_zkVupKh6Elljfp4UgMt_ko%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 200.8203ms
2025-03-17 02:58:15.352 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - null null
2025-03-17 02:58:15.352 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/css/site.css - null null
2025-03-17 02:58:15.352 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - null null
2025-03-17 02:58:15.352 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
2025-03-17 02:58:15.353 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - null null
2025-03-17 02:58:15.418 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - null null
2025-03-17 02:58:15.427 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery-validation/dist/jquery.validate.min.js - null null
2025-03-17 02:58:15.439 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js - null null
2025-03-17 02:58:15.440 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:58:15.441 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 0.7076ms
2025-03-17 02:58:15.443 -04:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\css\site.css'
2025-03-17 02:58:15.443 -04:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js'
2025-03-17 02:58:15.443 -04:00 [INF] Sending file. Request path: '/lib/jquery-validation/dist/jquery.validate.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\jquery-validation\dist\jquery.validate.min.js'
2025-03-17 02:58:15.443 -04:00 [INF] Sending file. Request path: '/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\jquery-validation-unobtrusive\dist\jquery.validate.unobtrusive.min.js'
2025-03-17 02:58:15.443 -04:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\js\site.js'
2025-03-17 02:58:15.443 -04:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\jquery\dist\jquery.min.js'
2025-03-17 02:58:15.443 -04:00 [INF] Sending file. Request path: '/OpeniddictServer.styles.css'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\obj\Debug\net9.0\scopedcss\bundle\OpeniddictServer.styles.css'
2025-03-17 02:58:15.444 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/css/site.css - 200 667 text/css 92.2092ms
2025-03-17 02:58:15.444 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - 200 87533 text/javascript 90.5533ms
2025-03-17 02:58:15.444 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery-validation/dist/jquery.validate.min.js - 200 25308 text/javascript 17.5519ms
2025-03-17 02:58:15.444 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js - 200 5824 text/javascript 4.7156ms
2025-03-17 02:58:15.447 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - 200 1134 text/css 94.3821ms
2025-03-17 02:58:15.448 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - 200 231 text/javascript 29.6348ms
2025-03-17 02:58:15.448 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 200 80721 text/javascript 96.3065ms
2025-03-17 02:58:15.450 -04:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\lib\bootstrap\dist\css\bootstrap.min.css'
2025-03-17 02:58:15.451 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - 200 232803 text/css 99.1008ms
2025-03-17 02:58:15.498 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:58:15.515 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.1122ms
2025-03-17 02:58:15.598 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/favicon.ico - null null
2025-03-17 02:58:15.602 -04:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: 'D:\Development\GITHub\AuthSample\src\OpeniddictServer\wwwroot\favicon.ico'
2025-03-17 02:58:15.602 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/favicon.ico - 200 5430 image/x-icon 3.8894ms
2025-03-17 02:58:15.807 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:58:15.827 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:58:15.828 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:58:15.842 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:58:15.842 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0404ms.
2025-03-17 02:58:15.843 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:58:15.845 -04:00 [INF] Executed ViewResult - view Index executed in 2.8116ms.
2025-03-17 02:58:15.846 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 17.7424ms
2025-03-17 02:58:15.846 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:58:15.846 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 39.0773ms
2025-03-17 02:58:15.858 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:58:15.858 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:58:15.859 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 0.8937ms
2025-03-17 02:58:15.870 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.8478ms
2025-03-17 02:58:17.042 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 02:58:17.069 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:58:17.069 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 02:58:17.087 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:58:17.088 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0334ms.
2025-03-17 02:58:17.089 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 02:58:17.091 -04:00 [INF] Executed ViewResult - view Index executed in 2.3406ms.
2025-03-17 02:58:17.091 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 21.7342ms
2025-03-17 02:58:17.091 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 02:58:17.092 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 49.3692ms
2025-03-17 02:58:17.102 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:58:17.102 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:58:17.103 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 1.1838ms
2025-03-17 02:58:17.108 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.7484ms
2025-03-17 02:58:23.242 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=e7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs&state=f35ff75dc06705578e6c539f9e44e08591NEuotWq&code_challenge=dGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc&code_challenge_method=S256 - null null
2025-03-17 02:58:23.270 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 02:58:23.271 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "e7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs",
  "state": "f35ff75dc06705578e6c539f9e44e08591NEuotWq",
  "code_challenge": "dGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc",
  "code_challenge_method": "S256"
}.
2025-03-17 02:58:23.340 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:58:23.346 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 02:58:23.347 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:58:23.347 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:58:23.372 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:58:23.373 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 0.1938ms.
2025-03-17 02:58:23.373 -04:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2025-03-17 02:58:23.374 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-03-17 02:58:23.374 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 26.5199ms
2025-03-17 02:58:23.374 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:58:23.375 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=e7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs&state=f35ff75dc06705578e6c539f9e44e08591NEuotWq&code_challenge=dGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc&code_challenge_method=S256 - 302 0 null 133.4579ms
2025-03-17 02:58:23.377 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3De7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs%26state%3Df35ff75dc06705578e6c539f9e44e08591NEuotWq%26code_challenge%3DdGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc%26code_challenge_method%3DS256 - null null
2025-03-17 02:58:23.403 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:58:23.404 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:58:23.405 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 02:58:23.406 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 02:58:23.406 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 02:58:23.407 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 02:58:23.407 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 02:58:23.418 -04:00 [INF] Executed page /Account/Login in 13.8779ms
2025-03-17 02:58:23.419 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:58:23.420 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3De7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs%26state%3Df35ff75dc06705578e6c539f9e44e08591NEuotWq%26code_challenge%3DdGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 42.7447ms
2025-03-17 02:58:23.434 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 02:58:23.435 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 0.6391ms
2025-03-17 02:58:23.444 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 02:58:23.454 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.2633ms
2025-03-17 02:58:28.090 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3De7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs%26state%3Df35ff75dc06705578e6c539f9e44e08591NEuotWq%26code_challenge%3DdGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc%26code_challenge_method%3DS256 - application/x-www-form-urlencoded 268
2025-03-17 02:58:28.116 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:58:28.117 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 02:58:28.119 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 02:58:28.145 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-17 02:58:28.172 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-17 02:58:28.360 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 02:58:28.385 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 02:58:28.390 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-17 02:58:28.392 -04:00 [INF] User logged in.
2025-03-17 02:58:28.393 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 02:58:28.395 -04:00 [INF] Executing LocalRedirectResult, redirecting to /connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=e7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs&state=f35ff75dc06705578e6c539f9e44e08591NEuotWq&code_challenge=dGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc&code_challenge_method=S256.
2025-03-17 02:58:28.396 -04:00 [INF] Executed page /Account/Login in 275.7666ms
2025-03-17 02:58:28.396 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 02:58:28.396 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3De7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs%26state%3Df35ff75dc06705578e6c539f9e44e08591NEuotWq%26code_challenge%3DdGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc%26code_challenge_method%3DS256 - 302 0 null 306.1697ms
2025-03-17 02:58:28.399 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=e7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs&state=f35ff75dc06705578e6c539f9e44e08591NEuotWq&code_challenge=dGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc&code_challenge_method=S256 - null null
2025-03-17 02:58:28.419 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 02:58:28.420 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "e7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs",
  "state": "f35ff75dc06705578e6c539f9e44e08591NEuotWq",
  "code_challenge": "dGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc",
  "code_challenge_method": "S256"
}.
2025-03-17 02:58:28.424 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:58:28.432 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 02:58:28.437 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:58:28.437 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:58:28.461 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:58:28.491 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:58:28.550 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-17 02:58:28.593 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 02:58:28.595 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 02:58:28.697 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 02:58:28.703 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 241.7579ms.
2025-03-17 02:58:28.705 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 02:58:28.957 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:58:29.085 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 02:58:29.100 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "f35ff75dc06705578e6c539f9e44e08591NEuotWq",
  "iss": "https://localhost:44395/"
}.
2025-03-17 02:58:29.106 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 668.4247ms
2025-03-17 02:58:29.107 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 02:58:29.107 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=e7f11a83ecc09e9372d2a62a6e7bd712d26U4ajbs&state=f35ff75dc06705578e6c539f9e44e08591NEuotWq&code_challenge=dGPh-ozeaCEOKZPHaPQ-yOh_VAQxJMs_S0ruzowBaYc&code_challenge_method=S256 - 302 0 null 708.6107ms
2025-03-17 02:58:29.236 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-17 02:58:29.237 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:58:29.237 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 02:58:29.245 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "3698e4b0d235fbb274613987f8d01bce4e02f864168ad44f41e9d197568d1KrZCnq",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-17 02:58:29.259 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 02:58:29.299 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-17 02:58:29.416 -04:00 [INF] The token request was successfully validated.
2025-03-17 02:58:29.420 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 02:58:29.423 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 02:58:29.450 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:58:29.457 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:58:29.458 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 8.366ms.
2025-03-17 02:58:29.459 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 02:58:29.467 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 02:58:29.468 -04:00 [INF] The token '08bb55e6-269a-46f9-8677-d295c2e09cfc' was successfully marked as redeemed.
2025-03-17 02:58:29.485 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:58:29.491 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:58:29.498 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 02:58:29.522 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-17 02:58:29.525 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 100.9983ms
2025-03-17 02:58:29.525 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 02:58:29.526 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 4675 application/json;charset=UTF-8 289.39ms
2025-03-17 02:58:29.531 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 02:58:29.532 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:58:29.532 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 02:58:29.535 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 02:58:29.537 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 02:58:29.540 -04:00 [INF] An unsupported signing key of type 'SymmetricSecurityKey' was ignored and excluded from the key set. Only RSA and ECDSA asymmetric security keys can be exposed via the JSON Web Key Set endpoint.
2025-03-17 02:58:29.546 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "8C36FD8DE3BC58CF1E9D22DA2FC9F4C25AEE1821",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "tFn4iOeWHGMvB4K1KfKsZGN4pBZA_F6bkxpyJ12sNk6nYKZsvGAWqwsVAWalrDKQ7JyQcGLdwXzzSuEWCwf0_yOazVQ9yAavRyflsUn87zB0fMSNCc1l569dZCA0oar5YcKKgIVvVkRZ-CHcLbccfCraqIu1ZHfPMnSu3eylbO2zjz0zccXo0k02VJVcNQUjryjNCaW90JQK87OAZVebYTjh7j8BxLgAE7qCWnFM7FrC_ePfGy4ufpBvzGFXmyqcoABSC5iZI8kUEz5izXnP89uMCruVVAMBLugUTIsVG5r4UihbIvlSFKwIpcq3wwfTLl_eZcJ2C2MoFh46hv3UmQ",
      "x5t": "jDb9jeO8WM8enSLaL8n0wlruGCE",
      "x5c": [
        "MIIDYDCCAkigAwIBAgIQVih4YPq5b6hIBxz8Di9bjDANBgkqhkiG9w0BAQsFADBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwHhcNMjUwMzA3MDMxMDQ5WhcNMjYwMzA3MDMzMDQ5WjBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC0WfiI55YcYy8HgrUp8qxkY3ikFkD8XpuTGnInXaw2Tqdgpmy8YBarCxUBZqWsMpDsnJBwYt3BfPNK4RYLB/T/I5rNVD3IBq9HJ+WxSfzvMHR8xI0JzWXnr11kIDShqvlhwoqAhW9WRFn4Idwttxx8Ktqoi7Vkd88ydK7d7KVs7bOPPTNxxejSTTZUlVw1BSOvKM0Jpb3QlArzs4BlV5thOOHuPwHEuAATuoJacUzsWsL9498bLi5+kG/MYVebKpygAFILmJkjyRQTPmLNec/z24wKu5VUAwEu6BRMixUbmvhSKFsi+VIUrAilyrfDB9MuX95lwnYLYygWHjqG/dSZAgMBAAGjVDBSMA4GA1UdDwEB/wQEAwIHgDATBgNVHSUEDDAKBggrBgEFBQcDAzAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBQZ8EMesWoZuCgc1sTDpjags19OrjANBgkqhkiG9w0BAQsFAAOCAQEAp/J4bvvGLwWuY5Ii0eC+N6kisVpee/H3xyL1sW7D4d1GLfz2S+3yfsaMF3jWvyZsF07Qk0eon7FSWpkG6X0R1CNduG6zkz6q4uMlwNVzEGGZCIm74LA7F0pERB8tvPn7sWzmyvCxN1wPWTnpfYMbqTjVUv5rx5kP48eYfierthTEvfO52noHl8Q1jbc+ZZrvcA0vGLoHAtmkTGSYFR3DIodB6w391m2QN2FknAISLYwqJxbPdp/boSQnvUSd4HFMXl1UOGTc/cIjvkDebNPq1ry1vYLTYPZ40UhvR17f8OM6PyhPSi8VYZJvfrc1X23D1oT2yJYZVKliNMxPDTrp5w=="
      ]
    }
  ]
}.
2025-03-17 02:58:29.548 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1779 application/json;charset=UTF-8 16.5074ms
2025-03-17 02:58:29.565 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-17 02:58:29.565 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:58:29.566 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 1.4124ms
2025-03-17 02:58:29.568 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-17 02:58:29.568 -04:00 [INF] CORS policy execution successful.
2025-03-17 02:58:29.569 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-17 02:58:29.573 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-17 02:58:29.598 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 02:58:29.608 -04:00 [INF] The userinfo request was successfully validated.
2025-03-17 02:58:29.620 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 02:58:29.623 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-17 02:58:29.650 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-17 02:58:29.653 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 02:58:29.654 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.2209ms.
2025-03-17 02:58:29.660 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-17 02:58:29.688 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 64.2982ms
2025-03-17 02:58:29.688 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 02:58:29.689 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 121.1917ms
2025-03-17 03:01:43.492 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 03:01:43.523 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 03:11:30.535 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 03:11:30.642 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 03:11:30.648 -04:00 [INF] Quartz Scheduler created
2025-03-17 03:11:30.649 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 03:11:30.649 -04:00 [INF] RAMJobStore initialized.
2025-03-17 03:11:30.650 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 03:11:30.650 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 03:11:30.650 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 03:11:30.658 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 03:11:30.659 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 03:11:31.453 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 03:11:31.504 -04:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 03:11:31.788 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:11:31.856 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:11:31.858 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:11:31.860 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:11:31.875 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 03:11:32.392 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 03:11:32.393 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 03:11:32.394 -04:00 [INF] Hosting environment: Development
2025-03-17 03:11:32.394 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 03:11:32.396 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 03:11:33.010 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 03:11:33.265 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one asymmetric signing key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddSigningCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentSigningCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralSigningKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 03:11:33.306 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 300.5498ms
2025-03-17 03:11:33.317 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 03:11:33.317 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 03:11:33.322 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 4.256ms
2025-03-17 03:11:33.418 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 101.1574ms
2025-03-17 03:12:05.482 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 03:12:05.598 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 03:12:05.599 -04:00 [INF] Quartz Scheduler created
2025-03-17 03:12:05.599 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 03:12:05.600 -04:00 [INF] RAMJobStore initialized.
2025-03-17 03:12:05.600 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 03:12:05.600 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 03:12:05.601 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 03:12:05.607 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 03:12:05.608 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 03:12:06.390 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 03:12:06.439 -04:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 03:12:06.722 -04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:12:06.800 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:12:06.802 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:12:06.803 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:12:06.820 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 03:12:07.246 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 03:12:07.247 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 03:12:07.247 -04:00 [INF] Hosting environment: Development
2025-03-17 03:12:07.247 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 03:12:07.251 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 03:12:07.614 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 03:12:07.895 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 03:12:07.902 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 03:12:07.957 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:12:07.960 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.5981ms.
2025-03-17 03:12:07.972 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 03:12:08.060 -04:00 [INF] Executed ViewResult - view Index executed in 93.8202ms.
2025-03-17 03:12:08.061 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 158.5599ms
2025-03-17 03:12:08.062 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 03:12:08.068 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 457.9769ms
2025-03-17 03:12:08.079 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 03:12:08.083 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 03:12:08.127 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 47.9291ms
2025-03-17 03:12:08.154 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.0618ms
2025-03-17 03:12:12.724 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjhDMzZGRDhERTNCQzU4Q0YxRTlEMjJEQTJGQzlGNEMyNUFFRTE4MjEiLCJ4NXQiOiJqRGI5amVPOFdNOGVuU0xhTDhuMHdscnVHQ0UiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2xvY2FsaG9zdDo0NDM5NS8iLCJleHAiOjE3NDIxOTU5MDksImlhdCI6MTc0MjE5NDcwOSwiYXVkIjoiYW5ndWxhcmNsaWVudCIsInN1YiI6ImMwMDFkMGJjLTcyNTAtNDdlOC1hMTA1LTg1MWY3NmE4YjNjZiIsIm5hbWUiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwiZW1haWwiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwib2lfYXVfaWQiOiJlNjFiMzJkMS02OTU3LTRjZjItOWVkNS1lZDU5OGE5YWU1ZmIiLCJhenAiOiJhbmd1bGFyY2xpZW50Iiwibm9uY2UiOiJlN2YxMWE4M2VjYzA5ZTkzNzJkMmE2MmE2ZTdiZDcxMmQyNlU0YWpicyIsImF0X2hhc2giOiI0UWxKLWFwNjdHUUpaRzlrYWVWNGRnIiwib2lfdGtuX2lkIjoiY2UyM2MzNGEtN2UwNi00MDAxLWExYjMtN2VkOTFkNzczMWQyIn0.KXMaWq3YFeXjiJrxKd1uz0c5oT_yaxjV7jS_wlxC1g2Wa4lMvrDUso9G6EpO8G4J24J5Ibql4DHoBSDGLylhL92Ab6VAzXM-r7_prB83UrtjGoeVOy-_Obot0HzoZXOMGJcNaFfb3yX_O_orycOqVLhS-XsiKwtDd5vtQGW-buzczvW1fPlz8hUI0en4CE3QaY8n58iyKL--xDAxi7blAEvFujaKcmA7Yk2RlzizSPQ_2fWfqORIb_2kwTOvk5XpEnjCIglAByl3SCsngC90iztppJQgv8Nf8THaQugW9l5KdrIqfWzk5XRuSz8rrjbjcOOxgB1Q-kvWpThTfxRong&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A4200 - null null
2025-03-17 03:12:12.755 -04:00 [INF] The request URI matched a server endpoint: "EndSession".
2025-03-17 03:12:12.769 -04:00 [INF] The end session request was successfully extracted: {
  "id_token_hint": "[redacted]",
  "post_logout_redirect_uri": "http://localhost:4200"
}.
2025-03-17 03:12:12.880 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uri_0_contains='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[PostLogoutRedirectUris] LIKE @__uri_0_contains ESCAPE N'\'
2025-03-17 03:12:12.891 -04:00 [INF] The end session request was successfully validated.
2025-03-17 03:12:12.903 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer)'
2025-03-17 03:12:12.904 -04:00 [INF] Route matched with {action = "Logout", controller = "Authorization", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 03:12:12.943 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:12:12.944 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.2117ms.
2025-03-17 03:12:12.958 -04:00 [INF] Executing ViewResult, running view Logout.
2025-03-17 03:12:13.001 -04:00 [INF] Executed ViewResult - view Logout executed in 56.0373ms.
2025-03-17 03:12:13.003 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer) in 98.6108ms
2025-03-17 03:12:13.004 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer)'
2025-03-17 03:12:13.008 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjhDMzZGRDhERTNCQzU4Q0YxRTlEMjJEQTJGQzlGNEMyNUFFRTE4MjEiLCJ4NXQiOiJqRGI5amVPOFdNOGVuU0xhTDhuMHdscnVHQ0UiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2xvY2FsaG9zdDo0NDM5NS8iLCJleHAiOjE3NDIxOTU5MDksImlhdCI6MTc0MjE5NDcwOSwiYXVkIjoiYW5ndWxhcmNsaWVudCIsInN1YiI6ImMwMDFkMGJjLTcyNTAtNDdlOC1hMTA1LTg1MWY3NmE4YjNjZiIsIm5hbWUiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwiZW1haWwiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwib2lfYXVfaWQiOiJlNjFiMzJkMS02OTU3LTRjZjItOWVkNS1lZDU5OGE5YWU1ZmIiLCJhenAiOiJhbmd1bGFyY2xpZW50Iiwibm9uY2UiOiJlN2YxMWE4M2VjYzA5ZTkzNzJkMmE2MmE2ZTdiZDcxMmQyNlU0YWpicyIsImF0X2hhc2giOiI0UWxKLWFwNjdHUUpaRzlrYWVWNGRnIiwib2lfdGtuX2lkIjoiY2UyM2MzNGEtN2UwNi00MDAxLWExYjMtN2VkOTFkNzczMWQyIn0.KXMaWq3YFeXjiJrxKd1uz0c5oT_yaxjV7jS_wlxC1g2Wa4lMvrDUso9G6EpO8G4J24J5Ibql4DHoBSDGLylhL92Ab6VAzXM-r7_prB83UrtjGoeVOy-_Obot0HzoZXOMGJcNaFfb3yX_O_orycOqVLhS-XsiKwtDd5vtQGW-buzczvW1fPlz8hUI0en4CE3QaY8n58iyKL--xDAxi7blAEvFujaKcmA7Yk2RlzizSPQ_2fWfqORIb_2kwTOvk5XpEnjCIglAByl3SCsngC90iztppJQgv8Nf8THaQugW9l5KdrIqfWzk5XRuSz8rrjbjcOOxgB1Q-kvWpThTfxRong&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A4200 - 200 null text/html; charset=utf-8 283.4482ms
2025-03-17 03:12:13.031 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 03:12:13.035 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 3.9725ms
2025-03-17 03:12:13.040 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 03:12:13.052 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.393ms
2025-03-17 03:12:14.179 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/logout - application/x-www-form-urlencoded 1340
2025-03-17 03:12:14.211 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:14.214 -04:00 [INF] The request URI matched a server endpoint: "EndSession".
2025-03-17 03:12:14.221 -04:00 [INF] The end session request was successfully extracted: {
  "id_token_hint": "[redacted]",
  "post_logout_redirect_uri": "http://localhost:4200",
  "Confirm": "Yes",
  "__RequestVerificationToken": "CfDJ8JaWFYA-jUJKpFtekQbaWloprNhfHlFwMIY8XrhtoYxO_V9edMvdGtGK9q8QXRAMVoG41VhLP4-fpeY37Wi_pKNlY2H7vU3mZ2tpDocPQLgai8Ib-SzgN7rzUOHwlOmqpZmslCU8xArQxP72KnwHfAtDODXV366swztmcZ0mw97sQI0HQFc_ijmHZz76tJFeWw"
}.
2025-03-17 03:12:14.276 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uri_0_contains='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[PostLogoutRedirectUris] LIKE @__uri_0_contains ESCAPE N'\'
2025-03-17 03:12:14.278 -04:00 [INF] The end session request was successfully validated.
2025-03-17 03:12:14.283 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer)'
2025-03-17 03:12:14.288 -04:00 [INF] Route matched with {action = "Logout", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogoutPost() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 03:12:14.312 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:12:14.317 -04:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-03-17 03:12:14.319 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 03:12:14.320 -04:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-03-17 03:12:14.320 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignOutResult in 7.0951ms.
2025-03-17 03:12:14.322 -04:00 [INF] Executing SignOutResult with authentication schemes (["OpenIddict.Server.AspNetCore"]).
2025-03-17 03:12:14.333 -04:00 [INF] The end session response was successfully returned to 'http://localhost:4200': {}.
2025-03-17 03:12:14.336 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer) in 48.2152ms
2025-03-17 03:12:14.336 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer)'
2025-03-17 03:12:14.337 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/logout - 302 0 null 158.4764ms
2025-03-17 03:12:15.513 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=d390542b1de29602f094d81da11c91e84e6gyYWmJ&state=7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA&code_challenge=g5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk&code_challenge_method=S256 - null null
2025-03-17 03:12:15.538 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 03:12:15.541 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "d390542b1de29602f094d81da11c91e84e6gyYWmJ",
  "state": "7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA",
  "code_challenge": "g5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk",
  "code_challenge_method": "S256"
}.
2025-03-17 03:12:15.553 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:12:15.567 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 03:12:15.570 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 03:12:15.572 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 03:12:15.609 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:12:15.615 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 5.3549ms.
2025-03-17 03:12:15.616 -04:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2025-03-17 03:12:15.618 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-03-17 03:12:15.619 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 46.1172ms
2025-03-17 03:12:15.619 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 03:12:15.619 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=d390542b1de29602f094d81da11c91e84e6gyYWmJ&state=7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA&code_challenge=g5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk&code_challenge_method=S256 - 302 0 null 106.8126ms
2025-03-17 03:12:15.621 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Dd390542b1de29602f094d81da11c91e84e6gyYWmJ%26state%3D7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA%26code_challenge%3Dg5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk%26code_challenge_method%3DS256 - null null
2025-03-17 03:12:15.654 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 03:12:15.671 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 03:12:15.683 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 03:12:15.685 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 03:12:15.686 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 03:12:15.690 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 03:12:15.690 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 03:12:15.729 -04:00 [INF] Executed page /Account/Login in 57.5946ms
2025-03-17 03:12:15.729 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 03:12:15.730 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Dd390542b1de29602f094d81da11c91e84e6gyYWmJ%26state%3D7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA%26code_challenge%3Dg5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 108.9603ms
2025-03-17 03:12:15.750 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 03:12:15.752 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 1.7328ms
2025-03-17 03:12:15.761 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 03:12:15.773 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.3985ms
2025-03-17 03:12:21.277 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Dd390542b1de29602f094d81da11c91e84e6gyYWmJ%26state%3D7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA%26code_challenge%3Dg5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk%26code_challenge_method%3DS256 - application/x-www-form-urlencoded 268
2025-03-17 03:12:21.307 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:21.308 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 03:12:21.308 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 03:12:21.322 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-17 03:12:21.337 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-17 03:12:21.473 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 03:12:21.501 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 03:12:21.507 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-17 03:12:21.508 -04:00 [INF] User logged in.
2025-03-17 03:12:21.509 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 03:12:21.512 -04:00 [INF] Executing LocalRedirectResult, redirecting to /connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=d390542b1de29602f094d81da11c91e84e6gyYWmJ&state=7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA&code_challenge=g5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk&code_challenge_method=S256.
2025-03-17 03:12:21.512 -04:00 [INF] Executed page /Account/Login in 203.942ms
2025-03-17 03:12:21.512 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 03:12:21.513 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Dd390542b1de29602f094d81da11c91e84e6gyYWmJ%26state%3D7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA%26code_challenge%3Dg5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk%26code_challenge_method%3DS256 - 302 0 null 235.5506ms
2025-03-17 03:12:21.515 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=d390542b1de29602f094d81da11c91e84e6gyYWmJ&state=7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA&code_challenge=g5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk&code_challenge_method=S256 - null null
2025-03-17 03:12:21.535 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 03:12:21.535 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "d390542b1de29602f094d81da11c91e84e6gyYWmJ",
  "state": "7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA",
  "code_challenge": "g5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk",
  "code_challenge_method": "S256"
}.
2025-03-17 03:12:21.539 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:12:21.540 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 03:12:21.542 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 03:12:21.543 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 03:12:21.565 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:12:21.591 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 03:12:21.640 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-17 03:12:21.678 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 03:12:21.683 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 03:12:21.739 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 03:12:21.745 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 179.3815ms.
2025-03-17 03:12:21.748 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 03:12:21.921 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 03:12:21.989 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 03:12:22.000 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA",
  "iss": "https://localhost:44395/"
}.
2025-03-17 03:12:22.002 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 459.1847ms
2025-03-17 03:12:22.002 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 03:12:22.003 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=d390542b1de29602f094d81da11c91e84e6gyYWmJ&state=7b23174ed70ce0cf3696e85f402fcc093aeMCcsmA&code_challenge=g5njBKN3eDbMBqQODLIcplr3hpTtK4SCpCHt2e8G7vk&code_challenge_method=S256 - 302 0 null 488.1257ms
2025-03-17 03:12:22.144 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-17 03:12:22.144 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:22.145 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 03:12:22.150 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "9b25879b10e663762723306cf623a8db7365241933315c762aaa67d74c4eRbeqyAZ",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-17 03:12:22.166 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:12:22.199 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-17 03:12:22.277 -04:00 [INF] The token request was successfully validated.
2025-03-17 03:12:22.280 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 03:12:22.283 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 03:12:22.313 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:12:22.327 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 03:12:22.329 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 15.2883ms.
2025-03-17 03:12:22.329 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 03:12:22.343 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 03:12:22.345 -04:00 [INF] The token '60c7e564-c415-4dc6-a831-3dc7e3dba0f5' was successfully marked as redeemed.
2025-03-17 03:12:22.359 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 03:12:22.368 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 03:12:22.380 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 03:12:22.388 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3600,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-17 03:12:22.392 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 108.2389ms
2025-03-17 03:12:22.392 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 03:12:22.392 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 5452 application/json;charset=UTF-8 248.5175ms
2025-03-17 03:12:22.397 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 03:12:22.398 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:22.399 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 03:12:22.402 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 03:12:22.403 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 03:12:22.412 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "FA255A93B45563FC9792B6843981A4815340CA63",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "yqnUNTdRkX4ctLiWl82BuJiyrfONcPZa9d_hgYXcTCIM8687may5zdOYzf5QPdAvtATwajHTyKEfe8_OOxIEY5uN_IW58N5wAwZdO782xuxAEvbZytQZSYh5WBp1WJwnCEHYNiHQyTLGrSp57olh9MWg87_Q-bD0to26oUCiXMDaoiC5fOl_Vt83ScWp0P29lzAhsBqFsSLDcIBEWWic_ZqTYmFKHvwcH-TcPby3JJCzyWGxFNweYbXmcna6CkIpc6oW9wSMoZxm-vGFETo0IboXUj-YOSN7Qy6bmbcW-5ol4w1RFWGKnXsLZ5wIlUB5_nOWKTTMVoZzL1hA5C8dzQ",
      "x5t": "-iVak7RVY_yXkraEOYGkgVNAymM",
      "x5c": [
        "MIIC9DCCAdygAwIBAgIIMUairA8a2s4wDQYJKoZIhvcNAQELBQAwMDEuMCwGA1UEAxMlT3BlbklkZGljdCBTZXJ2ZXIgU2lnbmluZyBDZXJ0aWZpY2F0ZTAeFw0yNTAzMTExNDA0MzJaFw0yNzAzMTExNDA0MzJaMDAxLjAsBgNVBAMTJU9wZW5JZGRpY3QgU2VydmVyIFNpZ25pbmcgQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKqdQ1N1GRfhy0uJaXzYG4mLKt841w9lr13+GBhdxMIgzzrzuZrLnN05jN/lA90C+0BPBqMdPIoR97z847EgRjm438hbnw3nADBl07vzbG7EAS9tnK1BlJiHlYGnVYnCcIQdg2IdDJMsatKnnuiWH0xaDzv9D5sPS2jbqhQKJcwNqiILl86X9W3zdJxanQ/b2XMCGwGoWxIsNwgERZaJz9mpNiYUoe/Bwf5Nw9vLckkLPJYbEU3B5hteZydroKQilzqhb3BIyhnGb68YUROjQhuhdSP5g5I3tDLpuZtxb7miXjDVEVYYqdewtnnAiVQHn+c5YpNMxWhnMvWEDkLx3NAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQsFAAOCAQEAsec8Q+RX4movGB1ftIPvRJDhZ1n6ixyjeYVXIWZvx245rlXa2EHPHPBWcNEkm42Crzh35pkh7jJd/EHN2tbMRBt6vTZGVr7fnmwVSU5mwXUaKZYfmnR+D1GzGdl8JAQ3GnqBqPb9nC7sEfc2NPIbPMhM1anD1utDBE2jrf6cYyIqtB2MbrLGSfngp7e+bLihky9XUzig5nxZDgeHSbm30SplVQLMJ2bwuSlF9+z4m0bucWeFS0qUjUt60CBWg/8axMJ+Nd2LrAs3H9EwuQABaeFFTkW/Czs5nzAe2RNSS77WSGVc1kOpLzj5qIqzFuSRUhLEXpZYyQAiAxT8agCTlg=="
      ]
    }
  ]
}.
2025-03-17 03:12:22.413 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1635 application/json;charset=UTF-8 15.8642ms
2025-03-17 03:12:22.435 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-17 03:12:22.435 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:22.436 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 1.6231ms
2025-03-17 03:12:22.438 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-17 03:12:22.438 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:22.438 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-17 03:12:22.442 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-17 03:12:22.463 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 03:12:22.469 -04:00 [INF] The userinfo request was successfully validated.
2025-03-17 03:12:22.477 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 03:12:22.479 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-17 03:12:22.517 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:12:22.523 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 03:12:22.525 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7.3443ms.
2025-03-17 03:12:22.531 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-17 03:12:22.550 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 70.2901ms
2025-03-17 03:12:22.550 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 03:12:22.551 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 113.0237ms
2025-03-17 03:12:39.474 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 03:12:39.475 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:39.475 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/.well-known/openid-configuration - 204 null null 1.3649ms
2025-03-17 03:12:39.477 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 03:12:39.477 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:39.478 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 03:12:39.480 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 03:12:39.481 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 03:12:39.489 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 03:12:39.491 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 14.6014ms
2025-03-17 03:12:39.495 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/.well-known/jwks - null null
2025-03-17 03:12:39.496 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:39.496 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/.well-known/jwks - 204 null null 0.6478ms
2025-03-17 03:12:39.497 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 03:12:39.498 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:39.498 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 03:12:39.498 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 03:12:39.499 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 03:12:39.499 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "FA255A93B45563FC9792B6843981A4815340CA63",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "yqnUNTdRkX4ctLiWl82BuJiyrfONcPZa9d_hgYXcTCIM8687may5zdOYzf5QPdAvtATwajHTyKEfe8_OOxIEY5uN_IW58N5wAwZdO782xuxAEvbZytQZSYh5WBp1WJwnCEHYNiHQyTLGrSp57olh9MWg87_Q-bD0to26oUCiXMDaoiC5fOl_Vt83ScWp0P29lzAhsBqFsSLDcIBEWWic_ZqTYmFKHvwcH-TcPby3JJCzyWGxFNweYbXmcna6CkIpc6oW9wSMoZxm-vGFETo0IboXUj-YOSN7Qy6bmbcW-5ol4w1RFWGKnXsLZ5wIlUB5_nOWKTTMVoZzL1hA5C8dzQ",
      "x5t": "-iVak7RVY_yXkraEOYGkgVNAymM",
      "x5c": [
        "MIIC9DCCAdygAwIBAgIIMUairA8a2s4wDQYJKoZIhvcNAQELBQAwMDEuMCwGA1UEAxMlT3BlbklkZGljdCBTZXJ2ZXIgU2lnbmluZyBDZXJ0aWZpY2F0ZTAeFw0yNTAzMTExNDA0MzJaFw0yNzAzMTExNDA0MzJaMDAxLjAsBgNVBAMTJU9wZW5JZGRpY3QgU2VydmVyIFNpZ25pbmcgQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKqdQ1N1GRfhy0uJaXzYG4mLKt841w9lr13+GBhdxMIgzzrzuZrLnN05jN/lA90C+0BPBqMdPIoR97z847EgRjm438hbnw3nADBl07vzbG7EAS9tnK1BlJiHlYGnVYnCcIQdg2IdDJMsatKnnuiWH0xaDzv9D5sPS2jbqhQKJcwNqiILl86X9W3zdJxanQ/b2XMCGwGoWxIsNwgERZaJz9mpNiYUoe/Bwf5Nw9vLckkLPJYbEU3B5hteZydroKQilzqhb3BIyhnGb68YUROjQhuhdSP5g5I3tDLpuZtxb7miXjDVEVYYqdewtnnAiVQHn+c5YpNMxWhnMvWEDkLx3NAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQsFAAOCAQEAsec8Q+RX4movGB1ftIPvRJDhZ1n6ixyjeYVXIWZvx245rlXa2EHPHPBWcNEkm42Crzh35pkh7jJd/EHN2tbMRBt6vTZGVr7fnmwVSU5mwXUaKZYfmnR+D1GzGdl8JAQ3GnqBqPb9nC7sEfc2NPIbPMhM1anD1utDBE2jrf6cYyIqtB2MbrLGSfngp7e+bLihky9XUzig5nxZDgeHSbm30SplVQLMJ2bwuSlF9+z4m0bucWeFS0qUjUt60CBWg/8axMJ+Nd2LrAs3H9EwuQABaeFFTkW/Czs5nzAe2RNSS77WSGVc1kOpLzj5qIqzFuSRUhLEXpZYyQAiAxT8agCTlg=="
      ]
    }
  ]
}.
2025-03-17 03:12:39.501 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1635 application/json;charset=UTF-8 3.4972ms
2025-03-17 03:12:53.972 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 03:12:53.973 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:53.973 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/.well-known/openid-configuration - 204 null null 0.9849ms
2025-03-17 03:12:53.975 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 03:12:53.975 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:53.975 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 03:12:53.976 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 03:12:53.976 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 03:12:53.977 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 03:12:53.979 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 3.7227ms
2025-03-17 03:12:53.983 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/.well-known/jwks - null null
2025-03-17 03:12:53.983 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:53.983 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/.well-known/jwks - 204 null null 0.6739ms
2025-03-17 03:12:53.984 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 03:12:53.985 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:12:53.985 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 03:12:53.986 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 03:12:53.986 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 03:12:53.988 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "FA255A93B45563FC9792B6843981A4815340CA63",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "yqnUNTdRkX4ctLiWl82BuJiyrfONcPZa9d_hgYXcTCIM8687may5zdOYzf5QPdAvtATwajHTyKEfe8_OOxIEY5uN_IW58N5wAwZdO782xuxAEvbZytQZSYh5WBp1WJwnCEHYNiHQyTLGrSp57olh9MWg87_Q-bD0to26oUCiXMDaoiC5fOl_Vt83ScWp0P29lzAhsBqFsSLDcIBEWWic_ZqTYmFKHvwcH-TcPby3JJCzyWGxFNweYbXmcna6CkIpc6oW9wSMoZxm-vGFETo0IboXUj-YOSN7Qy6bmbcW-5ol4w1RFWGKnXsLZ5wIlUB5_nOWKTTMVoZzL1hA5C8dzQ",
      "x5t": "-iVak7RVY_yXkraEOYGkgVNAymM",
      "x5c": [
        "MIIC9DCCAdygAwIBAgIIMUairA8a2s4wDQYJKoZIhvcNAQELBQAwMDEuMCwGA1UEAxMlT3BlbklkZGljdCBTZXJ2ZXIgU2lnbmluZyBDZXJ0aWZpY2F0ZTAeFw0yNTAzMTExNDA0MzJaFw0yNzAzMTExNDA0MzJaMDAxLjAsBgNVBAMTJU9wZW5JZGRpY3QgU2VydmVyIFNpZ25pbmcgQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKqdQ1N1GRfhy0uJaXzYG4mLKt841w9lr13+GBhdxMIgzzrzuZrLnN05jN/lA90C+0BPBqMdPIoR97z847EgRjm438hbnw3nADBl07vzbG7EAS9tnK1BlJiHlYGnVYnCcIQdg2IdDJMsatKnnuiWH0xaDzv9D5sPS2jbqhQKJcwNqiILl86X9W3zdJxanQ/b2XMCGwGoWxIsNwgERZaJz9mpNiYUoe/Bwf5Nw9vLckkLPJYbEU3B5hteZydroKQilzqhb3BIyhnGb68YUROjQhuhdSP5g5I3tDLpuZtxb7miXjDVEVYYqdewtnnAiVQHn+c5YpNMxWhnMvWEDkLx3NAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQsFAAOCAQEAsec8Q+RX4movGB1ftIPvRJDhZ1n6ixyjeYVXIWZvx245rlXa2EHPHPBWcNEkm42Crzh35pkh7jJd/EHN2tbMRBt6vTZGVr7fnmwVSU5mwXUaKZYfmnR+D1GzGdl8JAQ3GnqBqPb9nC7sEfc2NPIbPMhM1anD1utDBE2jrf6cYyIqtB2MbrLGSfngp7e+bLihky9XUzig5nxZDgeHSbm30SplVQLMJ2bwuSlF9+z4m0bucWeFS0qUjUt60CBWg/8axMJ+Nd2LrAs3H9EwuQABaeFFTkW/Czs5nzAe2RNSS77WSGVc1kOpLzj5qIqzFuSRUhLEXpZYyQAiAxT8agCTlg=="
      ]
    }
  ]
}.
2025-03-17 03:12:53.989 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1635 application/json;charset=UTF-8 4.8831ms
2025-03-17 03:13:05.567 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 03:13:05.568 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:13:05.569 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/.well-known/openid-configuration - 204 null null 1.6151ms
2025-03-17 03:13:05.570 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 03:13:05.571 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:13:05.571 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 03:13:05.572 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 03:13:05.572 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 03:13:05.574 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 03:13:05.575 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 4.8275ms
2025-03-17 03:13:05.578 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/.well-known/jwks - null null
2025-03-17 03:13:05.578 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:13:05.579 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/.well-known/jwks - 204 null null 0.5364ms
2025-03-17 03:13:05.580 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 03:13:05.580 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:13:05.580 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 03:13:05.580 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 03:13:05.581 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 03:13:05.581 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "FA255A93B45563FC9792B6843981A4815340CA63",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "yqnUNTdRkX4ctLiWl82BuJiyrfONcPZa9d_hgYXcTCIM8687may5zdOYzf5QPdAvtATwajHTyKEfe8_OOxIEY5uN_IW58N5wAwZdO782xuxAEvbZytQZSYh5WBp1WJwnCEHYNiHQyTLGrSp57olh9MWg87_Q-bD0to26oUCiXMDaoiC5fOl_Vt83ScWp0P29lzAhsBqFsSLDcIBEWWic_ZqTYmFKHvwcH-TcPby3JJCzyWGxFNweYbXmcna6CkIpc6oW9wSMoZxm-vGFETo0IboXUj-YOSN7Qy6bmbcW-5ol4w1RFWGKnXsLZ5wIlUB5_nOWKTTMVoZzL1hA5C8dzQ",
      "x5t": "-iVak7RVY_yXkraEOYGkgVNAymM",
      "x5c": [
        "MIIC9DCCAdygAwIBAgIIMUairA8a2s4wDQYJKoZIhvcNAQELBQAwMDEuMCwGA1UEAxMlT3BlbklkZGljdCBTZXJ2ZXIgU2lnbmluZyBDZXJ0aWZpY2F0ZTAeFw0yNTAzMTExNDA0MzJaFw0yNzAzMTExNDA0MzJaMDAxLjAsBgNVBAMTJU9wZW5JZGRpY3QgU2VydmVyIFNpZ25pbmcgQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKqdQ1N1GRfhy0uJaXzYG4mLKt841w9lr13+GBhdxMIgzzrzuZrLnN05jN/lA90C+0BPBqMdPIoR97z847EgRjm438hbnw3nADBl07vzbG7EAS9tnK1BlJiHlYGnVYnCcIQdg2IdDJMsatKnnuiWH0xaDzv9D5sPS2jbqhQKJcwNqiILl86X9W3zdJxanQ/b2XMCGwGoWxIsNwgERZaJz9mpNiYUoe/Bwf5Nw9vLckkLPJYbEU3B5hteZydroKQilzqhb3BIyhnGb68YUROjQhuhdSP5g5I3tDLpuZtxb7miXjDVEVYYqdewtnnAiVQHn+c5YpNMxWhnMvWEDkLx3NAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQsFAAOCAQEAsec8Q+RX4movGB1ftIPvRJDhZ1n6ixyjeYVXIWZvx245rlXa2EHPHPBWcNEkm42Crzh35pkh7jJd/EHN2tbMRBt6vTZGVr7fnmwVSU5mwXUaKZYfmnR+D1GzGdl8JAQ3GnqBqPb9nC7sEfc2NPIbPMhM1anD1utDBE2jrf6cYyIqtB2MbrLGSfngp7e+bLihky9XUzig5nxZDgeHSbm30SplVQLMJ2bwuSlF9+z4m0bucWeFS0qUjUt60CBWg/8axMJ+Nd2LrAs3H9EwuQABaeFFTkW/Czs5nzAe2RNSS77WSGVc1kOpLzj5qIqzFuSRUhLEXpZYyQAiAxT8agCTlg=="
      ]
    }
  ]
}.
2025-03-17 03:13:05.582 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1635 application/json;charset=UTF-8 2.7587ms
2025-03-17 03:17:05.723 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 03:17:05.740 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 03:17:49.010 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 03:17:49.115 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 03:17:49.138 -04:00 [INF] Quartz Scheduler created
2025-03-17 03:17:49.142 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 03:17:49.142 -04:00 [INF] RAMJobStore initialized.
2025-03-17 03:17:49.143 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 03:17:49.143 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 03:17:49.144 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 03:17:49.151 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 03:17:49.152 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 03:17:49.961 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 03:17:50.009 -04:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 03:17:50.266 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:17:50.348 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:17:50.359 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:17:50.373 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:17:50.393 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 03:17:50.843 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 03:17:50.844 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 03:17:50.845 -04:00 [INF] Hosting environment: Development
2025-03-17 03:17:50.845 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 03:17:50.847 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 03:17:51.258 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 03:17:51.562 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 03:17:51.572 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 03:17:51.625 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:17:51.629 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.9204ms.
2025-03-17 03:17:51.646 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 03:17:51.751 -04:00 [INF] Executed ViewResult - view Index executed in 113.6562ms.
2025-03-17 03:17:51.753 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 179.948ms
2025-03-17 03:17:51.754 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 03:17:51.760 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 510.3583ms
2025-03-17 03:17:51.765 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 03:17:51.773 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 03:17:51.784 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 19.0925ms
2025-03-17 03:17:51.812 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.7071ms
2025-03-17 03:18:01.276 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 03:18:01.288 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:18:01.290 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 03:18:01.296 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 03:18:01.298 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 03:18:01.312 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 03:18:01.315 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 38.6617ms
2025-03-17 03:18:01.328 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=374a4d588da00046509a22af8a8cba61f45KnQRh1&state=cd24e69a63d62318fb1ab2429b21edfb58RdgFnXN&code_challenge=S17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA&code_challenge_method=S256 - null null
2025-03-17 03:18:01.365 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 03:18:01.374 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "374a4d588da00046509a22af8a8cba61f45KnQRh1",
  "state": "cd24e69a63d62318fb1ab2429b21edfb58RdgFnXN",
  "code_challenge": "S17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA",
  "code_challenge_method": "S256"
}.
2025-03-17 03:18:01.398 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:18:01.425 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 03:18:01.432 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 03:18:01.440 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 03:18:01.515 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:18:01.522 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 6.9531ms.
2025-03-17 03:18:01.524 -04:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2025-03-17 03:18:01.528 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-03-17 03:18:01.528 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 87.3533ms
2025-03-17 03:18:01.529 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 03:18:01.532 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=374a4d588da00046509a22af8a8cba61f45KnQRh1&state=cd24e69a63d62318fb1ab2429b21edfb58RdgFnXN&code_challenge=S17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA&code_challenge_method=S256 - 302 0 null 204.799ms
2025-03-17 03:18:01.533 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D374a4d588da00046509a22af8a8cba61f45KnQRh1%26state%3Dcd24e69a63d62318fb1ab2429b21edfb58RdgFnXN%26code_challenge%3DS17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA%26code_challenge_method%3DS256 - null null
2025-03-17 03:18:01.572 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 03:18:01.590 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 03:18:01.611 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 03:18:01.616 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 03:18:01.617 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 03:18:01.620 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 03:18:01.621 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 03:18:01.671 -04:00 [INF] Executed page /Account/Login in 79.8063ms
2025-03-17 03:18:01.671 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 03:18:01.672 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D374a4d588da00046509a22af8a8cba61f45KnQRh1%26state%3Dcd24e69a63d62318fb1ab2429b21edfb58RdgFnXN%26code_challenge%3DS17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 139.2329ms
2025-03-17 03:18:01.685 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 03:18:01.686 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 0.953ms
2025-03-17 03:18:01.697 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 03:18:01.708 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.8996ms
2025-03-17 03:18:06.292 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D374a4d588da00046509a22af8a8cba61f45KnQRh1%26state%3Dcd24e69a63d62318fb1ab2429b21edfb58RdgFnXN%26code_challenge%3DS17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA%26code_challenge_method%3DS256 - application/x-www-form-urlencoded 268
2025-03-17 03:18:06.321 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:18:06.321 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 03:18:06.322 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 03:18:06.336 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-17 03:18:06.391 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-17 03:18:06.528 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 03:18:06.558 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 03:18:06.563 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-17 03:18:06.565 -04:00 [INF] User logged in.
2025-03-17 03:18:06.566 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 03:18:06.568 -04:00 [INF] Executing LocalRedirectResult, redirecting to /connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=374a4d588da00046509a22af8a8cba61f45KnQRh1&state=cd24e69a63d62318fb1ab2429b21edfb58RdgFnXN&code_challenge=S17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA&code_challenge_method=S256.
2025-03-17 03:18:06.568 -04:00 [INF] Executed page /Account/Login in 246.1583ms
2025-03-17 03:18:06.569 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 03:18:06.569 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D374a4d588da00046509a22af8a8cba61f45KnQRh1%26state%3Dcd24e69a63d62318fb1ab2429b21edfb58RdgFnXN%26code_challenge%3DS17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA%26code_challenge_method%3DS256 - 302 0 null 276.9624ms
2025-03-17 03:18:06.572 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=374a4d588da00046509a22af8a8cba61f45KnQRh1&state=cd24e69a63d62318fb1ab2429b21edfb58RdgFnXN&code_challenge=S17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA&code_challenge_method=S256 - null null
2025-03-17 03:18:06.597 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 03:18:06.597 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "374a4d588da00046509a22af8a8cba61f45KnQRh1",
  "state": "cd24e69a63d62318fb1ab2429b21edfb58RdgFnXN",
  "code_challenge": "S17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA",
  "code_challenge_method": "S256"
}.
2025-03-17 03:18:06.602 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:18:06.605 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 03:18:06.609 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 03:18:06.610 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 03:18:06.632 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:18:06.649 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 03:18:06.689 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-17 03:18:06.719 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 03:18:06.720 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 03:18:06.766 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 03:18:06.774 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 141.9511ms.
2025-03-17 03:18:06.776 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 03:18:06.925 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 03:18:07.037 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 03:18:07.054 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "cd24e69a63d62318fb1ab2429b21edfb58RdgFnXN",
  "iss": "https://localhost:44395/"
}.
2025-03-17 03:18:07.059 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 448.6224ms
2025-03-17 03:18:07.059 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 03:18:07.060 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=374a4d588da00046509a22af8a8cba61f45KnQRh1&state=cd24e69a63d62318fb1ab2429b21edfb58RdgFnXN&code_challenge=S17atSf4bkROm3M4wpyE4_HpqELaOO3Tlfwn9w-ADAA&code_challenge_method=S256 - 302 0 null 487.5292ms
2025-03-17 03:18:07.193 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-17 03:18:07.193 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:18:07.194 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 03:18:07.199 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "960fd8b3332099184eadc3d573faa64978df161e264ad0d2f8919ef260fe1f1Hzet",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-17 03:18:07.211 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 03:18:07.243 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-17 03:18:07.344 -04:00 [INF] The token request was successfully validated.
2025-03-17 03:18:07.349 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 03:18:07.351 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 03:18:07.377 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:18:07.384 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 03:18:07.385 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 8.0472ms.
2025-03-17 03:18:07.386 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 03:18:07.407 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 03:18:07.408 -04:00 [INF] The token '4a8e8cab-a47f-4d25-8f86-5331a86412e0' was successfully marked as redeemed.
2025-03-17 03:18:07.422 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 03:18:07.428 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 03:18:07.436 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 03:18:07.441 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3600,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-17 03:18:07.443 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 91.5904ms
2025-03-17 03:18:07.444 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 03:18:07.444 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 6413 application/json;charset=UTF-8 251.4525ms
2025-03-17 03:18:07.451 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 03:18:07.452 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:18:07.452 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 03:18:07.454 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 03:18:07.455 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 03:18:07.461 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "FA255A93B45563FC9792B6843981A4815340CA63",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "yqnUNTdRkX4ctLiWl82BuJiyrfONcPZa9d_hgYXcTCIM8687may5zdOYzf5QPdAvtATwajHTyKEfe8_OOxIEY5uN_IW58N5wAwZdO782xuxAEvbZytQZSYh5WBp1WJwnCEHYNiHQyTLGrSp57olh9MWg87_Q-bD0to26oUCiXMDaoiC5fOl_Vt83ScWp0P29lzAhsBqFsSLDcIBEWWic_ZqTYmFKHvwcH-TcPby3JJCzyWGxFNweYbXmcna6CkIpc6oW9wSMoZxm-vGFETo0IboXUj-YOSN7Qy6bmbcW-5ol4w1RFWGKnXsLZ5wIlUB5_nOWKTTMVoZzL1hA5C8dzQ",
      "x5t": "-iVak7RVY_yXkraEOYGkgVNAymM",
      "x5c": [
        "MIIC9DCCAdygAwIBAgIIMUairA8a2s4wDQYJKoZIhvcNAQELBQAwMDEuMCwGA1UEAxMlT3BlbklkZGljdCBTZXJ2ZXIgU2lnbmluZyBDZXJ0aWZpY2F0ZTAeFw0yNTAzMTExNDA0MzJaFw0yNzAzMTExNDA0MzJaMDAxLjAsBgNVBAMTJU9wZW5JZGRpY3QgU2VydmVyIFNpZ25pbmcgQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKqdQ1N1GRfhy0uJaXzYG4mLKt841w9lr13+GBhdxMIgzzrzuZrLnN05jN/lA90C+0BPBqMdPIoR97z847EgRjm438hbnw3nADBl07vzbG7EAS9tnK1BlJiHlYGnVYnCcIQdg2IdDJMsatKnnuiWH0xaDzv9D5sPS2jbqhQKJcwNqiILl86X9W3zdJxanQ/b2XMCGwGoWxIsNwgERZaJz9mpNiYUoe/Bwf5Nw9vLckkLPJYbEU3B5hteZydroKQilzqhb3BIyhnGb68YUROjQhuhdSP5g5I3tDLpuZtxb7miXjDVEVYYqdewtnnAiVQHn+c5YpNMxWhnMvWEDkLx3NAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQsFAAOCAQEAsec8Q+RX4movGB1ftIPvRJDhZ1n6ixyjeYVXIWZvx245rlXa2EHPHPBWcNEkm42Crzh35pkh7jJd/EHN2tbMRBt6vTZGVr7fnmwVSU5mwXUaKZYfmnR+D1GzGdl8JAQ3GnqBqPb9nC7sEfc2NPIbPMhM1anD1utDBE2jrf6cYyIqtB2MbrLGSfngp7e+bLihky9XUzig5nxZDgeHSbm30SplVQLMJ2bwuSlF9+z4m0bucWeFS0qUjUt60CBWg/8axMJ+Nd2LrAs3H9EwuQABaeFFTkW/Czs5nzAe2RNSS77WSGVc1kOpLzj5qIqzFuSRUhLEXpZYyQAiAxT8agCTlg=="
      ]
    }
  ]
}.
2025-03-17 03:18:07.462 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1635 application/json;charset=UTF-8 11.206ms
2025-03-17 03:18:07.483 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-17 03:18:07.484 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:18:07.485 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 2.0007ms
2025-03-17 03:18:07.487 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-17 03:18:07.488 -04:00 [INF] CORS policy execution successful.
2025-03-17 03:18:07.488 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-17 03:18:07.490 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-17 03:18:07.510 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 03:18:07.514 -04:00 [INF] The userinfo request was successfully validated.
2025-03-17 03:18:07.521 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 03:18:07.523 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-17 03:18:07.550 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-17 03:18:07.552 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 03:18:07.554 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.9865ms.
2025-03-17 03:18:07.557 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-17 03:18:07.575 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 51.3709ms
2025-03-17 03:18:07.575 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 03:18:07.576 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 88.2785ms
2025-03-17 03:20:27.683 -04:00 [INF] Request starting HTTP/1.1 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 03:20:27.684 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 03:20:27.685 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 03:20:27.685 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 03:20:27.685 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 03:20:27.690 -04:00 [INF] Request finished HTTP/1.1 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 6.8647ms
2025-03-17 03:20:27.730 -04:00 [INF] Request starting HTTP/1.1 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 03:20:27.731 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 03:20:27.731 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 03:20:27.732 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 03:20:27.733 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "FA255A93B45563FC9792B6843981A4815340CA63",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "yqnUNTdRkX4ctLiWl82BuJiyrfONcPZa9d_hgYXcTCIM8687may5zdOYzf5QPdAvtATwajHTyKEfe8_OOxIEY5uN_IW58N5wAwZdO782xuxAEvbZytQZSYh5WBp1WJwnCEHYNiHQyTLGrSp57olh9MWg87_Q-bD0to26oUCiXMDaoiC5fOl_Vt83ScWp0P29lzAhsBqFsSLDcIBEWWic_ZqTYmFKHvwcH-TcPby3JJCzyWGxFNweYbXmcna6CkIpc6oW9wSMoZxm-vGFETo0IboXUj-YOSN7Qy6bmbcW-5ol4w1RFWGKnXsLZ5wIlUB5_nOWKTTMVoZzL1hA5C8dzQ",
      "x5t": "-iVak7RVY_yXkraEOYGkgVNAymM",
      "x5c": [
        "MIIC9DCCAdygAwIBAgIIMUairA8a2s4wDQYJKoZIhvcNAQELBQAwMDEuMCwGA1UEAxMlT3BlbklkZGljdCBTZXJ2ZXIgU2lnbmluZyBDZXJ0aWZpY2F0ZTAeFw0yNTAzMTExNDA0MzJaFw0yNzAzMTExNDA0MzJaMDAxLjAsBgNVBAMTJU9wZW5JZGRpY3QgU2VydmVyIFNpZ25pbmcgQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKqdQ1N1GRfhy0uJaXzYG4mLKt841w9lr13+GBhdxMIgzzrzuZrLnN05jN/lA90C+0BPBqMdPIoR97z847EgRjm438hbnw3nADBl07vzbG7EAS9tnK1BlJiHlYGnVYnCcIQdg2IdDJMsatKnnuiWH0xaDzv9D5sPS2jbqhQKJcwNqiILl86X9W3zdJxanQ/b2XMCGwGoWxIsNwgERZaJz9mpNiYUoe/Bwf5Nw9vLckkLPJYbEU3B5hteZydroKQilzqhb3BIyhnGb68YUROjQhuhdSP5g5I3tDLpuZtxb7miXjDVEVYYqdewtnnAiVQHn+c5YpNMxWhnMvWEDkLx3NAgMBAAGjEjAQMA4GA1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQsFAAOCAQEAsec8Q+RX4movGB1ftIPvRJDhZ1n6ixyjeYVXIWZvx245rlXa2EHPHPBWcNEkm42Crzh35pkh7jJd/EHN2tbMRBt6vTZGVr7fnmwVSU5mwXUaKZYfmnR+D1GzGdl8JAQ3GnqBqPb9nC7sEfc2NPIbPMhM1anD1utDBE2jrf6cYyIqtB2MbrLGSfngp7e+bLihky9XUzig5nxZDgeHSbm30SplVQLMJ2bwuSlF9+z4m0bucWeFS0qUjUt60CBWg/8axMJ+Nd2LrAs3H9EwuQABaeFFTkW/Czs5nzAe2RNSS77WSGVc1kOpLzj5qIqzFuSRUhLEXpZYyQAiAxT8agCTlg=="
      ]
    }
  ]
}.
2025-03-17 03:20:27.734 -04:00 [INF] Request finished HTTP/1.1 GET https://localhost:44395/.well-known/jwks - 200 1635 application/json;charset=UTF-8 3.4172ms
2025-03-17 03:22:49.263 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 03:22:49.287 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 07:53:29.063 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 07:53:29.283 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 07:53:29.284 -04:00 [INF] Quartz Scheduler created
2025-03-17 07:53:29.284 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 07:53:29.285 -04:00 [INF] RAMJobStore initialized.
2025-03-17 07:53:29.286 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 07:53:29.286 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 07:53:29.286 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 07:53:29.301 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 07:53:29.302 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 07:54:58.420 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 07:54:58.521 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 07:54:58.525 -04:00 [INF] Quartz Scheduler created
2025-03-17 07:54:58.526 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 07:54:58.526 -04:00 [INF] RAMJobStore initialized.
2025-03-17 07:54:58.527 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 07:54:58.527 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 07:54:58.527 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 07:54:58.537 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 07:54:58.539 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 07:54:59.307 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 07:54:59.414 -04:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 07:54:59.715 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 07:54:59.792 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 07:54:59.794 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 07:54:59.796 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 07:54:59.816 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 07:55:00.445 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 07:55:00.446 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 07:55:00.447 -04:00 [INF] Hosting environment: Development
2025-03-17 07:55:00.447 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 07:55:00.449 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 07:55:01.556 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 07:55:01.935 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 07:55:01.949 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 07:55:02.026 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 07:55:02.031 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.9678ms.
2025-03-17 07:55:02.047 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 07:55:02.148 -04:00 [INF] Executed ViewResult - view Index executed in 110.9812ms.
2025-03-17 07:55:02.151 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 200.6779ms
2025-03-17 07:55:02.153 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 07:55:02.160 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 608.3339ms
2025-03-17 07:55:02.173 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - null null
2025-03-17 07:55:02.173 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/css/site.css - null null
2025-03-17 07:55:02.173 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
2025-03-17 07:55:02.173 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - null null
2025-03-17 07:55:02.174 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 07:55:02.245 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - null null
2025-03-17 07:55:02.245 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - null null
2025-03-17 07:55:02.249 -04:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2025-03-17 07:55:02.249 -04:00 [INF] The file /css/site.css was not modified
2025-03-17 07:55:02.249 -04:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2025-03-17 07:55:02.249 -04:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2025-03-17 07:55:02.249 -04:00 [INF] The file /OpeniddictServer.styles.css was not modified
2025-03-17 07:55:02.249 -04:00 [INF] The file /js/site.js was not modified
2025-03-17 07:55:02.251 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 304 null text/javascript 77.4521ms
2025-03-17 07:55:02.251 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - 304 null text/css 77.461ms
2025-03-17 07:55:02.251 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - 304 null text/javascript 66.3438ms
2025-03-17 07:55:02.251 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/css/site.css - 304 null text/css 77.5652ms
2025-03-17 07:55:02.251 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - 304 null text/css 77.5652ms
2025-03-17 07:55:02.251 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - 304 null text/javascript 5.5275ms
2025-03-17 07:55:02.252 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 07:55:02.257 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 82.569ms
2025-03-17 07:55:02.308 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.8393ms
2025-03-17 07:55:04.492 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 29
2025-03-17 07:55:04.498 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 07:55:04.535 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "client_credentials",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 07:55:04.566 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 07:55:04.619 -04:00 [INF] The token request was successfully validated.
2025-03-17 07:55:04.626 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 07:55:04.642 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 07:55:04.724 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 07:55:04.897 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 07:55:04.909 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 184.5816ms.
2025-03-17 07:55:04.913 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 07:55:05.212 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 07:55:05.329 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599
}.
2025-03-17 07:55:05.336 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 692.6289ms
2025-03-17 07:55:05.337 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 07:55:05.341 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/token - 200 1730 application/json;charset=UTF-8 849.3482ms
2025-03-17 07:57:58.756 -04:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 07:57:58.797 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 08:34:13.479 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 08:34:13.615 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 08:34:13.615 -04:00 [INF] Quartz Scheduler created
2025-03-17 08:34:13.616 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 08:34:13.616 -04:00 [INF] RAMJobStore initialized.
2025-03-17 08:34:13.617 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 08:34:13.617 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 08:34:13.618 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 08:34:13.654 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 08:34:13.656 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 08:34:14.635 -04:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 08:34:14.692 -04:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 08:34:14.991 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:34:15.060 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:34:15.062 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:34:15.063 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:34:15.079 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 08:34:15.634 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 08:34:15.635 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 08:34:15.635 -04:00 [INF] Hosting environment: Development
2025-03-17 08:34:15.636 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 08:34:15.638 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 08:34:16.678 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 08:34:17.159 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 08:34:17.170 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 08:34:17.238 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 08:34:17.241 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.7307ms.
2025-03-17 08:34:17.267 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 08:34:17.409 -04:00 [INF] Executed ViewResult - view Index executed in 161.0727ms.
2025-03-17 08:34:17.410 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 238.4462ms
2025-03-17 08:34:17.411 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 08:34:17.420 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 747.0004ms
2025-03-17 08:34:17.436 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 08:34:17.439 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 08:34:17.446 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 10.1883ms
2025-03-17 08:34:17.471 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.5216ms
2025-03-17 08:34:22.174 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 29
2025-03-17 08:34:22.181 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 08:34:22.204 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "client_credentials",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 08:34:22.241 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:34:22.284 -04:00 [INF] The token request was successfully validated.
2025-03-17 08:34:22.293 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 08:34:22.308 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 08:34:22.460 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 08:34:22.610 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 08:34:22.618 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 157.6363ms.
2025-03-17 08:34:22.622 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 08:34:22.874 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 08:34:22.994 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599
}.
2025-03-17 08:34:23.001 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 692.5846ms
2025-03-17 08:34:23.002 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 08:34:23.006 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/token - 200 1730 application/json;charset=UTF-8 832.3806ms
2025-03-17 08:39:13.905 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 08:39:13.939 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 08:53:30.274 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 08:53:30.382 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 08:53:30.387 -04:00 [INF] Quartz Scheduler created
2025-03-17 08:53:30.387 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 08:53:30.388 -04:00 [INF] RAMJobStore initialized.
2025-03-17 08:53:30.389 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 08:53:30.389 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 08:53:30.389 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 08:53:30.395 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 08:53:30.397 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 08:53:31.205 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 08:53:31.256 -04:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 08:53:31.507 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:53:31.594 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:53:31.596 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:53:31.598 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:53:31.613 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 08:53:32.090 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 08:53:32.091 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 08:53:32.091 -04:00 [INF] Hosting environment: Development
2025-03-17 08:53:32.092 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 08:53:32.093 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 08:53:32.870 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 08:53:33.197 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one encryption key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddEncryptionCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentEncryptionCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralEncryptionKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 08:53:33.253 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 388.0882ms
2025-03-17 08:53:33.271 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 08:53:33.271 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 08:53:33.275 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 4.1823ms
2025-03-17 08:53:33.304 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.6267ms
2025-03-17 08:54:46.937 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 08:54:47.062 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 08:54:47.065 -04:00 [INF] Quartz Scheduler created
2025-03-17 08:54:47.066 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 08:54:47.066 -04:00 [INF] RAMJobStore initialized.
2025-03-17 08:54:47.066 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 08:54:47.067 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 08:54:47.067 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 08:54:47.075 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 08:54:47.076 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 08:54:47.862 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 08:54:47.906 -04:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 08:54:48.214 -04:00 [INF] Executed DbCommand (71ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:54:48.279 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:54:48.281 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:54:48.283 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 08:54:48.298 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 08:54:48.711 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 08:54:48.712 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 08:54:48.713 -04:00 [INF] Hosting environment: Development
2025-03-17 08:54:48.713 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 08:54:48.715 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 08:54:49.689 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 08:54:50.067 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 08:54:50.076 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 08:54:50.131 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 08:54:50.135 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.2082ms.
2025-03-17 08:54:50.147 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 08:54:50.228 -04:00 [INF] Executed ViewResult - view Index executed in 85.1525ms.
2025-03-17 08:54:50.230 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 152.5408ms
2025-03-17 08:54:50.231 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 08:54:50.237 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 553.0713ms
2025-03-17 08:54:50.253 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 08:54:50.254 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 08:54:50.305 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 52.7186ms
2025-03-17 08:54:50.325 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.0969ms
2025-03-17 08:57:47.289 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 08:57:47.328 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 22:34:52.626 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 22:34:52.941 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 22:34:52.941 -04:00 [INF] Quartz Scheduler created
2025-03-17 22:34:52.942 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 22:34:52.942 -04:00 [INF] RAMJobStore initialized.
2025-03-17 22:34:52.943 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 22:34:52.943 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 22:34:52.944 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 22:34:52.973 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 22:34:52.975 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 22:34:54.606 -04:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 22:34:54.765 -04:00 [INF] Executed DbCommand (146ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 22:34:55.244 -04:00 [INF] Executed DbCommand (33ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:34:55.424 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:34:55.428 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:34:55.432 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:34:55.466 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 22:34:56.578 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 22:34:56.580 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 22:34:56.580 -04:00 [INF] Hosting environment: Development
2025-03-17 22:34:56.581 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 22:34:56.582 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 22:34:57.980 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 22:34:58.851 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 22:34:58.868 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 22:34:59.055 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:34:59.059 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.8313ms.
2025-03-17 22:34:59.081 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 22:34:59.214 -04:00 [INF] Executed ViewResult - view Index executed in 144.8317ms.
2025-03-17 22:34:59.217 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 347.6298ms
2025-03-17 22:34:59.219 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 22:34:59.228 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 1254.292ms
2025-03-17 22:34:59.247 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - null null
2025-03-17 22:34:59.247 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/css/site.css - null null
2025-03-17 22:34:59.247 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - null null
2025-03-17 22:34:59.254 -04:00 [INF] The file /OpeniddictServer.styles.css was not modified
2025-03-17 22:34:59.254 -04:00 [INF] The file /css/site.css was not modified
2025-03-17 22:34:59.255 -04:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2025-03-17 22:34:59.257 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/OpeniddictServer.styles.css?v=nkK0Zuiih-VcqWA2rYEflpsYSgCrm9LlAz2eg7QtTfE - 304 null text/css 10.3637ms
2025-03-17 22:34:59.257 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/css/bootstrap.min.css - 304 null text/css 10.4099ms
2025-03-17 22:34:59.257 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/css/site.css - 304 null text/css 10.4087ms
2025-03-17 22:34:59.305 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - null null
2025-03-17 22:34:59.306 -04:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2025-03-17 22:34:59.306 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery/dist/jquery.min.js - 304 null text/javascript 1.0773ms
2025-03-17 22:34:59.379 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
2025-03-17 22:34:59.380 -04:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2025-03-17 22:34:59.380 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 304 null text/javascript 1.1124ms
2025-03-17 22:34:59.380 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - null null
2025-03-17 22:34:59.381 -04:00 [INF] The file /js/site.js was not modified
2025-03-17 22:34:59.382 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/js/site.js?v=hRQyftXiu1lLX2P9Ly9xa4gHJgLeR1uGN5qegUobtGo - 304 null text/javascript 1.2904ms
2025-03-17 22:34:59.411 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 22:34:59.413 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 22:34:59.434 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 22.9628ms
2025-03-17 22:34:59.507 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.1425ms
2025-03-17 22:35:53.347 -04:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 22:35:53.398 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 22:36:17.585 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login - null null
2025-03-17 22:36:17.717 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 22:36:17.732 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 22:36:17.744 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 22:36:17.750 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 22:36:17.751 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 22:36:17.753 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 22:36:17.753 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 22:36:17.794 -04:00 [INF] Executed page /Account/Login in 61.3057ms
2025-03-17 22:36:17.794 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 22:36:17.795 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login - 200 null text/html; charset=utf-8 209.8968ms
2025-03-17 22:36:17.808 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 22:36:17.810 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery-validation/dist/jquery.validate.min.js - null null
2025-03-17 22:36:17.810 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 22:36:17.810 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js - null null
2025-03-17 22:36:17.810 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 2.0039ms
2025-03-17 22:36:17.811 -04:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.min.js was not modified
2025-03-17 22:36:17.811 -04:00 [INF] The file /lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js was not modified
2025-03-17 22:36:17.812 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery-validation/dist/jquery.validate.min.js - 304 null text/javascript 2.2393ms
2025-03-17 22:36:17.813 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js - 304 null text/javascript 3.0137ms
2025-03-17 22:36:17.820 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.8056ms
2025-03-17 22:36:23.283 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Register - null null
2025-03-17 22:36:23.354 -04:00 [INF] Executing endpoint '/Account/Register'
2025-03-17 22:36:23.362 -04:00 [INF] Route matched with {page = "/Account/Register", area = "Identity", action = "", controller = ""}. Executing page /Account/Register
2025-03-17 22:36:23.370 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V5.Pages.Account.Internal.RegisterModel.OnGetAsync - ModelState is "Valid"
2025-03-17 22:36:23.372 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 22:36:23.372 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 22:36:23.372 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 22:36:23.399 -04:00 [INF] Executed page /Account/Register in 35.8687ms
2025-03-17 22:36:23.400 -04:00 [INF] Executed endpoint '/Account/Register'
2025-03-17 22:36:23.403 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Register - 200 null text/html; charset=utf-8 119.7914ms
2025-03-17 22:36:23.410 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 22:36:23.410 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 22:36:23.411 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 0.8998ms
2025-03-17 22:36:23.437 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.3572ms
2025-03-17 22:36:24.579 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login - null null
2025-03-17 22:36:24.618 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 22:36:24.618 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 22:36:24.619 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 22:36:24.620 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 22:36:24.620 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 22:36:24.620 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 22:36:24.621 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 22:36:24.624 -04:00 [INF] Executed page /Account/Login in 5.6621ms
2025-03-17 22:36:24.626 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 22:36:24.626 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login - 200 null text/html; charset=utf-8 47.0572ms
2025-03-17 22:36:24.640 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 22:36:24.640 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 22:36:24.641 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 1.0482ms
2025-03-17 22:36:24.656 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.9164ms
2025-03-17 22:37:53.618 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 22:37:53.642 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:37:53.644 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 22:37:53.648 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 22:37:53.649 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 22:37:53.664 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 22:37:53.669 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 51.0562ms
2025-03-17 22:37:53.692 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=2efb854e33799d8b66a09f62bc14c5039b0RriDMY&state=0c4b5d24ef161f97c8470a19204704eb72WCLSTLD&code_challenge=EEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM&code_challenge_method=S256 - null null
2025-03-17 22:37:53.751 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 22:37:53.764 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "2efb854e33799d8b66a09f62bc14c5039b0RriDMY",
  "state": "0c4b5d24ef161f97c8470a19204704eb72WCLSTLD",
  "code_challenge": "EEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM",
  "code_challenge_method": "S256"
}.
2025-03-17 22:37:53.837 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:37:53.860 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 22:37:53.864 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 22:37:53.869 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 22:37:54.027 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:37:54.037 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 7.9834ms.
2025-03-17 22:37:54.039 -04:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2025-03-17 22:37:54.044 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-03-17 22:37:54.045 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 175.7931ms
2025-03-17 22:37:54.045 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 22:37:54.046 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=2efb854e33799d8b66a09f62bc14c5039b0RriDMY&state=0c4b5d24ef161f97c8470a19204704eb72WCLSTLD&code_challenge=EEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM&code_challenge_method=S256 - 302 0 null 353.9571ms
2025-03-17 22:37:54.052 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D2efb854e33799d8b66a09f62bc14c5039b0RriDMY%26state%3D0c4b5d24ef161f97c8470a19204704eb72WCLSTLD%26code_challenge%3DEEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM%26code_challenge_method%3DS256 - null null
2025-03-17 22:37:54.107 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 22:37:54.108 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 22:37:54.111 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 22:37:54.112 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 22:37:54.112 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 22:37:54.112 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 22:37:54.112 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 22:37:54.116 -04:00 [INF] Executed page /Account/Login in 7.4757ms
2025-03-17 22:37:54.116 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 22:37:54.116 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D2efb854e33799d8b66a09f62bc14c5039b0RriDMY%26state%3D0c4b5d24ef161f97c8470a19204704eb72WCLSTLD%26code_challenge%3DEEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 64.7749ms
2025-03-17 22:37:54.154 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 22:37:54.158 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 3.6541ms
2025-03-17 22:37:54.160 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 22:37:54.168 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.7702ms
2025-03-17 22:37:59.627 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D2efb854e33799d8b66a09f62bc14c5039b0RriDMY%26state%3D0c4b5d24ef161f97c8470a19204704eb72WCLSTLD%26code_challenge%3DEEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM%26code_challenge_method%3DS256 - application/x-www-form-urlencoded 268
2025-03-17 22:37:59.670 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:37:59.671 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 22:37:59.671 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 22:37:59.695 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-17 22:37:59.777 -04:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-17 22:38:00.016 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 22:38:00.039 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 22:38:00.049 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-17 22:38:00.051 -04:00 [INF] User logged in.
2025-03-17 22:38:00.052 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 22:38:00.054 -04:00 [INF] Executing LocalRedirectResult, redirecting to /connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=2efb854e33799d8b66a09f62bc14c5039b0RriDMY&state=0c4b5d24ef161f97c8470a19204704eb72WCLSTLD&code_challenge=EEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM&code_challenge_method=S256.
2025-03-17 22:38:00.055 -04:00 [INF] Executed page /Account/Login in 383.8785ms
2025-03-17 22:38:00.056 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 22:38:00.056 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3D2efb854e33799d8b66a09f62bc14c5039b0RriDMY%26state%3D0c4b5d24ef161f97c8470a19204704eb72WCLSTLD%26code_challenge%3DEEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM%26code_challenge_method%3DS256 - 302 0 null 429.1873ms
2025-03-17 22:38:00.068 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=2efb854e33799d8b66a09f62bc14c5039b0RriDMY&state=0c4b5d24ef161f97c8470a19204704eb72WCLSTLD&code_challenge=EEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM&code_challenge_method=S256 - null null
2025-03-17 22:38:00.116 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 22:38:00.117 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "2efb854e33799d8b66a09f62bc14c5039b0RriDMY",
  "state": "0c4b5d24ef161f97c8470a19204704eb72WCLSTLD",
  "code_challenge": "EEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM",
  "code_challenge_method": "S256"
}.
2025-03-17 22:38:00.124 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:38:00.127 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 22:38:00.131 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 22:38:00.131 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 22:38:00.201 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:38:00.237 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 22:38:00.329 -04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-17 22:38:00.357 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 22:38:00.359 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 22:38:00.944 -04:00 [INF] Executed DbCommand (539ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 22:38:00.949 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 746.8747ms.
2025-03-17 22:38:00.951 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 22:38:01.524 -04:00 [INF] Executed DbCommand (398ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:38:02.071 -04:00 [INF] Executed DbCommand (272ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 22:38:02.085 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "0c4b5d24ef161f97c8470a19204704eb72WCLSTLD",
  "iss": "https://localhost:44395/"
}.
2025-03-17 22:38:02.091 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 1958.7011ms
2025-03-17 22:38:02.091 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 22:38:02.092 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=2efb854e33799d8b66a09f62bc14c5039b0RriDMY&state=0c4b5d24ef161f97c8470a19204704eb72WCLSTLD&code_challenge=EEP9TiMDFx_jxGA_tI7IOmcaQ5ETkGJFZaGe2y8BKbM&code_challenge_method=S256 - 302 0 null 2024.0176ms
2025-03-17 22:38:02.316 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-17 22:38:02.317 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:38:02.318 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 22:38:02.324 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "4d29f1ecb3eaa682afc96240b82437ed70f7b539d357decc789c0cf2141cR6je4KL",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-17 22:38:02.341 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:38:02.384 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-17 22:38:02.474 -04:00 [INF] The token request was successfully validated.
2025-03-17 22:38:02.478 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 22:38:02.481 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 22:38:02.586 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:38:02.593 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 22:38:02.595 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 8.2696ms.
2025-03-17 22:38:02.596 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 22:38:02.603 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 22:38:02.606 -04:00 [INF] The token 'f21b0779-dd1f-4cdc-9b3d-0e9f37c80526' was successfully marked as redeemed.
2025-03-17 22:38:02.618 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:38:02.626 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:38:02.634 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:38:02.641 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-17 22:38:02.645 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 163.2699ms
2025-03-17 22:38:02.645 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 22:38:02.646 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 5292 application/json;charset=UTF-8 329.7794ms
2025-03-17 22:38:02.653 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 22:38:02.653 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:38:02.654 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 22:38:02.656 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 22:38:02.658 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 22:38:02.664 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "3DM1JRXVI2K4LWPNOEHYMEUZQBVM5_LHFBS6RRE0",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "3dm1JRXVi2k4lwPNoeHYMEuZqbVM5_LHFBS6rRE00r0UoO9hIJCqwBLm3EuRLwyPfajYoVpBfyKgiA7B2adgZMk_20BT8UB93EEPxzVKmYGsQOUpTBQ1Ox8fKzsDDoZ5H7B0MvWsccw1icXmiFxLYwit9ap7UmWeBzht39lRcCWynKWccUDhcxCQZcc39_XSBo60Q9rtdunmS7aL2FIBtXl4fkaSypukUmf3g0Wp1Urv-6I9KU_q0ywYKFs3A1lnghwMNTtO1vvFLtOqs14fzfUU85F7WulUIWs-bjT7OgRg4TKyM7kQoNRvm52v8yJSafOQ9oZuNPb6GRlXGpaZ-Q"
    }
  ]
}.
2025-03-17 22:38:02.666 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 536 application/json;charset=UTF-8 12.9571ms
2025-03-17 22:38:02.698 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-17 22:38:02.699 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:38:02.700 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 1.8107ms
2025-03-17 22:38:02.702 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-17 22:38:02.702 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:38:02.702 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-17 22:38:02.705 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-17 22:38:02.729 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 22:38:02.736 -04:00 [INF] The userinfo request was successfully validated.
2025-03-17 22:38:02.750 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 22:38:02.754 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-17 22:38:02.850 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:38:02.854 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 22:38:02.856 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.6764ms.
2025-03-17 22:38:02.861 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-17 22:38:02.884 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 129.6918ms
2025-03-17 22:38:02.885 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 22:38:02.885 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 183.5623ms
2025-03-17 22:38:35.910 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 22:38:35.911 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:38:35.912 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/.well-known/openid-configuration - 204 null null 1.2768ms
2025-03-17 22:38:35.926 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - null null
2025-03-17 22:38:35.927 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:38:35.927 -04:00 [INF] The request URI matched a server endpoint: "Configuration".
2025-03-17 22:38:35.928 -04:00 [INF] The configuration request was successfully extracted: {}.
2025-03-17 22:38:35.928 -04:00 [INF] The configuration request was successfully validated.
2025-03-17 22:38:35.929 -04:00 [INF] The response was successfully returned as a JSON document: {
  "issuer": "https://localhost:44395/",
  "authorization_endpoint": "https://localhost:44395/connect/authorize",
  "token_endpoint": "https://localhost:44395/connect/token",
  "introspection_endpoint": "https://localhost:44395/connect/introspect",
  "end_session_endpoint": "https://localhost:44395/connect/logout",
  "userinfo_endpoint": "https://localhost:44395/connect/userinfo",
  "jwks_uri": "https://localhost:44395/.well-known/jwks",
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "client_credentials",
    "refresh_token"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "code id_token token",
    "code token"
  ],
  "response_modes_supported": [
    "query",
    "form_post",
    "fragment"
  ],
  "scopes_supported": [
    "openid",
    "offline_access",
    "email",
    "profile",
    "roles",
    "dataEventRecords"
  ],
  "claims_supported": [
    "aud",
    "exp",
    "iat",
    "iss",
    "sub"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256"
  ],
  "code_challenge_methods_supported": [
    "plain",
    "S256"
  ],
  "subject_types_supported": [
    "public"
  ],
  "prompt_values_supported": [
    "consent",
    "login",
    "none",
    "select_account"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "introspection_endpoint_auth_methods_supported": [
    "client_secret_post",
    "private_key_jwt",
    "client_secret_basic"
  ],
  "claims_parameter_supported": false,
  "request_parameter_supported": false,
  "request_uri_parameter_supported": false,
  "tls_client_certificate_bound_access_tokens": false,
  "authorization_response_iss_parameter_supported": true
}.
2025-03-17 22:38:35.932 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/openid-configuration - 200 1815 application/json;charset=UTF-8 5.772ms
2025-03-17 22:38:35.938 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/.well-known/jwks - null null
2025-03-17 22:38:35.939 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:38:35.940 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/.well-known/jwks - 204 null null 1.1627ms
2025-03-17 22:38:35.941 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 22:38:35.942 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:38:35.942 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 22:38:35.942 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 22:38:35.943 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 22:38:35.943 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "3DM1JRXVI2K4LWPNOEHYMEUZQBVM5_LHFBS6RRE0",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "3dm1JRXVi2k4lwPNoeHYMEuZqbVM5_LHFBS6rRE00r0UoO9hIJCqwBLm3EuRLwyPfajYoVpBfyKgiA7B2adgZMk_20BT8UB93EEPxzVKmYGsQOUpTBQ1Ox8fKzsDDoZ5H7B0MvWsccw1icXmiFxLYwit9ap7UmWeBzht39lRcCWynKWccUDhcxCQZcc39_XSBo60Q9rtdunmS7aL2FIBtXl4fkaSypukUmf3g0Wp1Urv-6I9KU_q0ywYKFs3A1lnghwMNTtO1vvFLtOqs14fzfUU85F7WulUIWs-bjT7OgRg4TKyM7kQoNRvm52v8yJSafOQ9oZuNPb6GRlXGpaZ-Q"
    }
  ]
}.
2025-03-17 22:38:35.944 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 536 application/json;charset=UTF-8 3.4913ms
2025-03-17 22:46:46.814 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 22:46:46.946 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 22:46:46.952 -04:00 [INF] Quartz Scheduler created
2025-03-17 22:46:46.953 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 22:46:46.954 -04:00 [INF] RAMJobStore initialized.
2025-03-17 22:46:46.955 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 22:46:46.955 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 22:46:46.955 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 22:46:46.962 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 22:46:46.964 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 22:46:47.869 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 22:46:47.950 -04:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 22:46:48.318 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:46:48.403 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:46:48.406 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:46:48.409 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:46:48.427 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 22:46:48.988 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 22:46:48.989 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 22:46:48.990 -04:00 [INF] Hosting environment: Development
2025-03-17 22:46:48.990 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 22:46:48.992 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 22:46:49.748 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 22:46:50.063 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one asymmetric signing key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddSigningCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentSigningCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralSigningKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 22:46:50.145 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 404.9556ms
2025-03-17 22:46:50.157 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 22:46:50.157 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 22:46:50.163 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 6.3976ms
2025-03-17 22:46:50.187 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.034ms
2025-03-17 22:48:40.821 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 22:48:40.935 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 22:48:40.935 -04:00 [INF] Quartz Scheduler created
2025-03-17 22:48:40.936 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 22:48:40.936 -04:00 [INF] RAMJobStore initialized.
2025-03-17 22:48:40.937 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 22:48:40.937 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 22:48:40.938 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 22:48:40.945 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 22:48:40.948 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 22:48:41.813 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 22:48:41.884 -04:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 22:48:42.232 -04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:48:42.305 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:48:42.307 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:48:42.309 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:48:42.332 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 22:48:42.840 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 22:48:42.841 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 22:48:42.842 -04:00 [INF] Hosting environment: Development
2025-03-17 22:48:42.842 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 22:48:42.844 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 22:48:43.141 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 22:48:43.352 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: At least one encryption key must be registered in the OpenIddict server options.
Consider registering a certificate using 'services.AddOpenIddict().AddServer().AddEncryptionCertificate()' or 'services.AddOpenIddict().AddServer().AddDevelopmentEncryptionCertificate()' or call 'services.AddOpenIddict().AddServer().AddEphemeralEncryptionKey()' to use an ephemeral key.
   at OpenIddict.Server.OpenIddictServerConfiguration.PostConfigure(String name, OpenIddictServerOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at OpenIddict.Server.OpenIddictServerFactory.CreateTransactionAsync()
   at OpenIddict.Server.AspNetCore.OpenIddictServerAspNetCoreHandler.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-17 22:48:43.399 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 500 null text/html; charset=utf-8 262.2081ms
2025-03-17 22:48:43.415 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 22:48:43.415 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 22:48:43.424 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 9.8266ms
2025-03-17 22:48:43.446 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.7327ms
2025-03-17 22:49:09.794 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 22:49:09.891 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 22:49:09.893 -04:00 [INF] Quartz Scheduler created
2025-03-17 22:49:09.894 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 22:49:09.894 -04:00 [INF] RAMJobStore initialized.
2025-03-17 22:49:09.895 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 22:49:09.895 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 22:49:09.896 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 22:49:09.901 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 22:49:09.902 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 22:49:10.683 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 22:49:10.738 -04:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 22:49:11.031 -04:00 [INF] Executed DbCommand (31ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:49:11.115 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:49:11.117 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:49:11.119 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:49:11.138 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 22:49:11.564 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 22:49:11.565 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 22:49:11.569 -04:00 [INF] Hosting environment: Development
2025-03-17 22:49:11.570 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 22:49:11.571 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 22:49:12.193 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 22:49:12.438 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 22:49:12.445 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 22:49:12.493 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:49:12.496 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.6151ms.
2025-03-17 22:49:12.517 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 22:49:12.595 -04:00 [INF] Executed ViewResult - view Index executed in 92.4325ms.
2025-03-17 22:49:12.597 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 150.4456ms
2025-03-17 22:49:12.598 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 22:49:12.604 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 415.36ms
2025-03-17 22:49:12.613 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 22:49:12.622 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 9.065ms
2025-03-17 22:49:12.624 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 22:49:12.661 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.1347ms
2025-03-17 22:49:26.139 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=0df78f8d87c51d18b5acbd3c417692647bT1KmOlf&state=f1830daac6d1de4dd6b68f02a70b48e3f0teE5mnC&code_challenge=u8DVBJ8PkmEZnoYnmFfxMRq25hLcO2uh9O49WZ6vrmQ&code_challenge_method=S256 - null null
2025-03-17 22:49:26.219 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 22:49:26.256 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "0df78f8d87c51d18b5acbd3c417692647bT1KmOlf",
  "state": "f1830daac6d1de4dd6b68f02a70b48e3f0teE5mnC",
  "code_challenge": "u8DVBJ8PkmEZnoYnmFfxMRq25hLcO2uh9O49WZ6vrmQ",
  "code_challenge_method": "S256"
}.
2025-03-17 22:49:26.319 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:49:26.384 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 22:49:26.397 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 22:49:26.412 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 22:49:26.553 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:49:26.717 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 22:49:26.988 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-17 22:49:27.124 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 22:49:27.163 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 22:49:27.306 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 22:49:27.320 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 765.1867ms.
2025-03-17 22:49:27.329 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 22:49:27.789 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:49:28.035 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 22:49:28.075 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "f1830daac6d1de4dd6b68f02a70b48e3f0teE5mnC",
  "iss": "https://localhost:44395/"
}.
2025-03-17 22:49:28.093 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 1680.2857ms
2025-03-17 22:49:28.095 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 22:49:28.105 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=0df78f8d87c51d18b5acbd3c417692647bT1KmOlf&state=f1830daac6d1de4dd6b68f02a70b48e3f0teE5mnC&code_challenge=u8DVBJ8PkmEZnoYnmFfxMRq25hLcO2uh9O49WZ6vrmQ&code_challenge_method=S256 - 302 0 null 1965.6761ms
2025-03-17 22:49:28.227 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-17 22:49:28.237 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:49:28.243 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 22:49:28.270 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "053d0757d4bc2ce505d6fc7259b1b1b8978a77f694a1278cd23612be58c3w620jDa",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-17 22:49:28.440 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:49:28.537 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-17 22:49:28.760 -04:00 [INF] The token request was successfully validated.
2025-03-17 22:49:28.774 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 22:49:28.781 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 22:49:28.901 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:49:28.918 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 22:49:28.923 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 20.5957ms.
2025-03-17 22:49:28.925 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 22:49:28.939 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 22:49:28.944 -04:00 [INF] The token '601a5348-d8d0-4337-8277-0ab208dd53e1' was successfully marked as redeemed.
2025-03-17 22:49:28.982 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:49:28.994 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:49:29.010 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:49:29.055 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-17 22:49:29.064 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 281.7009ms
2025-03-17 22:49:29.065 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 22:49:29.067 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 4170 application/json;charset=UTF-8 839.6471ms
2025-03-17 22:49:29.076 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 22:49:29.079 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:49:29.080 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 22:49:29.087 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 22:49:29.090 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 22:49:29.101 -04:00 [INF] An unsupported signing key of type 'SymmetricSecurityKey' was ignored and excluded from the key set. Only RSA and ECDSA asymmetric security keys can be exposed via the JSON Web Key Set endpoint.
2025-03-17 22:49:29.117 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "8C36FD8DE3BC58CF1E9D22DA2FC9F4C25AEE1821",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "tFn4iOeWHGMvB4K1KfKsZGN4pBZA_F6bkxpyJ12sNk6nYKZsvGAWqwsVAWalrDKQ7JyQcGLdwXzzSuEWCwf0_yOazVQ9yAavRyflsUn87zB0fMSNCc1l569dZCA0oar5YcKKgIVvVkRZ-CHcLbccfCraqIu1ZHfPMnSu3eylbO2zjz0zccXo0k02VJVcNQUjryjNCaW90JQK87OAZVebYTjh7j8BxLgAE7qCWnFM7FrC_ePfGy4ufpBvzGFXmyqcoABSC5iZI8kUEz5izXnP89uMCruVVAMBLugUTIsVG5r4UihbIvlSFKwIpcq3wwfTLl_eZcJ2C2MoFh46hv3UmQ",
      "x5t": "jDb9jeO8WM8enSLaL8n0wlruGCE",
      "x5c": [
        "MIIDYDCCAkigAwIBAgIQVih4YPq5b6hIBxz8Di9bjDANBgkqhkiG9w0BAQsFADBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwHhcNMjUwMzA3MDMxMDQ5WhcNMjYwMzA3MDMzMDQ5WjBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC0WfiI55YcYy8HgrUp8qxkY3ikFkD8XpuTGnInXaw2Tqdgpmy8YBarCxUBZqWsMpDsnJBwYt3BfPNK4RYLB/T/I5rNVD3IBq9HJ+WxSfzvMHR8xI0JzWXnr11kIDShqvlhwoqAhW9WRFn4Idwttxx8Ktqoi7Vkd88ydK7d7KVs7bOPPTNxxejSTTZUlVw1BSOvKM0Jpb3QlArzs4BlV5thOOHuPwHEuAATuoJacUzsWsL9498bLi5+kG/MYVebKpygAFILmJkjyRQTPmLNec/z24wKu5VUAwEu6BRMixUbmvhSKFsi+VIUrAilyrfDB9MuX95lwnYLYygWHjqG/dSZAgMBAAGjVDBSMA4GA1UdDwEB/wQEAwIHgDATBgNVHSUEDDAKBggrBgEFBQcDAzAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBQZ8EMesWoZuCgc1sTDpjags19OrjANBgkqhkiG9w0BAQsFAAOCAQEAp/J4bvvGLwWuY5Ii0eC+N6kisVpee/H3xyL1sW7D4d1GLfz2S+3yfsaMF3jWvyZsF07Qk0eon7FSWpkG6X0R1CNduG6zkz6q4uMlwNVzEGGZCIm74LA7F0pERB8tvPn7sWzmyvCxN1wPWTnpfYMbqTjVUv5rx5kP48eYfierthTEvfO52noHl8Q1jbc+ZZrvcA0vGLoHAtmkTGSYFR3DIodB6w391m2QN2FknAISLYwqJxbPdp/boSQnvUSd4HFMXl1UOGTc/cIjvkDebNPq1ry1vYLTYPZ40UhvR17f8OM6PyhPSi8VYZJvfrc1X23D1oT2yJYZVKliNMxPDTrp5w=="
      ]
    }
  ]
}.
2025-03-17 22:49:29.121 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1779 application/json;charset=UTF-8 44.4086ms
2025-03-17 22:49:29.141 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-17 22:49:29.142 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:49:29.145 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 4.0814ms
2025-03-17 22:49:29.148 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-17 22:49:29.149 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:49:29.150 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-17 22:49:29.156 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-17 22:49:29.219 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 22:49:29.241 -04:00 [INF] The userinfo request was successfully validated.
2025-03-17 22:49:29.265 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 22:49:29.272 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-17 22:49:29.353 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:49:29.360 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 22:49:29.363 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.8708ms.
2025-03-17 22:49:29.375 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-17 22:49:29.429 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 156.4113ms
2025-03-17 22:49:29.431 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 22:49:29.432 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 284.2932ms
2025-03-17 22:49:30.850 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjhDMzZGRDhERTNCQzU4Q0YxRTlEMjJEQTJGQzlGNEMyNUFFRTE4MjEiLCJ4NXQiOiJqRGI5amVPOFdNOGVuU0xhTDhuMHdscnVHQ0UiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2xvY2FsaG9zdDo0NDM5NS8iLCJleHAiOjE3NDIyNjczNjgsImlhdCI6MTc0MjI2NjE2OCwiYXVkIjoiYW5ndWxhcmNsaWVudCIsInN1YiI6ImMwMDFkMGJjLTcyNTAtNDdlOC1hMTA1LTg1MWY3NmE4YjNjZiIsIm5hbWUiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwiZW1haWwiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwib2lfYXVfaWQiOiJlNjFiMzJkMS02OTU3LTRjZjItOWVkNS1lZDU5OGE5YWU1ZmIiLCJhenAiOiJhbmd1bGFyY2xpZW50Iiwibm9uY2UiOiIwZGY3OGY4ZDg3YzUxZDE4YjVhY2JkM2M0MTc2OTI2NDdiVDFLbU9sZiIsImF0X2hhc2giOiJPLVZVQ2ZFaEozU3podWhYUlBjODhnIiwib2lfdGtuX2lkIjoiNTUxNTM1ZGYtYzE4MC00ZWUxLTk5NDktNWJjNjgzYmEzY2Y4In0.d8r-T76Fce87ZenWLWek1Ime1WqzwlppcP29cL39K8wJigEy6YGwvsTgWC3OIC_u474sFW8ftycYlJjV-RXo696vkP1mc-0-NeUARTUZzDmAkXuDbf9oh6WrkGxz4vTVP7U3W1AvO0ka2g3UG3mcQEeXL1rTRW4eSPLPYwY4RP3GIOi1BUkMrvOyv7BzYTD2GGC8VC_ielzO_5ZQWqJOq8FyQZHw54IOwhjl5TTeKWbMdfVS3D51sJjcjMv2YaRelxqqcfAsjgxabBeWB-FoA683bDLJVuV-q5qBrs6zNET-Ldl3nSUtxn8By8frNYNZcR-ZehBA4UnP6Esckm1sHw&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A4200 - null null
2025-03-17 22:49:30.921 -04:00 [INF] The request URI matched a server endpoint: "EndSession".
2025-03-17 22:49:30.930 -04:00 [INF] The end session request was successfully extracted: {
  "id_token_hint": "[redacted]",
  "post_logout_redirect_uri": "http://localhost:4200"
}.
2025-03-17 22:49:30.954 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 22:49:31.038 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[@__uri_0_contains='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[PostLogoutRedirectUris] LIKE @__uri_0_contains ESCAPE N'\'
2025-03-17 22:49:31.062 -04:00 [INF] The end session request was successfully validated.
2025-03-17 22:49:31.076 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer)'
2025-03-17 22:49:31.080 -04:00 [INF] Route matched with {action = "Logout", controller = "Authorization", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 22:49:31.161 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:49:31.162 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.3391ms.
2025-03-17 22:49:31.187 -04:00 [INF] Executing ViewResult, running view Logout.
2025-03-17 22:49:31.228 -04:00 [INF] Executed ViewResult - view Logout executed in 64.4009ms.
2025-03-17 22:49:31.229 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer) in 147.695ms
2025-03-17 22:49:31.230 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Logout (OpeniddictServer)'
2025-03-17 22:49:31.230 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjhDMzZGRDhERTNCQzU4Q0YxRTlEMjJEQTJGQzlGNEMyNUFFRTE4MjEiLCJ4NXQiOiJqRGI5amVPOFdNOGVuU0xhTDhuMHdscnVHQ0UiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2xvY2FsaG9zdDo0NDM5NS8iLCJleHAiOjE3NDIyNjczNjgsImlhdCI6MTc0MjI2NjE2OCwiYXVkIjoiYW5ndWxhcmNsaWVudCIsInN1YiI6ImMwMDFkMGJjLTcyNTAtNDdlOC1hMTA1LTg1MWY3NmE4YjNjZiIsIm5hbWUiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwiZW1haWwiOiJqaG9uY2FjcnVAZ21haWwuY29tIiwib2lfYXVfaWQiOiJlNjFiMzJkMS02OTU3LTRjZjItOWVkNS1lZDU5OGE5YWU1ZmIiLCJhenAiOiJhbmd1bGFyY2xpZW50Iiwibm9uY2UiOiIwZGY3OGY4ZDg3YzUxZDE4YjVhY2JkM2M0MTc2OTI2NDdiVDFLbU9sZiIsImF0X2hhc2giOiJPLVZVQ2ZFaEozU3podWhYUlBjODhnIiwib2lfdGtuX2lkIjoiNTUxNTM1ZGYtYzE4MC00ZWUxLTk5NDktNWJjNjgzYmEzY2Y4In0.d8r-T76Fce87ZenWLWek1Ime1WqzwlppcP29cL39K8wJigEy6YGwvsTgWC3OIC_u474sFW8ftycYlJjV-RXo696vkP1mc-0-NeUARTUZzDmAkXuDbf9oh6WrkGxz4vTVP7U3W1AvO0ka2g3UG3mcQEeXL1rTRW4eSPLPYwY4RP3GIOi1BUkMrvOyv7BzYTD2GGC8VC_ielzO_5ZQWqJOq8FyQZHw54IOwhjl5TTeKWbMdfVS3D51sJjcjMv2YaRelxqqcfAsjgxabBeWB-FoA683bDLJVuV-q5qBrs6zNET-Ldl3nSUtxn8By8frNYNZcR-ZehBA4UnP6Esckm1sHw&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A4200 - 200 null text/html; charset=utf-8 379.9834ms
2025-03-17 22:49:31.243 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 22:49:31.245 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 1.3032ms
2025-03-17 22:49:31.259 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 22:49:31.296 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.5192ms
2025-03-17 22:49:32.463 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/logout - application/x-www-form-urlencoded 1340
2025-03-17 22:49:32.530 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:49:32.531 -04:00 [INF] The request URI matched a server endpoint: "EndSession".
2025-03-17 22:49:32.533 -04:00 [INF] The end session request was successfully extracted: {
  "id_token_hint": "[redacted]",
  "post_logout_redirect_uri": "http://localhost:4200",
  "Confirm": "Yes",
  "__RequestVerificationToken": "CfDJ8JaWFYA-jUJKpFtekQbaWloGTRrC1SNS2KPURKQnAtmbuywrHmHnWBkB9qtGF_mQzLxFcqvJrIbq2WiATKV_1ts5yBg1HWmHdPMnSsqhX81WeG6fdmGwtGyg9xaE--L9aC6q43iG_vC5yn8J1DNMUZ2O_EnRhNWPePLvCzLtnp9nWuMfe-_uYduqtlJiu-dswg"
}.
2025-03-17 22:49:32.541 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 22:49:32.549 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__uri_0_contains='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[PostLogoutRedirectUris] LIKE @__uri_0_contains ESCAPE N'\'
2025-03-17 22:49:32.551 -04:00 [INF] The end session request was successfully validated.
2025-03-17 22:49:32.553 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer)'
2025-03-17 22:49:32.561 -04:00 [INF] Route matched with {action = "Logout", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogoutPost() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 22:49:32.629 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:49:32.639 -04:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-03-17 22:49:32.641 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 22:49:32.642 -04:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-03-17 22:49:32.643 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignOutResult in 13.0006ms.
2025-03-17 22:49:32.647 -04:00 [INF] Executing SignOutResult with authentication schemes (["OpenIddict.Server.AspNetCore"]).
2025-03-17 22:49:32.668 -04:00 [INF] The end session response was successfully returned to 'http://localhost:4200': {}.
2025-03-17 22:49:32.671 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer) in 107.7271ms
2025-03-17 22:49:32.671 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.LogoutPost (OpeniddictServer)'
2025-03-17 22:49:32.672 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/logout - 302 0 null 209.7118ms
2025-03-17 22:49:33.837 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=a3f55cdbe4a472423caf7689581ff13e56chWyI4K&state=18e6750a91dab3c7600215aa0f2c349d55mXACQxp&code_challenge=zNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY&code_challenge_method=S256 - null null
2025-03-17 22:49:33.881 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 22:49:33.883 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "a3f55cdbe4a472423caf7689581ff13e56chWyI4K",
  "state": "18e6750a91dab3c7600215aa0f2c349d55mXACQxp",
  "code_challenge": "zNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY",
  "code_challenge_method": "S256"
}.
2025-03-17 22:49:33.888 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:49:33.893 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 22:49:33.895 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 22:49:33.896 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 22:49:33.968 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:49:33.973 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 4.6662ms.
2025-03-17 22:49:33.976 -04:00 [INF] Executing ChallengeResult with authentication schemes (["Identity.Application"]).
2025-03-17 22:49:33.980 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-03-17 22:49:33.981 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 83.8812ms
2025-03-17 22:49:33.982 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 22:49:33.983 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=a3f55cdbe4a472423caf7689581ff13e56chWyI4K&state=18e6750a91dab3c7600215aa0f2c349d55mXACQxp&code_challenge=zNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY&code_challenge_method=S256 - 302 0 null 145.6207ms
2025-03-17 22:49:33.988 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Da3f55cdbe4a472423caf7689581ff13e56chWyI4K%26state%3D18e6750a91dab3c7600215aa0f2c349d55mXACQxp%26code_challenge%3DzNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY%26code_challenge_method%3DS256 - null null
2025-03-17 22:49:34.066 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 22:49:34.111 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 22:49:34.145 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-03-17 22:49:34.149 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-03-17 22:49:34.152 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2025-03-17 22:49:34.161 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-03-17 22:49:34.162 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-03-17 22:49:34.256 -04:00 [INF] Executed page /Account/Login in 143.7582ms
2025-03-17 22:49:34.257 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 22:49:34.258 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Da3f55cdbe4a472423caf7689581ff13e56chWyI4K%26state%3D18e6750a91dab3c7600215aa0f2c349d55mXACQxp%26code_challenge%3DzNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY%26code_challenge_method%3DS256 - 200 null text/html; charset=utf-8 270.0104ms
2025-03-17 22:49:34.290 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 22:49:34.296 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 5.5152ms
2025-03-17 22:49:34.296 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 22:49:34.305 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.0242ms
2025-03-17 22:49:39.648 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Da3f55cdbe4a472423caf7689581ff13e56chWyI4K%26state%3D18e6750a91dab3c7600215aa0f2c349d55mXACQxp%26code_challenge%3DzNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY%26code_challenge_method%3DS256 - application/x-www-form-urlencoded 268
2025-03-17 22:49:39.734 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:49:39.736 -04:00 [INF] Executing endpoint '/Account/Login'
2025-03-17 22:49:39.737 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-03-17 22:49:39.772 -04:00 [INF] Executing handler method OpeniddictServer.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-03-17 22:49:39.797 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-03-17 22:49:40.062 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 22:49:40.067 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 22:49:40.074 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-03-17 22:49:40.077 -04:00 [INF] User logged in.
2025-03-17 22:49:40.081 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-03-17 22:49:40.087 -04:00 [INF] Executing LocalRedirectResult, redirecting to /connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=a3f55cdbe4a472423caf7689581ff13e56chWyI4K&state=18e6750a91dab3c7600215aa0f2c349d55mXACQxp&code_challenge=zNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY&code_challenge_method=S256.
2025-03-17 22:49:40.088 -04:00 [INF] Executed page /Account/Login in 350.6133ms
2025-03-17 22:49:40.089 -04:00 [INF] Executed endpoint '/Account/Login'
2025-03-17 22:49:40.090 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dangularclient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A4200%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520dataEventRecords%2520offline_access%26nonce%3Da3f55cdbe4a472423caf7689581ff13e56chWyI4K%26state%3D18e6750a91dab3c7600215aa0f2c349d55mXACQxp%26code_challenge%3DzNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY%26code_challenge_method%3DS256 - 302 0 null 442.4052ms
2025-03-17 22:49:40.093 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=a3f55cdbe4a472423caf7689581ff13e56chWyI4K&state=18e6750a91dab3c7600215aa0f2c349d55mXACQxp&code_challenge=zNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY&code_challenge_method=S256 - null null
2025-03-17 22:49:40.147 -04:00 [INF] The request URI matched a server endpoint: "Authorization".
2025-03-17 22:49:40.149 -04:00 [INF] The authorization request was successfully extracted: {
  "client_id": "angularclient",
  "redirect_uri": "http://localhost:4200",
  "response_type": "code",
  "scope": "openid profile email dataEventRecords offline_access",
  "nonce": "a3f55cdbe4a472423caf7689581ff13e56chWyI4K",
  "state": "18e6750a91dab3c7600215aa0f2c349d55mXACQxp",
  "code_challenge": "zNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY",
  "code_challenge_method": "S256"
}.
2025-03-17 22:49:40.157 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:49:40.169 -04:00 [INF] The authorization request was successfully validated.
2025-03-17 22:49:40.172 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 22:49:40.172 -04:00 [INF] Route matched with {action = "Authorize", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authorize() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 22:49:40.252 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:49:40.254 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 22:49:40.259 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subject_0='?' (Size = 400), @__key_1='?' (Size = 450), @__status_2='?' (Size = 50), @__type_3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ApplicationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[Properties], [o].[Scopes], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings]
FROM [OpenIddictAuthorizations] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
INNER JOIN [OpenIddictApplications] AS [o1] ON [o0].[Id] = [o1].[Id]
WHERE [o].[Subject] = @__subject_0 AND [o1].[Id] = @__key_1 AND [o].[Status] = @__status_2 AND [o].[Type] = @__type_3
2025-03-17 22:49:40.262 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 22:49:40.265 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 22:49:40.275 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 22:49:40.278 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 24.5552ms.
2025-03-17 22:49:40.279 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 22:49:40.290 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:49:40.298 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 22:49:40.300 -04:00 [INF] The authorization response was successfully returned to 'http://localhost:4200' using the query response mode: {
  "code": "[redacted]",
  "state": "18e6750a91dab3c7600215aa0f2c349d55mXACQxp",
  "iss": "https://localhost:44395/"
}.
2025-03-17 22:49:40.301 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer) in 127.8651ms
2025-03-17 22:49:40.302 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Authorize (OpeniddictServer)'
2025-03-17 22:49:40.303 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/authorize?client_id=angularclient&redirect_uri=http%3A%2F%2Flocalhost%3A4200&response_type=code&scope=openid%20profile%20email%20dataEventRecords%20offline_access&nonce=a3f55cdbe4a472423caf7689581ff13e56chWyI4K&state=18e6750a91dab3c7600215aa0f2c349d55mXACQxp&code_challenge=zNejZ4EivGdLn3vX6RccxKyDqCv3Jt_qAleLyTlcoaY&code_challenge_method=S256 - 302 0 null 209.6587ms
2025-03-17 22:49:40.451 -04:00 [INF] Request starting HTTP/2 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 227
2025-03-17 22:49:40.452 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:49:40.452 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 22:49:40.453 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "authorization_code",
  "client_id": "angularclient",
  "code_verifier": "cf37f247ac4a5c1b7af99e11db7adaf0651db170d7c2f8096d544b38541e8MVpqhU",
  "code": "[redacted]",
  "redirect_uri": "http://localhost:4200"
}.
2025-03-17 22:49:40.457 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 22:49:40.460 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[ReferenceId] = @__identifier_0
2025-03-17 22:49:40.465 -04:00 [INF] The token request was successfully validated.
2025-03-17 22:49:40.466 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 22:49:40.467 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 22:49:40.528 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:49:40.531 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 22:49:40.532 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 3.8063ms.
2025-03-17 22:49:40.533 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 22:49:40.538 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p12='?' (Size = 450), @p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 50), @p13='?' (Size = 50), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (Size = 100), @p9='?' (Size = 50), @p10='?' (Size = 400), @p11='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OpenIddictTokens] SET [ApplicationId] = @p0, [AuthorizationId] = @p1, [ConcurrencyToken] = @p2, [CreationDate] = @p3, [ExpirationDate] = @p4, [Payload] = @p5, [Properties] = @p6, [RedemptionDate] = @p7, [ReferenceId] = @p8, [Status] = @p9, [Subject] = @p10, [Type] = @p11
OUTPUT 1
WHERE [Id] = @p12 AND [ConcurrencyToken] = @p13;
2025-03-17 22:49:40.540 -04:00 [INF] The token '0584a0ad-eaa7-4b2a-83d8-7976d30396be' was successfully marked as redeemed.
2025-03-17 22:49:40.545 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:49:40.551 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:49:40.558 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 22:49:40.563 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid profile email dataEventRecords offline_access",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2025-03-17 22:49:40.565 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 97.7108ms
2025-03-17 22:49:40.566 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 22:49:40.566 -04:00 [INF] Request finished HTTP/2 POST https://localhost:44395/connect/token - 200 4170 application/json;charset=UTF-8 115.601ms
2025-03-17 22:49:40.573 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/.well-known/jwks - null null
2025-03-17 22:49:40.574 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:49:40.575 -04:00 [INF] The request URI matched a server endpoint: "JsonWebKeySet".
2025-03-17 22:49:40.576 -04:00 [INF] The JSON Web Key Set request was successfully extracted: {}.
2025-03-17 22:49:40.576 -04:00 [INF] The JSON Web Key Set request was successfully validated.
2025-03-17 22:49:40.576 -04:00 [INF] An unsupported signing key of type 'SymmetricSecurityKey' was ignored and excluded from the key set. Only RSA and ECDSA asymmetric security keys can be exposed via the JSON Web Key Set endpoint.
2025-03-17 22:49:40.578 -04:00 [INF] The response was successfully returned as a JSON document: {
  "keys": [
    {
      "kid": "8C36FD8DE3BC58CF1E9D22DA2FC9F4C25AEE1821",
      "use": "sig",
      "kty": "RSA",
      "alg": "RS256",
      "e": "AQAB",
      "n": "tFn4iOeWHGMvB4K1KfKsZGN4pBZA_F6bkxpyJ12sNk6nYKZsvGAWqwsVAWalrDKQ7JyQcGLdwXzzSuEWCwf0_yOazVQ9yAavRyflsUn87zB0fMSNCc1l569dZCA0oar5YcKKgIVvVkRZ-CHcLbccfCraqIu1ZHfPMnSu3eylbO2zjz0zccXo0k02VJVcNQUjryjNCaW90JQK87OAZVebYTjh7j8BxLgAE7qCWnFM7FrC_ePfGy4ufpBvzGFXmyqcoABSC5iZI8kUEz5izXnP89uMCruVVAMBLugUTIsVG5r4UihbIvlSFKwIpcq3wwfTLl_eZcJ2C2MoFh46hv3UmQ",
      "x5t": "jDb9jeO8WM8enSLaL8n0wlruGCE",
      "x5c": [
        "MIIDYDCCAkigAwIBAgIQVih4YPq5b6hIBxz8Di9bjDANBgkqhkiG9w0BAQsFADBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwHhcNMjUwMzA3MDMxMDQ5WhcNMjYwMzA3MDMzMDQ5WjBBMQswCQYDVQQGEwJVUzEeMBwGA1UECgwVSmhvbmNhY3J1IENvcnBvcmF0aW9uMRIwEAYDVQQDDAlKaG9uY2FjcnUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC0WfiI55YcYy8HgrUp8qxkY3ikFkD8XpuTGnInXaw2Tqdgpmy8YBarCxUBZqWsMpDsnJBwYt3BfPNK4RYLB/T/I5rNVD3IBq9HJ+WxSfzvMHR8xI0JzWXnr11kIDShqvlhwoqAhW9WRFn4Idwttxx8Ktqoi7Vkd88ydK7d7KVs7bOPPTNxxejSTTZUlVw1BSOvKM0Jpb3QlArzs4BlV5thOOHuPwHEuAATuoJacUzsWsL9498bLi5+kG/MYVebKpygAFILmJkjyRQTPmLNec/z24wKu5VUAwEu6BRMixUbmvhSKFsi+VIUrAilyrfDB9MuX95lwnYLYygWHjqG/dSZAgMBAAGjVDBSMA4GA1UdDwEB/wQEAwIHgDATBgNVHSUEDDAKBggrBgEFBQcDAzAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBQZ8EMesWoZuCgc1sTDpjags19OrjANBgkqhkiG9w0BAQsFAAOCAQEAp/J4bvvGLwWuY5Ii0eC+N6kisVpee/H3xyL1sW7D4d1GLfz2S+3yfsaMF3jWvyZsF07Qk0eon7FSWpkG6X0R1CNduG6zkz6q4uMlwNVzEGGZCIm74LA7F0pERB8tvPn7sWzmyvCxN1wPWTnpfYMbqTjVUv5rx5kP48eYfierthTEvfO52noHl8Q1jbc+ZZrvcA0vGLoHAtmkTGSYFR3DIodB6w391m2QN2FknAISLYwqJxbPdp/boSQnvUSd4HFMXl1UOGTc/cIjvkDebNPq1ry1vYLTYPZ40UhvR17f8OM6PyhPSi8VYZJvfrc1X23D1oT2yJYZVKliNMxPDTrp5w=="
      ]
    }
  ]
}.
2025-03-17 22:49:40.580 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/.well-known/jwks - 200 1779 application/json;charset=UTF-8 7.0422ms
2025-03-17 22:49:40.599 -04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - null null
2025-03-17 22:49:40.600 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:49:40.600 -04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44395/connect/userinfo - 204 null null 1.7046ms
2025-03-17 22:49:40.602 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/connect/userinfo - null null
2025-03-17 22:49:40.604 -04:00 [INF] CORS policy execution successful.
2025-03-17 22:49:40.604 -04:00 [INF] The request URI matched a server endpoint: "UserInfo".
2025-03-17 22:49:40.605 -04:00 [INF] The userinfo request was successfully extracted: {
  "access_token": "[redacted]"
}.
2025-03-17 22:49:40.610 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 22:49:40.612 -04:00 [INF] The userinfo request was successfully validated.
2025-03-17 22:49:40.615 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 22:49:40.615 -04:00 [INF] Route matched with {action = "Userinfo", controller = "Userinfo", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Userinfo() on controller OpeniddictServer.Controllers.UserinfoController (OpeniddictServer).
2025-03-17 22:49:40.678 -04:00 [INF] Executing action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) - Validation state: "Valid"
2025-03-17 22:49:40.680 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 22:49:40.681 -04:00 [INF] Executed action method OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.7073ms.
2025-03-17 22:49:40.682 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-17 22:49:40.683 -04:00 [INF] Executed action OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer) in 66.4881ms
2025-03-17 22:49:40.683 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.UserinfoController.Userinfo (OpeniddictServer)'
2025-03-17 22:49:40.684 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/connect/userinfo - 200 null application/json; charset=utf-8 81.1966ms
2025-03-17 22:58:10.122 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 22:58:10.166 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 23:14:47.695 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 29
2025-03-17 23:14:47.697 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 23:14:47.701 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "client_credentials",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:14:47.748 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:14:47.775 -04:00 [INF] The token request was successfully validated.
2025-03-17 23:14:47.778 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:14:47.780 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 23:14:47.924 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 23:14:47.942 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 23:14:47.943 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 17.8418ms.
2025-03-17 23:14:47.944 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 23:14:47.964 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 23:14:47.979 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599
}.
2025-03-17 23:14:47.984 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 202.7238ms
2025-03-17 23:14:47.985 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:14:47.986 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/token - 200 477 application/json;charset=UTF-8 294.0933ms
2025-03-17 23:17:24.822 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 484
2025-03-17 23:17:24.823 -04:00 [INF] The request URI matched a server endpoint: "Introspection".
2025-03-17 23:17:24.829 -04:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "client_id": "hub.uab.angular",
  "client_secret": "[redacted]"
}.
2025-03-17 23:17:24.846 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:17:24.848 -04:00 [INF] The authentication demand was rejected because the client application was not found: 'hub.uab.angular'.
2025-03-17 23:17:24.864 -04:00 [INF] The response was successfully returned as a JSON document: {
  "error": "invalid_client",
  "error_description": "The specified 'client_id' is invalid.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2052"
}.
2025-03-17 23:17:24.865 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 401 168 application/json;charset=UTF-8 43.5639ms
2025-03-17 23:17:52.580 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 444
2025-03-17 23:17:52.582 -04:00 [INF] The request URI matched a server endpoint: "Introspection".
2025-03-17 23:17:52.583 -04:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:17:52.594 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:17:52.643 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 23:17:52.649 -04:00 [INF] The introspection request was rejected because the application 'CC' was not allowed to use the introspection endpoint.
2025-03-17 23:17:52.650 -04:00 [INF] The response was successfully returned as a JSON document: {
  "error": "unauthorized_client",
  "error_description": "This client application is not allowed to use the introspection endpoint.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2075"
}.
2025-03-17 23:17:52.652 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 400 209 application/json;charset=UTF-8 71.1535ms
2025-03-17 23:19:31.288 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 29
2025-03-17 23:19:31.289 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 23:19:31.290 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "client_credentials",
  "client_id": "rs_dataEventRecordsApi",
  "client_secret": "[redacted]"
}.
2025-03-17 23:19:31.298 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:19:31.315 -04:00 [INF] The token request was rejected because the application 'rs_dataEventRecordsApi' was not allowed to use the token endpoint.
2025-03-17 23:19:31.318 -04:00 [INF] The response was successfully returned as a JSON document: {
  "error": "unauthorized_client",
  "error_description": "This client application is not allowed to use the token endpoint.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2063"
}.
2025-03-17 23:19:31.319 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/token - 400 201 application/json;charset=UTF-8 30.9582ms
2025-03-17 23:22:39.277 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 23:22:39.420 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 23:22:39.420 -04:00 [INF] Quartz Scheduler created
2025-03-17 23:22:39.428 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 23:22:39.428 -04:00 [INF] RAMJobStore initialized.
2025-03-17 23:22:39.429 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 23:22:39.429 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 23:22:39.429 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 23:22:39.441 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 23:22:39.444 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 23:22:40.401 -04:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 23:22:40.489 -04:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 23:22:40.842 -04:00 [INF] Executed DbCommand (33ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:22:40.940 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:22:40.970 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:22:41.044 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 50), @p2='?' (Size = 100), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictApplications] ([Id], [ApplicationType], [ClientId], [ClientSecret], [ClientType], [ConcurrencyToken], [ConsentType], [DisplayName], [DisplayNames], [JsonWebKeySet], [Permissions], [PostLogoutRedirectUris], [Properties], [RedirectUris], [Requirements], [Settings])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-03-17 23:22:41.060 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:22:41.062 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:22:41.083 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 23:22:41.668 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 23:22:41.669 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 23:22:41.670 -04:00 [INF] Hosting environment: Development
2025-03-17 23:22:41.670 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 23:22:41.673 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 23:22:42.267 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 23:22:42.961 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-17 23:22:43.024 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-03-17 23:22:43.049 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-03-17 23:22:43.058 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 23:22:43.067 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 23:22:43.277 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 23:22:43.283 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.0724ms.
2025-03-17 23:22:43.301 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 23:22:43.385 -04:00 [INF] Executed ViewResult - view Index executed in 94.0004ms.
2025-03-17 23:22:43.387 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 317.8747ms
2025-03-17 23:22:43.387 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 23:22:43.398 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 1139.2529ms
2025-03-17 23:22:43.406 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 23:22:43.415 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 23:22:43.416 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 9.7401ms
2025-03-17 23:22:43.450 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.8809ms
2025-03-17 23:22:56.108 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 29
2025-03-17 23:22:56.168 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 23:22:56.208 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "client_credentials",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:22:56.401 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:22:56.471 -04:00 [INF] The token request was successfully validated.
2025-03-17 23:22:56.483 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:22:56.496 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 23:22:56.624 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 23:22:56.767 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 23:22:56.782 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 156.4564ms.
2025-03-17 23:22:56.790 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 23:22:57.064 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 23:22:57.198 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599
}.
2025-03-17 23:22:57.212 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 714.0609ms
2025-03-17 23:22:57.214 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:22:57.218 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/token - 200 477 application/json;charset=UTF-8 1111.1299ms
2025-03-17 23:23:11.883 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 444
2025-03-17 23:23:11.894 -04:00 [INF] The request URI matched a server endpoint: "Introspection".
2025-03-17 23:23:11.902 -04:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:23:11.923 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:23:12.179 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 23:23:12.212 -04:00 [INF] The introspection request was successfully validated.
2025-03-17 23:23:12.225 -04:00 [INF] Potentially sensitive application claims were excluded from the introspection response as the client 'CC' was not explicitly listed as an audience.
2025-03-17 23:23:12.235 -04:00 [INF] The response was successfully returned as a JSON document: {
  "active": true,
  "iss": "https://localhost:44395/",
  "sub": "CC",
  "jti": "d2b0543d-f501-4bb4-a0c7-26a9ac4102ae",
  "token_type": "Bearer",
  "token_usage": "access_token",
  "client_id": "CC",
  "iat": 1742268176,
  "nbf": 1742268176,
  "exp": 1742271776
}.
2025-03-17 23:23:12.236 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 200 275 application/json;charset=UTF-8 353.887ms
2025-03-17 23:29:39.630 -04:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 23:29:39.674 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
2025-03-17 23:31:55.740 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 444
2025-03-17 23:31:55.743 -04:00 [INF] The request URI matched a server endpoint: "Introspection".
2025-03-17 23:31:55.746 -04:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:31:55.760 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:31:55.788 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 23:31:55.795 -04:00 [INF] The introspection request was successfully validated.
2025-03-17 23:31:55.796 -04:00 [INF] Potentially sensitive application claims were excluded from the introspection response as the client 'CC' was not explicitly listed as an audience.
2025-03-17 23:31:55.797 -04:00 [INF] The response was successfully returned as a JSON document: {
  "active": true,
  "iss": "https://localhost:44395/",
  "sub": "CC",
  "jti": "d2b0543d-f501-4bb4-a0c7-26a9ac4102ae",
  "token_type": "Bearer",
  "token_usage": "access_token",
  "client_id": "CC",
  "iat": 1742268176,
  "nbf": 1742268176,
  "exp": 1742271776
}.
2025-03-17 23:31:55.799 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 200 275 application/json;charset=UTF-8 58.5669ms
2025-03-17 23:32:03.630 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 29
2025-03-17 23:32:03.632 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 23:32:03.633 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "client_credentials",
  "client_id": "rs_dataEventRecordsApi",
  "client_secret": "[redacted]"
}.
2025-03-17 23:32:03.642 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:32:03.655 -04:00 [INF] The token request was rejected because the application 'rs_dataEventRecordsApi' was not allowed to use the token endpoint.
2025-03-17 23:32:03.663 -04:00 [INF] The response was successfully returned as a JSON document: {
  "error": "unauthorized_client",
  "error_description": "This client application is not allowed to use the token endpoint.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2063"
}.
2025-03-17 23:32:03.665 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/token - 400 201 application/json;charset=UTF-8 35.8827ms
2025-03-17 23:32:15.316 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 29
2025-03-17 23:32:15.317 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 23:32:15.319 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "client_credentials",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:32:15.327 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:32:15.340 -04:00 [INF] The token request was successfully validated.
2025-03-17 23:32:15.349 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:32:15.350 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 23:32:15.484 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 23:32:15.499 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 23:32:15.501 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 15.3093ms.
2025-03-17 23:32:15.502 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 23:32:15.515 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 23:32:15.519 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599
}.
2025-03-17 23:32:15.521 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 169.5432ms
2025-03-17 23:32:15.521 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:32:15.522 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/token - 200 477 application/json;charset=UTF-8 205.5327ms
2025-03-17 23:33:49.225 -04:00 [INF] User profile is available. Using 'C:\Users\jhonc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-17 23:33:49.351 -04:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-03-17 23:33:49.386 -04:00 [INF] Quartz Scheduler created
2025-03-17 23:33:49.387 -04:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-03-17 23:33:49.387 -04:00 [INF] RAMJobStore initialized.
2025-03-17 23:33:49.388 -04:00 [INF] Quartz Scheduler 3.13.1.0 - 'QuartzScheduler' with instanceId 'NON_CLUSTERED' initialized
2025-03-17 23:33:49.388 -04:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-03-17 23:33:49.388 -04:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-03-17 23:33:49.397 -04:00 [INF] Adding 1 jobs, 1 triggers.
2025-03-17 23:33:49.399 -04:00 [INF] Adding job: OpenIddict/Quartz.NET integration.OpenIddict job
2025-03-17 23:33:50.367 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-03-17 23:33:50.431 -04:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-03-17 23:33:50.724 -04:00 [INF] Executed DbCommand (59ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:33:50.791 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:33:50.845 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:33:50.847 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:33:50.867 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] = @__name_0
2025-03-17 23:33:51.387 -04:00 [INF] Now listening on: https://localhost:44395
2025-03-17 23:33:51.388 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-17 23:33:51.389 -04:00 [INF] Hosting environment: Development
2025-03-17 23:33:51.389 -04:00 [INF] Content root path: D:\Development\GITHub\AuthSample\src\OpeniddictServer
2025-03-17 23:33:51.392 -04:00 [INF] Scheduler QuartzScheduler_$_NON_CLUSTERED started.
2025-03-17 23:33:52.113 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/ - null null
2025-03-17 23:33:52.621 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 23:33:52.629 -04:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller OpeniddictServer.Controllers.HomeController (OpeniddictServer).
2025-03-17 23:33:52.754 -04:00 [INF] Executing action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) - Validation state: "Valid"
2025-03-17 23:33:52.762 -04:00 [INF] Executed action method OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.4028ms.
2025-03-17 23:33:52.787 -04:00 [INF] Executing ViewResult, running view Index.
2025-03-17 23:33:52.875 -04:00 [INF] Executed ViewResult - view Index executed in 104.4057ms.
2025-03-17 23:33:52.877 -04:00 [INF] Executed action OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer) in 246.925ms
2025-03-17 23:33:52.878 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.HomeController.Index (OpeniddictServer)'
2025-03-17 23:33:52.888 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/ - 200 null text/html; charset=utf-8 778.5998ms
2025-03-17 23:33:52.896 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - null null
2025-03-17 23:33:52.904 -04:00 [INF] Request starting HTTP/2 GET https://localhost:44395/_vs/browserLink - null null
2025-03-17 23:33:52.907 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_framework/aspnetcore-browser-refresh.js - 200 16517 application/javascript; charset=utf-8 11.5685ms
2025-03-17 23:33:52.963 -04:00 [INF] Request finished HTTP/2 GET https://localhost:44395/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.12ms
2025-03-17 23:33:56.984 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 29
2025-03-17 23:33:56.992 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 23:33:57.027 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "client_credentials",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:33:57.085 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:33:57.154 -04:00 [INF] The token request was successfully validated.
2025-03-17 23:33:57.166 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:33:57.180 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 23:33:57.330 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 23:33:57.533 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 23:33:57.598 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 266.2921ms.
2025-03-17 23:33:57.609 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 23:33:58.086 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 23:33:58.223 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599
}.
2025-03-17 23:33:58.234 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 1053.697ms
2025-03-17 23:33:58.236 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:33:58.246 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/token - 200 842 application/json;charset=UTF-8 1262.4521ms
2025-03-17 23:34:13.003 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 809
2025-03-17 23:34:13.015 -04:00 [INF] The request URI matched a server endpoint: "Introspection".
2025-03-17 23:34:13.023 -04:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:34:13.150 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:34:13.416 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 23:34:13.455 -04:00 [INF] The introspection request was successfully validated.
2025-03-17 23:34:13.469 -04:00 [INF] Potentially sensitive application claims were excluded from the introspection response as the client 'CC' was not explicitly listed as an audience.
2025-03-17 23:34:13.482 -04:00 [INF] The response was successfully returned as a JSON document: {
  "active": true,
  "iss": "https://localhost:44395/",
  "sub": "CC",
  "jti": "81ce3b81-49cf-4764-bb46-d9b5f0b1aa32",
  "token_type": "Bearer",
  "token_usage": "access_token",
  "client_id": "CC",
  "iat": 1742268837,
  "nbf": 1742268837,
  "exp": 1742272437
}.
2025-03-17 23:34:13.483 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 200 275 application/json;charset=UTF-8 480.2387ms
2025-03-17 23:34:15.011 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 809
2025-03-17 23:34:15.013 -04:00 [INF] The request URI matched a server endpoint: "Introspection".
2025-03-17 23:34:15.014 -04:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:34:15.021 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:34:15.042 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 23:34:15.047 -04:00 [INF] The introspection request was successfully validated.
2025-03-17 23:34:15.048 -04:00 [INF] Potentially sensitive application claims were excluded from the introspection response as the client 'CC' was not explicitly listed as an audience.
2025-03-17 23:34:15.049 -04:00 [INF] The response was successfully returned as a JSON document: {
  "active": true,
  "iss": "https://localhost:44395/",
  "sub": "CC",
  "jti": "81ce3b81-49cf-4764-bb46-d9b5f0b1aa32",
  "token_type": "Bearer",
  "token_usage": "access_token",
  "client_id": "CC",
  "iat": 1742268837,
  "nbf": 1742268837,
  "exp": 1742272437
}.
2025-03-17 23:34:15.050 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 200 275 application/json;charset=UTF-8 39.095ms
2025-03-17 23:34:15.964 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/introspect - application/x-www-form-urlencoded 809
2025-03-17 23:34:15.965 -04:00 [INF] The request URI matched a server endpoint: "Introspection".
2025-03-17 23:34:15.967 -04:00 [INF] The introspection request was successfully extracted: {
  "token": "[redacted]",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:34:15.974 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:34:15.994 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationId], [o].[AuthorizationId], [o].[ConcurrencyToken], [o].[CreationDate], [o].[ExpirationDate], [o].[Payload], [o].[Properties], [o].[RedemptionDate], [o].[ReferenceId], [o].[Status], [o].[Subject], [o].[Type], [o0].[Id], [o0].[ApplicationType], [o0].[ClientId], [o0].[ClientSecret], [o0].[ClientType], [o0].[ConcurrencyToken], [o0].[ConsentType], [o0].[DisplayName], [o0].[DisplayNames], [o0].[JsonWebKeySet], [o0].[Permissions], [o0].[PostLogoutRedirectUris], [o0].[Properties], [o0].[RedirectUris], [o0].[Requirements], [o0].[Settings], [o1].[Id], [o1].[ApplicationId], [o1].[ConcurrencyToken], [o1].[CreationDate], [o1].[Properties], [o1].[Scopes], [o1].[Status], [o1].[Subject], [o1].[Type]
FROM [OpenIddictTokens] AS [o]
LEFT JOIN [OpenIddictApplications] AS [o0] ON [o].[ApplicationId] = [o0].[Id]
LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o].[AuthorizationId] = [o1].[Id]
WHERE [o].[Id] = @__key_0
2025-03-17 23:34:16.000 -04:00 [INF] The introspection request was successfully validated.
2025-03-17 23:34:16.004 -04:00 [INF] Potentially sensitive application claims were excluded from the introspection response as the client 'CC' was not explicitly listed as an audience.
2025-03-17 23:34:16.007 -04:00 [INF] The response was successfully returned as a JSON document: {
  "active": true,
  "iss": "https://localhost:44395/",
  "sub": "CC",
  "jti": "81ce3b81-49cf-4764-bb46-d9b5f0b1aa32",
  "token_type": "Bearer",
  "token_usage": "access_token",
  "client_id": "CC",
  "iat": 1742268837,
  "nbf": 1742268837,
  "exp": 1742272437
}.
2025-03-17 23:34:16.009 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/introspect - 200 275 application/json;charset=UTF-8 44.4738ms
2025-03-17 23:34:53.703 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 29
2025-03-17 23:34:53.705 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 23:34:53.706 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "client_credentials",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:34:53.727 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:34:53.803 -04:00 [INF] The token request was successfully validated.
2025-03-17 23:34:53.810 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:34:53.811 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 23:34:53.942 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 23:34:53.956 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 23:34:53.958 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 14.4522ms.
2025-03-17 23:34:53.959 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 23:34:53.976 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 23:34:53.983 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599
}.
2025-03-17 23:34:53.984 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 171.412ms
2025-03-17 23:34:53.984 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:34:53.985 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/token - 200 842 application/json;charset=UTF-8 282.8832ms
2025-03-17 23:34:55.385 -04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44395/connect/token - application/x-www-form-urlencoded 29
2025-03-17 23:34:55.386 -04:00 [INF] The request URI matched a server endpoint: "Token".
2025-03-17 23:34:55.387 -04:00 [INF] The token request was successfully extracted: {
  "grant_type": "client_credentials",
  "client_id": "CC",
  "client_secret": "[redacted]"
}.
2025-03-17 23:34:55.392 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__identifier_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[ApplicationType], [o].[ClientId], [o].[ClientSecret], [o].[ClientType], [o].[ConcurrencyToken], [o].[ConsentType], [o].[DisplayName], [o].[DisplayNames], [o].[JsonWebKeySet], [o].[Permissions], [o].[PostLogoutRedirectUris], [o].[Properties], [o].[RedirectUris], [o].[Requirements], [o].[Settings]
FROM [OpenIddictApplications] AS [o]
WHERE [o].[ClientId] = @__identifier_0
2025-03-17 23:34:55.404 -04:00 [INF] The token request was successfully validated.
2025-03-17 23:34:55.407 -04:00 [INF] Executing endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:34:55.408 -04:00 [INF] Route matched with {action = "Exchange", controller = "Authorization", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Exchange() on controller OpeniddictServer.Controllers.AuthorizationController (OpeniddictServer).
2025-03-17 23:34:55.470 -04:00 [INF] Executing action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) - Validation state: "Valid"
2025-03-17 23:34:55.474 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ConcurrencyToken], [o].[Description], [o].[Descriptions], [o].[DisplayName], [o].[DisplayNames], [o].[Name], [o].[Properties], [o].[Resources]
FROM [OpenIddictScopes] AS [o]
WHERE [o].[Name] IN (
    SELECT [p].[value]
    FROM OPENJSON(@__p_0) WITH ([value] nvarchar(200) '$') AS [p]
)
2025-03-17 23:34:55.476 -04:00 [INF] Executed action method OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer), returned result Microsoft.AspNetCore.Mvc.SignInResult in 5.1221ms.
2025-03-17 23:34:55.477 -04:00 [INF] Executing SignInResult with authentication scheme (OpenIddict.Server.AspNetCore) and the following principal: System.Security.Claims.ClaimsPrincipal.
2025-03-17 23:34:55.487 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 50), @p11='?' (Size = 400), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OpenIddictTokens] ([Id], [ApplicationId], [AuthorizationId], [ConcurrencyToken], [CreationDate], [ExpirationDate], [Payload], [Properties], [RedemptionDate], [ReferenceId], [Status], [Subject], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-17 23:34:55.492 -04:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3600
}.
2025-03-17 23:34:55.493 -04:00 [INF] Executed action OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer) in 84.9673ms
2025-03-17 23:34:55.494 -04:00 [INF] Executed endpoint 'OpeniddictServer.Controllers.AuthorizationController.Exchange (OpeniddictServer)'
2025-03-17 23:34:55.494 -04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44395/connect/token - 200 842 application/json;charset=UTF-8 109.0851ms
2025-03-17 23:41:49.551 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictTokens] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictTokens] AS [o0]
    LEFT JOIN [OpenIddictAuthorizations] AS [o1] ON [o0].[AuthorizationId] = [o1].[Id]
    WHERE [o0].[CreationDate] < @__date_0 AND ((([o0].[Status] <> N'inactive' OR [o0].[Status] IS NULL) AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL)) OR ([o1].[Id] IS NOT NULL AND ([o1].[Status] <> N'valid' OR [o1].[Status] IS NULL)) OR [o0].[ExpirationDate] < GETUTCDATE())
    ORDER BY [o0].[Id]
)
2025-03-17 23:41:49.607 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_1='?' (DbType = Int32), @__date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [o]
FROM [OpenIddictAuthorizations] AS [o]
WHERE [o].[Id] IN (
    SELECT TOP(@__p_1) [o0].[Id]
    FROM [OpenIddictAuthorizations] AS [o0]
    WHERE [o0].[CreationDate] < @__date_0 AND ([o0].[Status] <> N'valid' OR [o0].[Status] IS NULL OR ([o0].[Type] = N'ad-hoc' AND NOT EXISTS (
        SELECT 1
        FROM [OpenIddictTokens] AS [o1]
        WHERE [o0].[Id] = [o1].[AuthorizationId])))
    ORDER BY [o0].[Id]
)
